{"id":"cPpV55c1w997tleT","meta":{"instanceId":"75407e4233b5ec16079c0f9467ab9e00a60aa3f4c8e23c321c5f9f6a293e6c3b"},"name":"AI Location Scout Assistant","tags":[],"nodes":[{"id":"819e5931-70f9-41cf-904d-051465896438","name":"Chat Trigger","type":"@n8n/n8n-nodes-langchain.chatTrigger","position":[-288,512],"webhookId":"65305426-5ba4-4cfc-bd5a-4985f6b101da","parameters":{"public":true,"options":{"loadPreviousSession":"memory"}},"typeVersion":1.4},{"id":"1fe1d346-07e7-4a24-9324-65aa6e7cf1a8","name":"Simple Memory","type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","position":[-288,768],"parameters":{},"typeVersion":1.3},{"id":"db066d89-1ec6-4965-9778-c7d872151bc4","name":"Workflow Configuration","type":"n8n-nodes-base.set","position":[144,512],"parameters":{"options":{},"assignments":{"assignments":[{"id":"id-1","name":"googleMapsApiKey","type":"string","value":"<__PLACEHOLDER_VALUE__Google Maps API Key__>"},{"id":"id-2","name":"slackChannelId","type":"string","value":"<__PLACEHOLDER_VALUE__Slack Channel ID__>"},{"id":"id-3","name":"googleSheetId","type":"string","value":"<__PLACEHOLDER_VALUE__Google Sheet ID__>"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"aedef6fe-1d42-48dc-acce-efdf2ffeb49b","name":"Google Maps Places Search","type":"n8n-nodes-base.httpRequest","position":[544,512],"parameters":{"url":"https://maps.googleapis.com/maps/api/place/textsearch/json","options":{"response":{"response":{"responseFormat":"json"}}},"sendQuery":true,"queryParameters":{"parameters":[{"name":"query","value":"={{ $json.chatInput }}"},{"name":"key","value":"={{ $('Workflow Configuration').first().json.googleMapsApiKey }}"}]}},"typeVersion":4.3},{"id":"c3666e77-6f7a-4ba2-bce6-9183f068b947","name":"Loop Over Items","type":"n8n-nodes-base.splitInBatches","position":[1600,512],"parameters":{"options":{}},"typeVersion":3},{"id":"3e70e3d7-9e99-4361-977b-465dd8384d6a","name":"AI Location Analyzer","type":"@n8n/n8n-nodes-langchain.agent","position":[2256,576],"parameters":{"text":"=å ´æ‰€å: {{ $json.name }}\nä½æ‰€: {{ $json.formatted_address }}\nã‚«ãƒ†ã‚´ãƒª: {{ $json.types }}\nè©•ä¾¡: {{ $json.rating }}","options":{"systemMessage":"ã‚ãªãŸã¯ãƒ—ãƒ­ã®æ˜ åƒç›£ç£ã§ã™ã€‚æ¸¡ã•ã‚ŒãŸå ´æ‰€æƒ…å ±ã‚’ã‚‚ã¨ã«ã€æ’®å½±ã‚¹ãƒãƒƒãƒˆã¨ã—ã¦ã®é­…åŠ›ã‚’50æ–‡å­—ä»¥å†…ã§é­…åŠ›çš„ã«ç´¹ä»‹ã—ã¦ãã ã•ã„ã€‚"},"promptType":"define"},"typeVersion":3},{"id":"0113a3c7-3ed8-45f8-8396-20875f93a49a","name":"Append to Google Sheets","type":"n8n-nodes-base.googleSheets","position":[2656,576],"parameters":{"columns":{"value":{"ä½æ‰€":"={{ $('Loop Over Items').item.json.formatted_address }}","å ´æ‰€å":"={{ $('Loop Over Items').item.json.name }}","è©•ä¾¡(æ˜Ÿ)":"={{ $('Loop Over Items').item.json.rating }}","GoogleMapãƒªãƒ³ã‚¯":"=https://www.google.com/maps/place/?q=place_id:{{ $('Loop Over Items').item.json.place_id }}","AIç›£ç£ã®ã‚³ãƒ¡ãƒ³ãƒˆ":"={{ $json.output }}"},"schema":[{"id":"å ´æ‰€å","required":false,"displayName":"å ´æ‰€å","defaultMatch":false,"canBeUsedToMatch":true},{"id":"ä½æ‰€","required":false,"displayName":"ä½æ‰€","defaultMatch":false,"canBeUsedToMatch":true},{"id":"è©•ä¾¡(æ˜Ÿ)","required":false,"displayName":"è©•ä¾¡(æ˜Ÿ)","defaultMatch":false,"canBeUsedToMatch":true},{"id":"AIç›£ç£ã®ã‚³ãƒ¡ãƒ³ãƒˆ","required":false,"displayName":"AIç›£ç£ã®ã‚³ãƒ¡ãƒ³ãƒˆ","defaultMatch":false,"canBeUsedToMatch":true},{"id":"GoogleMapãƒªãƒ³ã‚¯","required":false,"displayName":"GoogleMapãƒªãƒ³ã‚¯","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["å ´æ‰€å"],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{},"operation":"append","sheetName":{"__rl":true,"mode":"name","value":"Sheet1"},"documentId":{"__rl":true,"mode":"id","value":"={{ $('Workflow Configuration').first().json.googleSheetId }}"}},"typeVersion":4.7},{"id":"f32c93c7-9079-4f92-a1b0-aa6ac33dccde","name":"Send Slack Notification","type":"n8n-nodes-base.slack","position":[1952,432],"webhookId":"d025fac6-75e2-4a45-a142-e782d43519dd","parameters":{"text":"=ğŸ¬ ãƒ­ã‚±ãƒãƒ³ãƒªã‚¹ãƒˆä½œæˆå®Œäº†ï¼\n\nã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{ $('Chat Trigger').first().json.chatInput }}\n\nã‚·ãƒ¼ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„: https://docs.google.com/spreadsheets/d/{{ $('Workflow Configuration').first().json.googleSheetId }}","select":"channel","channelId":{"__rl":true,"mode":"id","value":"={{ $('Workflow Configuration').first().json.slackChannelId }}"},"otherOptions":{},"authentication":"oAuth2"},"typeVersion":2.3},{"id":"a6801250-d2b3-43e9-b9ab-21c84e7fa369","name":"Limit","type":"n8n-nodes-base.limit","position":[1248,512],"parameters":{"maxItems":2},"typeVersion":1},{"id":"fe7d6534-f05e-4bb8-a881-9b1152ac8487","name":"OpenRouter Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","position":[2256,832],"parameters":{"options":{}},"typeVersion":1},{"id":"04f042ad-8f04-47fe-ac8c-ddeda94a7b3c","name":"Split Out","type":"n8n-nodes-base.splitOut","position":[896,512],"parameters":{"options":{},"fieldToSplitOut":"results"},"typeVersion":1},{"id":"5d15f757-b4a1-4248-a946-87dd29be6d5e","name":"Main Sticky","type":"n8n-nodes-base.stickyNote","position":[-976,320],"parameters":{"width":563,"height":678,"content":"## ğŸ¬ AI Location Scout Assistant\nThis workflow acts as your personal film location scout. It searches for locations via Google Maps, analyzes them using AI for cinematic potential, saves details to Google Sheets, and notifies you on Slack.\n\n### How it works\n1. **Chat Input:** Enter a keyword (e.g., \"Cyberpunk streets in Tokyo\").\n2. **Search:** Queries Google Places API.\n3. **AI Analysis:** An AI agent writes a \"Director's Commentary\" for each spot.\n4. **Save & Notify:** Saves to Sheets and alerts Slack.\n\n### Setup steps\n1. **Google Cloud:** Enable \"Places API (New)\" and get an API Key.\n2. **Google Sheets:** Create a sheet with headers: `å ´æ‰€å`, `ä½æ‰€`, `è©•ä¾¡(æ˜Ÿ)`, `AIç›£ç£ã®ã‚³ãƒ¡ãƒ³ãƒˆ`, `GoogleMapãƒªãƒ³ã‚¯`.\n3. **Config Node:** Update the `Workflow Configuration` node with your API Key, Sheet ID, and Slack Channel ID."},"typeVersion":1},{"id":"f2face15-b514-48db-9e25-1bae6ac667f5","name":"Config Group","type":"n8n-nodes-base.stickyNote","position":[-384,320],"parameters":{"color":7,"width":768,"height":676,"content":"## 1. Input & Configuration\nCaptures user chat commands and sets global variables (API Keys, IDs) to be used throughout the workflow."},"typeVersion":1},{"id":"fe0210f1-b005-4d50-9878-d1dc9182ff66","name":"Search Group","type":"n8n-nodes-base.stickyNote","position":[416,320],"parameters":{"color":7,"width":1044,"height":684,"content":"## 2. Search & Data Prep\nQueries the Google Places API based on your keyword, splits the results, and limits the count to manage costs."},"typeVersion":1},{"id":"3bd3d2ee-6ce6-43d6-a9b7-f8b421da6e8b","name":"Process Group","type":"n8n-nodes-base.stickyNote","position":[1504,320],"parameters":{"color":7,"width":1364,"height":680,"content":"## 3. AI Analysis & Output\nLoops through each location. The AI Agent generates a creative description, saves data to Google Sheets, and sends a final notification to Slack."},"typeVersion":1}],"active":false,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"cc9a0949-fee8-4f84-b40d-d950e0c65a96","connections":{"Limit":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"Limit","type":"main","index":0}]]},"Chat Trigger":{"main":[[{"node":"Workflow Configuration","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Chat Trigger","type":"ai_memory","index":0}]]},"Loop Over Items":{"main":[[{"node":"Send Slack Notification","type":"main","index":0}],[{"node":"AI Location Analyzer","type":"main","index":0}]]},"AI Location Analyzer":{"main":[[{"node":"Append to Google Sheets","type":"main","index":0}]]},"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"AI Location Analyzer","type":"ai_languageModel","index":0}]]},"Workflow Configuration":{"main":[[{"node":"Google Maps Places Search","type":"main","index":0}]]},"Append to Google Sheets":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Google Maps Places Search":{"main":[[{"node":"Split Out","type":"main","index":0}]]}}}