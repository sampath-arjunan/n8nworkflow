Automated Content Strategy with Google Trends, News, Firecrawl & Claude AI

https://n8nworkflows.xyz/workflows/automated-content-strategy-with-google-trends--news--firecrawl---claude-ai-7372


# Automated Content Strategy with Google Trends, News, Firecrawl & Claude AI

### 1. Workflow Overview

This workflow automates a data-driven content strategy by leveraging Google Trends, Google News, Firecrawl article scraping, and AI (Anthropic Claude model) to generate actionable blog content ideas. It is designed primarily for content creators, marketers, and social media managers aiming to stay ahead of emerging trends, collect relevant news articles, and produce AI-based content suggestions based on analyzed data.

The workflow is logically divided into the following blocks:

- **1.1 Input Reception and Scheduling**: Periodic triggering and input retrieval of monitoring topics from a Google Sheet.
- **1.2 Trend Data Collection and Structuring**: Fetch Google Trends related queries for each topic, classify and filter the queries.
- **1.3 Trend Query Filtering and Selection**: Use AI to select top non-geolocalized trending queries with growth percentages.
- **1.4 Google News Article Collection**: Search Google News for each selected query and extract top relevant articles.
- **1.5 Article Scraping and Content Analysis**: Scrape full article content using Firecrawl and generate blog post ideas with associated keywords using AI.
- **1.6 Results Compilation and Storage**: Organize and store all results (queries, trends, news links, AI ideas) into a Google Sheets workbook, creating monthly topic-based sheets.

---

### 2. Block-by-Block Analysis

#### 1.1 Input Reception and Scheduling

- **Overview:** This block triggers the workflow monthly and fetches the list of topics (queries) from a Google Sheet where users define their monitoring interests.
- **Nodes Involved:**  
  - Schedule Trigger  
  - Get Query  
  - Loop Over Items

- **Node Details:**

  - **Schedule Trigger**  
    - Type: `Schedule Trigger`  
    - Role: Starts the workflow automatically on the 1st day of each month at 8 AM (cron expression `0 8 1 * *`).  
    - Input: None  
    - Output: Triggers "Get Query" node  
    - Failure Modes: Cron misconfiguration, system downtime

  - **Get Query**  
    - Type: `Google Sheets`  
    - Role: Reads the "Query" sheet from a specified Google Sheets document containing topics to monitor.  
    - Config: Reads all rows from sheet named "Query" in a fixed Google Sheets URL.  
    - Credentials: Google Sheets OAuth2  
    - Input: Trigger from Schedule Trigger  
    - Output: Passes list of topics to "Loop Over Items"  
    - Failure Modes: Authentication errors, sheet access/reachability issues

  - **Loop Over Items**  
    - Type: `SplitInBatches`  
    - Role: Iterates over each topic from the sheet to process them individually downstream.  
    - Input: List of queries from Get Query  
    - Output: Passes single query to "Search trend" node  
    - Failure Modes: Batch size/configuration errors

---

#### 1.2 Trend Data Collection and Structuring

- **Overview:** For each input topic, fetch Google Trends related queries, then parse and organize the data into a structured format distinguishing between "top" and "rising" queries.
- **Nodes Involved:**  
  - Search trend  
  - Classing query

- **Node Details:**

  - **Search trend**  
    - Type: `SerpAPI (Google Trends)`  
    - Role: Queries Google Trends API for related search queries for the current topic within France and French language, focusing on the last month.  
    - Config: Query string from input topic, geo "FR", language "fr", date range "today 1-m", request related queries data only.  
    - Credentials: SerpAPI account  
    - Input: Single topic from Loop Over Items  
    - Output: Raw related queries JSON to "Classing query"  
    - Failure Modes: API quota limits, connectivity issues, malformed queries

  - **Classing query**  
    - Type: `Code`  
    - Role: Parses "related_queries" JSON into a nested structure separating "top" and "rising" queries, ranks and sorts them by extracted value, and limits output to top 10 queries.  
    - Inputs: Raw trend data JSON  
    - Outputs: JSON object with topic and top 10 related queries  
    - Failure Modes: Parsing errors if API response changes, empty data sets

---

#### 1.3 Trend Query Filtering and Selection

- **Overview:** AI-powered filtering to exclude geolocalized queries and select queries closely related to the main topic, outputting queries with associated growth percentages.
- **Nodes Involved:**  
  - Anthropic Chat Model (Claude)  
  - Structured Output Parser  
  - Sorting queries  
  - Sorting output > table  
  - Création feuille sheets  
  - Add datas  
  - Filter queries  
  - Loop Over Items1

- **Node Details:**

  - **Anthropic Chat Model**  
    - Type: `LangChain Anthropic Chat Model`  
    - Role: Runs an AI prompt instructing to filter out geolocalized queries (e.g., excluding queries containing city names) and to list queries with growth percentages.  
    - Model: Claude Sonnet 4  
    - Credential: Anthropic API key  
    - Input: JSON top 10 queries from Classing query  
    - Output: AI-filtered query data to Structured Output Parser  
    - Failure Modes: API limits, AI response parsing errors

  - **Structured Output Parser**  
    - Type: `LangChain Output Parser Structured`  
    - Role: Parses AI model response into structured JSON format with keys `query1`, `query2`, `query3`, each with [query, evolution].  
    - Input: AI raw output  
    - Output: Parsed structured data to "Sorting queries"

  - **Sorting queries**  
    - Type: `LangChain Chain LLM`  
    - Role: Processes structured data to finalize selection of queries and attach evolution data; the prompt is defined to ensure clarity.  
    - Input: Parsed output from Structured Output Parser  
    - Output: Final JSON object of queries and evolution to "Sorting output > table"

  - **Sorting output > table**  
    - Type: `Code`  
    - Role: Converts AI JSON output into a tabular array with columns: Query, Évolution, News (empty), Idée (empty).  
    - Output: Structured array for Google Sheets input  
    - Failure Modes: Code errors if unexpected data structure

  - **Création feuille sheets (Create Sheet)**  
    - Type: `Google Sheets`  
    - Role: Creates a new sheet named with last month's month name + topic name inside the tracking Google Sheets document.  
    - Input: Triggered after sorting output  
    - Credentials: Google Sheets OAuth2  
    - Failure Modes: Permission errors, sheet name conflicts

  - **Add datas**  
    - Type: `Google Sheets`  
    - Role: Appends the tabular query data to the newly created sheet, setting up columns for query, evolution, etc.  
    - Input: Output of Sorting output > table and sheet name from Création feuille sheets  
    - Failure Modes: Write permission errors, data mapping issues

  - **Filter queries**  
    - Type: `Set`  
    - Role: Prepares the filtered queries for the next loop, passing only the Query field onwards.  
    - Input: Added data confirmation  
    - Output: To "Loop Over Items1" for subsequent news search  
    - Failure Modes: None significant

  - **Loop Over Items1**  
    - Type: `SplitInBatches`  
    - Role: Iterates over filtered queries to process news searches one-by-one.  
    - Failure Modes: Batch configuration issues

---

#### 1.4 Google News Article Collection

- **Overview:** For each filtered trending query, fetch the top news articles via Google News search and extract the URLs of the top 3 articles.
- **Nodes Involved:**  
  - Search GNews  
  - Return URL only  
  - Loop Over Items2

- **Node Details:**

  - **Search GNews**  
    - Type: `SerpAPI (Google News)`  
    - Role: Queries Google News API with the given query, restricted to France and French language.  
    - Input: Single query from Loop Over Items1  
    - Credentials: SerpAPI account  
    - Output: Raw news results JSON to "Return URL only"  
    - Failure Modes: API limits, no news results

  - **Return URL only**  
    - Type: `Code`  
    - Role: Extracts the top 3 news article URLs from the Google News search results, sorting by position to ensure relevance. Returns only URLs in output.  
    - Input: Search GNews JSON data  
    - Output: List of URLs to Loop Over Items2 for scraping  
    - Failure Modes: Missing news_results field, less than 3 articles returned

  - **Loop Over Items2**  
    - Type: `SplitInBatches`  
    - Role: Iterates over each article URL for scraping and aggregation.  
    - Outputs: One branch to "Compile datas" and one branch to "Scrape articles" for parallel processing.

---

#### 1.5 Article Scraping and Content Analysis

- **Overview:** Scrapes full content of 3 news articles per query using Firecrawl, aggregates them, and uses AI to generate 3 SEO blog post ideas with keywords based on the article content.
- **Nodes Involved:**  
  - Scrape articles  
  - Compile datas  
  - Anthropic Chat Model1  
  - Article analysis

- **Node Details:**

  - **Scrape articles**  
    - Type: `Firecrawl`  
    - Role: Scrapes full article content from each URL provided by "Return URL only."  
    - Credentials: Firecrawl API key  
    - Input: URLs from Loop Over Items2  
    - Output: Article content data to "Compile datas"  
    - Failure Modes: Scraping failures, invalid URL, rate limiting

  - **Compile datas**  
    - Type: `Aggregate`  
    - Role: Aggregates all scraped article data for a single query into one combined dataset for analysis.  
    - Input: Multiple article scrape outputs  
    - Output: Aggregated data to AI model for analysis  
    - Failure Modes: Missing data, aggregation errors

  - **Anthropic Chat Model1**  
    - Type: `LangChain Anthropic Chat Model`  
    - Role: Receives scraped article markdown contents and prompts AI to generate 3 SEO blog post ideas with associated keywords for the given query.  
    - Model: Claude Sonnet 4  
    - Input: Aggregated article content  
    - Output: Text with blog ideas to "Article analysis" node  
    - Failure Modes: API failures, prompt misinterpretation

  - **Article analysis**  
    - Type: `LangChain Chain LLM`  
    - Role: Final AI step formatting the blog ideas response, dropping intros/outros, and focusing on raw suggestions.  
    - Input: AI raw output  
    - Output: Clean blog ideas text to "Add article datas"  
    - Failure Modes: Parsing errors

---

#### 1.6 Results Compilation and Storage

- **Overview:** Updates the Google Sheet by adding news article links and AI-generated blog ideas to the corresponding rows for each query and topic.
- **Nodes Involved:**  
  - Add article datas  
  - Loop Over Items (cycle back)

- **Node Details:**

  - **Add article datas**  
    - Type: `Google Sheets`  
    - Role: Updates existing rows in the monthly topic sheet, filling in columns "News" with top 3 article URLs, and "Idée" with AI-generated blog ideas for each query.  
    - Input: Blog ideas text, news links, and query identifier  
    - Credentials: Google Sheets OAuth2  
    - Output: Passes control back to "Loop Over Items" for next topic iteration  
    - Failure Modes: Sheet update permission issues, row matching errors

---

### 3. Summary Table

| Node Name             | Node Type                          | Functional Role                                  | Input Node(s)          | Output Node(s)          | Sticky Note                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|-----------------------|----------------------------------|-------------------------------------------------|------------------------|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Schedule Trigger       | Schedule Trigger                 | Monthly automatic workflow start                  | None                   | Get Query                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Get Query             | Google Sheets                   | Fetch monitoring topics from Google Sheet        | Schedule Trigger        | Loop Over Items          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Loop Over Items        | SplitInBatches                  | Iterate over each topic for trend processing     | Get Query               | Search trend (branch 1), Loop Over Items (branch 2) |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Search trend           | SerpAPI (Google Trends)          | Retrieve related queries for each topic           | Loop Over Items          | Classing query           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Classing query         | Code                            | Parse and rank related queries into top 10       | Search trend             | Anthropic Chat Model     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Anthropic Chat Model   | LangChain Anthropic Chat Model  | AI filters non-geolocalized queries with growth  | Classing query           | Structured Output Parser |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Structured Output Parser| LangChain Output Parser          | Parses AI response into structured JSON           | Anthropic Chat Model     | Sorting queries          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Sorting queries        | LangChain Chain LLM             | Finalizes filtered queries with growth data      | Structured Output Parser | Sorting output > table   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Sorting output > table | Code                            | Converts AI JSON output to tabular data           | Sorting queries          | Création feuille sheets, Add datas |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Création feuille sheets| Google Sheets                   | Create monthly sheet named by month and topic    | Sorting output > table   |                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Add datas              | Google Sheets                   | Append query data to new sheet                    | Sorting output > table   | Filter queries           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Filter queries         | Set                             | Prepare filtered queries for news search         | Add datas                | Loop Over Items1         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Loop Over Items1       | SplitInBatches                  | Iterate over filtered queries for news search    | Filter queries           | Search GNews             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Search GNews           | SerpAPI (Google News)           | Retrieve news articles for each query             | Loop Over Items1         | Return URL only          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Return URL only        | Code                            | Extract top 3 news article URLs                   | Search GNews             | Loop Over Items2         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Loop Over Items2       | SplitInBatches                  | Iterate over article URLs for scraping and aggregation | Return URL only       | Compile datas, Scrape articles |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Scrape articles        | Firecrawl                      | Scrape full content of news articles              | Loop Over Items2         |                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Compile datas          | Aggregate                      | Aggregate scraped article data                     | Loop Over Items2         | Anthropic Chat Model1    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Anthropic Chat Model1  | LangChain Anthropic Chat Model | Generate blog post ideas & keywords from content  | Compile datas            | Article analysis         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Article analysis       | LangChain Chain LLM             | Format AI blog ideas response                      | Anthropic Chat Model1    | Add article datas        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Add article datas      | Google Sheets                   | Update sheet rows with news links and blog ideas | Article analysis         | Loop Over Items          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Sticky Note1           | Sticky Note                    | Detailed workflow documentation, instructions, and context | Covers whole workflow   |                         | # Automated trend monitoring for content strategy\n\n## Who's it for\nContent creators, marketers, and social media managers who want to stay ahead of emerging trends and generate relevant content ideas based on data-driven insights.\n\n## What it does\nThis workflow automatically identifies trending topics related to your industry, collects recent news articles about these trends, and generates content suggestions. It transforms raw trend data into actionable editorial opportunities by analyzing search volume growth and current news coverage.\n\n## How it works\nThe workflow follows a three-step automation process:\n\nTrend Analysis: Examines searches related to your topics and identifies those with the strongest recent growth\nArticle Collection: Searches Google News for current articles about emerging trends and scrapes their full content\nContent Generation: Creates personalized content suggestions based on collected articles and trend data\n\nThe system automatically excludes geo-localized searches to provide a global perspective on trends, though this can be customized.\n\n## Requirements\n\nSerpAPI account (for trend and news data)\nFirecrawl API key (for scraping article content from Google News results)\nGoogle Sheets access\nAI model API key (for content analysis and recommendations - you can use any LLM provider you prefer)\n\n## How to set up\n### Step 1: Prepare your tracking sheet\nDuplicate this [Google Sheets template ](https://docs.google.com/spreadsheets/d/1z7iP_i98PT9BQuUypAi0c3NHkdhREEPJWkDjyj8Snfw)\nRename your copy and ensure it's accessible\n\n### Step 2: Configure API credentials\nBefore running the workflow, set up the following credentials in n8n:\n\nSerpAPI: For trend analysis and Google News search\nFirecrawl API: For scraping article content\nAI Model API: For content analysis and recommendations (Anthropic Claude, OpenAI GPT, or any other LLM provider)\nGoogle Sheets OAuth2: For accessing and updating your tracking spreadsheet\n\n### Step 3: Configure the workflow\nIn the \"Get Query\" node, paste your duplicated Google Sheets URL in the \"Document\" field\nIn your Google Sheet \"Query\" tab, enter the topics you want to monitor\n\n### Step 4: Customize language and location settings\nThe workflow is currently configured for French content and France location. You can modify these settings in the SerpAPI nodes:\n\nLanguage (hl): Change from \"fr\" to your preferred language code\nGeographic location (geo/gl): Change from \"FR\" to your target country code\nDate range: Currently set to \"today 1-m\" (last month) but can be adjusted\n\n### Step 5: Adjust filtering (optional)\nThe \"Sorting Queries\" node excludes geo-localized queries by default. You can modify the AI agent's instructions to include location-specific queries or change filtering criteria based on your requirements.\n### Step 6: Configure scheduling (optional)\nThe workflow includes an automated scheduler that runs monthly (1st day of each month at 8 AM). You can modify the cron expression 0 8 1 * * in the Schedule Trigger node to change:\n\nFrequency (daily, weekly, monthly)\nTime of execution\nDay of the month\n\n## How to customize the workflow\n\nChange trend count: The workflow processes up to 10 related queries per topic but filters them through AI to select the most relevant non-geolocalized ones\nAdjust article collection: Currently collects exactly 3 news articles per query for analysis\nContent style: Customize the AI prompts in content generation nodes to match your brand voice\nOutput format: Modify the Google Sheets structure to include additional data points\nAI model: Replace the Anthropic model with your preferred LLM provider\nScraping options: Configure Firecrawl settings to extract specific content elements from articles\n\n## Results interpretation\n\nFor each monitored topic, the workflow generates a separate sheet named by month and topic (e.g., \"January Digital Marketing\") containing:\nData structure (four columns):\n\nQuery: The trending search term ranked by growth\nÉvolution: Growth percentage over the last month\nNews: Links to 3 relevant news articles\nIdée: AI-generated content suggestions based on comprehensive article analysis\n\nThe workflow provides monthly retrospective analysis, helping you identify emerging topics before competitors and optimize your content calendar with high-potential subjects.\n\n## Workflow limitations\n\nProcesses up to 10 related queries per topic with AI filtering\nCollects exactly 3 news articles per query\nResults are automatically organized in monthly sheets\nRequires stable internet connection for API calls |

---

### 4. Reproducing the Workflow from Scratch

**Step 1: Create a new workflow and add a Schedule Trigger node**  
- Type: Schedule Trigger  
- Configuration: Set cron expression to `0 8 1 * *` (runs monthly on the 1st day at 8 AM)

**Step 2: Add a Google Sheets node named "Get Query" to fetch monitoring topics**  
- Operation: Read rows  
- Sheet name: "Query"  
- Document: Paste the URL of your duplicated Google Sheet (from the provided template)  
- Credentials: Set Google Sheets OAuth2 credentials  
- Connect Schedule Trigger main output to this node

**Step 3: Add a SplitInBatches node "Loop Over Items"**  
- Purpose: Process each topic individually  
- Connect output of "Get Query" to this node

**Step 4: Add a SerpAPI node "Search trend" to query Google Trends**  
- Operation: `google_trends`  
- Query: `={{ $json.Query }}` (from current batch item)  
- Parameters:  
  - Language (`hl`): "fr" (or your choice)  
  - Geo (`geo`): "FR" (or your choice)  
  - Date: "today 1-m" (last month)  
  - Data type: "RELATED_QUERIES"  
- Credentials: SerpAPI account  
- Connect "Loop Over Items" output to this node

**Step 5: Add a Code node "Classing query" to parse and rank queries**  
- Paste the provided JavaScript code to extract "top" and "rising" related queries, sort by extracted_value, and keep top 10  
- Connect output of "Search trend" to this node

**Step 6: Add an Anthropic Chat Model node (Claude) "Anthropic Chat Model"**  
- Model: Claude Sonnet 4  
- Prompt: Instruct to filter out geolocalized queries and list queries with their evolution percentages (use prompt similar to provided)  
- Credentials: Anthropic API key  
- Connect "Classing query" output to this node

**Step 7: Add LangChain Output Parser Structured node "Structured Output Parser"**  
- JSON schema example defines keys query1, query2, query3 as arrays of [query, evolution]  
- Connect output of Anthropic Chat Model to this node

**Step 8: Add LangChain Chain LLM node "Sorting queries"**  
- Use prompt to finalize filtered queries with evolution data  
- Connect output of Structured Output Parser to this node

**Step 9: Add a Code node "Sorting output > table"**  
- JavaScript to convert AI JSON output into a list with columns: Query, Évolution, News (empty), Idée (empty)  
- Connect output of "Sorting queries" to this node

**Step 10: Add Google Sheets node "Création feuille sheets" to create new monthly sheet**  
- Operation: Create sheet  
- Title: Construct dynamically using last month’s name + current topic (use JavaScript expression)  
- Document: Same Google Sheet URL  
- Credentials: Google Sheets OAuth2  
- Connect output of "Sorting output > table" to this node

**Step 11: Add Google Sheets node "Add datas" to append query data**  
- Operation: Append rows  
- Sheet Name: Same as created sheet  
- Document: Same Google Sheet URL  
- Map columns automatically from input data  
- Credentials: Google Sheets OAuth2  
- Connect output of "Sorting output > table" also to this node (parallel connection)

**Step 12: Add Set node "Filter queries"**  
- Include only the Query field, pass forward  
- Connect output of "Add datas" to this node

**Step 13: Add SplitInBatches node "Loop Over Items1"**  
- Iterate over filtered queries for news search  
- Connect output of "Filter queries" to this node

**Step 14: Add SerpAPI node "Search GNews"**  
- Operation: `google_news`  
- Query: `={{ $json.Query }}` (from batch)  
- Parameters: Language "fr", Geo "fr"  
- Credentials: SerpAPI account  
- Connect output of "Loop Over Items1" to this node

**Step 15: Add Code node "Return URL only"**  
- JS to extract top 3 news article URLs sorted by position  
- Connect output of "Search GNews" to this node

**Step 16: Add SplitInBatches node "Loop Over Items2"**  
- Iterate over article URLs for scraping and aggregation  
- Connect output of "Return URL only" to this node

**Step 17: Add Firecrawl node "Scrape articles"**  
- Operation: Scrape content from URL `={{ $json.link }}`  
- Credentials: Firecrawl API key  
- Connect output of "Loop Over Items2" to this node

**Step 18: Add Aggregate node "Compile datas"**  
- Aggregate article content for each query  
- Connect output of "Loop Over Items2" (parallel branch) to this node

**Step 19: Add Anthropic Chat Model node "Anthropic Chat Model1"**  
- Model: Claude Sonnet 4  
- Prompt: Provide markdown content of 3 articles, ask for 3 blog post ideas with keywords (no intro/outro)  
- Credentials: Anthropic API key  
- Connect output of "Compile datas" to this node

**Step 20: Add LangChain Chain LLM node "Article analysis"**  
- Format AI blog ideas text output  
- Connect output of "Anthropic Chat Model1" to this node

**Step 21: Add Google Sheets node "Add article datas"**  
- Operation: Update rows in monthly sheet by matching Query field  
- Update columns News (3 URLs concatenated) and Idée (AI blog ideas)  
- Credentials: Google Sheets OAuth2  
- Connect output of "Article analysis" to this node

**Step 22: Connect "Add article datas" output back to "Loop Over Items"**  
- Closes the processing loop for all topics

**Step 23: Add Sticky Note "Sticky Note1"**  
- Paste the detailed workflow explanation and instructions for users and maintainers  
- Position anywhere useful for documentation within the workflow editor

---

### 5. General Notes & Resources

| Note Content                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Context or Link                                                                                                                                                                                                                     |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| This workflow is designed for monthly automated trend monitoring and content strategy generation, ideal for marketers and content creators seeking data-driven insights. It requires accounts for SerpAPI, Firecrawl, Google Sheets OAuth2, and an AI model provider (Anthropic Claude recommended). The workflow excludes geo-localized queries by default but is customizable. It processes up to 10 related queries per topic and collects exactly 3 news articles per query for content analysis. The output is organized into monthly sheets named by month and topic, including columns for Query, Evolution, News links, and AI-generated content ideas. | Full documentation embedded within "Sticky Note1" inside the workflow. Template Google Sheet: https://docs.google.com/spreadsheets/d/1z7iP_i98PT9BQuUypAi0c3NHkdhREEPJWkDjyj8Snfw                                               |
| For API credentials setup: SerpAPI (trend and news), Firecrawl (scraping), Google Sheets OAuth2 (sheet access), and Anthropic API (or other LLM) are needed. Adjust language and geo parameters in SerpAPI nodes to target other regions or languages. The scheduling can be modified via cron expression in the Schedule Trigger node.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Credential setup instructions are also included in "Sticky Note1".                                                                                                                                                             |
| The AI prompts can be customized to suit brand voice and output format preferences. Firecrawl scraping settings can be tailored to extract specific article elements if needed. The workflow is robust to handle missing data gracefully but requires stable internet and API access.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Guidance on customization and potential failure points provided in workflow comments and embedded notes.                                                                                                                    |

---

**Disclaimer:**  
The text provided originates exclusively from an automated workflow created with n8n, a tool for integration and automation. This processing strictly complies with applicable content policies and contains no illegal, offensive, or protected elements. All data handled is legal and public.