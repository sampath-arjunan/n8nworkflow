Automate Blog Engagement with GPT-5 Generated Comments for WordPress

https://n8nworkflows.xyz/workflows/automate-blog-engagement-with-gpt-5-generated-comments-for-wordpress-7580


# Automate Blog Engagement with GPT-5 Generated Comments for WordPress

---

### 1. Workflow Overview

This workflow automates engagement on a WordPress blog by generating and posting AI-crafted comments on published articles. It targets blog owners or marketers seeking to enhance interaction and social proof through natural, relevant comments generated by GPT-5.

The workflow logic is organized into the following blocks:

- **1.1 Input Trigger**: Manual initiation to start the comment generation cycle.
- **1.2 Article Retrieval**: Fetches published articles from WordPress via REST API.
- **1.3 Prompt Construction**: Builds tailored prompts using article metadata for AI comment generation.
- **1.4 AI Comment Generation**: Uses GPT-5 to create a short, natural-sounding comment.
- **1.5 AI Output Extraction**: Extracts the generated comment text from the AI response.
- **1.6 Comment Posting**: Submits the generated comment back to WordPress under the corresponding article.

---

### 2. Block-by-Block Analysis

#### 1.1 Input Trigger

- **Overview:**  
  Initiates the workflow manually, allowing controlled execution rather than automatic or scheduled runs.

- **Nodes Involved:**  
  - When clicking ‘Execute workflow’

- **Node Details:**  
  - **Type:** Manual Trigger  
  - **Role:** Starts the workflow on user command.  
  - **Configuration:** Default manual trigger without parameters.  
  - **Input:** None  
  - **Output:** Triggers the next node to fetch articles.  
  - **Edge Cases:** None specific, except no execution occurs unless manually started.

---

#### 1.2 Article Retrieval

- **Overview:**  
  Retrieves up to 100 published WordPress blog posts with specific fields via REST API for comment generation.

- **Nodes Involved:**  
  - Fetch Articles from WordPress

- **Node Details:**  
  - **Type:** HTTP Request  
  - **Role:** Calls WordPress REST API to get published posts with fields: id, title, excerpt, content, link, comment_status.  
  - **Configuration Choices:**  
    - URL: `https://example.com/wp-json/wp/v2/posts?per_page=100&status=publish&_fields=id,title,excerpt,content,link,comment_status`  
    - Authentication: HTTP Basic Auth with API key credential  
    - Batch Size: 25, with max 5 retries and 2 seconds wait between tries  
    - Timeout: 60 seconds  
  - **Key Variables:** None on input; outputs JSON array of articles.  
  - **Input:** Trigger from manual node  
  - **Output:** List of articles, each with metadata used downstream.  
  - **Edge Cases:**  
    - API authentication failure (invalid credentials)  
    - Timeout or rate limiting by WordPress  
    - Empty result if no published posts  
    - Partial data if fields missing in API response  
  - **Version Requirements:** n8n HTTP Request node v4.2 or higher recommended due to batching and retry options.

---

#### 1.3 Prompt Construction

- **Overview:**  
  Constructs a specific prompt for GPT-5 using each article’s title and excerpt/content to generate a relevant, natural comment.

- **Nodes Involved:**  
  - Build Article Comment Prompt

- **Node Details:**  
  - **Type:** Set Node  
  - **Role:** Creates a `prompt` string for the AI input by processing article data.  
  - **Configuration:**  
    - Template prompt includes: article title, a sanitized 300-character summary from excerpt or content (HTML tags removed, whitespace trimmed), and comment style instructions (tone, length, positivity, keyword usage).  
    - Uses JavaScript expressions to clean and slice content.  
  - **Key Expressions:**  
    - Extracts and cleans excerpt/rendered HTML content via regex replacement and whitespace normalization.  
    - Constructs multi-line prompt with formatting for AI.  
  - **Input:** Article JSON from previous HTTP Request  
  - **Output:** JSON with new field `prompt` per article.  
  - **Edge Cases:**  
    - Missing excerpt and content fields fallback gracefully to empty string.  
    - Very short or malformed article content may produce incomplete prompts.  
  - **Version:** Set node v3.4 or higher for advanced expression support.

---

#### 1.4 AI Comment Generation

- **Overview:**  
  Sends the custom prompt to GPT-5 to generate a short, conversational comment relevant to the article.

- **Nodes Involved:**  
  - Generate Article Comment (AI)

- **Node Details:**  
  - **Type:** OpenAI Node (Langchain integration)  
  - **Role:** Invokes GPT-5 model to generate comment text based on prompt.  
  - **Configuration:**  
    - Model: GPT-5 (configured as a list mode with cache for efficiency)  
    - Input: prompt message constructed in prior node  
    - Retry on failure: enabled with 2 seconds wait, max retries 5  
  - **Key Expressions:**  
    - Uses `{{$json.prompt}}` to pass prompt string as message content.  
  - **Input:** JSON with prompt string  
  - **Output:** AI response JSON including message content or choices array  
  - **Edge Cases:**  
    - API key invalid or quota exceeded  
    - Timeout or API errors  
    - Unexpected or empty AI response content  
  - **Version:** Node version 1.8+ supporting GPT-5 model and retry logic.

---

#### 1.5 AI Output Extraction

- **Overview:**  
  Extracts the generated comment text from the AI response JSON for posting.

- **Nodes Involved:**  
  - Extract AI Output1

- **Node Details:**  
  - **Type:** Set Node  
  - **Role:** Maps AI response content to a simple `comment` string field.  
  - **Configuration:**  
    - Uses expressions to extract content from multiple possible locations in response JSON, ensuring fallback if some fields are missing.  
  - **Key Expressions:**  
    - `{{$json.message?.content || $json.choices?.[0]?.message?.content || $json.content}}`  
  - **Input:** AI response JSON from previous node  
  - **Output:** JSON object with `comment` field  
  - **Edge Cases:**  
    - AI response structure may vary; fallback ensures best-effort extraction.  
    - Empty or null comments handled as empty string by expression.  
  - **Version:** Set node v3.4+ required for optional chaining in expressions.

---

#### 1.6 Comment Posting

- **Overview:**  
  Posts the generated comment back to the corresponding WordPress article using REST API with randomized author details.

- **Nodes Involved:**  
  - Post Comment to Article

- **Node Details:**  
  - **Type:** HTTP Request  
  - **Role:** Sends POST request to WordPress comments endpoint to create a new comment.  
  - **Configuration:**  
    - URL: `https://example.com/wp-json/wp/v2/comments`  
    - Method: POST  
    - Authentication: HTTP Basic Auth using same credential as article fetch  
    - Body Parameters:  
      - `post`: article ID from original article fetch node  
      - `content`: AI generated comment from extraction node  
      - `author_name`: randomly generated human-like name from predefined first and last name arrays, combined via JavaScript function expression  
      - `author_email`: generated guest email using article ID and timestamp for uniqueness  
    - Retry: max 5 retries, 2 seconds wait  
    - Timeout: 60 seconds  
  - **Key Expressions:**  
    - Random author name generation using array sampling in JS expression  
    - Email formatted as `guest+post{article_id}-{timestamp}@example.com`  
  - **Input:**  
    - Article ID from articles node  
    - Comment from AI output node  
  - **Output:** HTTP response from WordPress API confirming comment creation  
  - **Edge Cases:**  
    - API authentication failure or insufficient permissions  
    - Comment rejected due to spam filters, closed comments, or validation errors  
    - Network timeouts or rate limits  
  - **Version:** HTTP Request node v4.2+ for retry and batching features.

---

### 3. Summary Table

| Node Name                   | Node Type                 | Functional Role                              | Input Node(s)                 | Output Node(s)              | Sticky Note                                                                                          |
|-----------------------------|---------------------------|----------------------------------------------|------------------------------|-----------------------------|----------------------------------------------------------------------------------------------------|
| When clicking ‘Execute workflow’ | Manual Trigger             | Initiates the workflow manually               | None                         | Fetch Articles from WordPress |                                                                                                    |
| Fetch Articles from WordPress | HTTP Request              | Retrieves published WordPress posts           | When clicking ‘Execute workflow’ | Build Article Comment Prompt  |                                                                                                    |
| Build Article Comment Prompt  | Set                       | Constructs GPT-5 prompt per article            | Fetch Articles from WordPress  | Generate Article Comment (AI) |                                                                                                    |
| Generate Article Comment (AI) | OpenAI (Langchain)        | Generates AI comment using GPT-5                | Build Article Comment Prompt   | Extract AI Output1           |                                                                                                    |
| Extract AI Output1            | Set                       | Extracts generated comment text from AI response | Generate Article Comment (AI)  | Post Comment to Article       |                                                                                                    |
| Post Comment to Article       | HTTP Request              | Posts AI comment to WordPress article           | Extract AI Output1            | None                        |                                                                                                    |
| Sticky Note1                 | Sticky Note               | Describes workflow purpose and logic           | None                         | None                        | ## Article AI Comment Generator\n\nThis workflow uses AI to generate relevant, natural-sounding comments for blog posts. It retrieves articles via the WordPress REST API, builds a prompt from the post content, and posts the AI-generated comment back to the site.\n |

---

### 4. Reproducing the Workflow from Scratch

1. **Create Manual Trigger Node**  
   - Name: `When clicking ‘Execute workflow’`  
   - Type: Manual Trigger  
   - No configuration needed.

2. **Create HTTP Request Node to Fetch Articles**  
   - Name: `Fetch Articles from WordPress`  
   - Type: HTTP Request  
   - URL: `https://example.com/wp-json/wp/v2/posts?per_page=100&status=publish&_fields=id,title,excerpt,content,link,comment_status`  
   - Method: GET (default)  
   - Authentication: HTTP Basic Auth (create credential with API key)  
   - Options:  
     - Timeout: 60000 ms  
     - Enable Batching: Set batch size 25  
   - Retry: Enable with max 5 retries, 2000 ms wait between tries  
   - Connect output of Manual Trigger to this node.

3. **Create Set Node to Build Prompt**  
   - Name: `Build Article Comment Prompt`  
   - Type: Set  
   - Add new field `prompt` (String) with the following expression:  
     ```
     =={{ `For the article “${$json.title?.rendered || ''}”, write a short, natural comment (1 sentence) that is relevant. 
     Summary: ${(($json.excerpt?.rendered || $json.content?.rendered || '')
       .replace(/<[^>]+>/g,' ')
       .replace(/\s+/g,' ')
       .trim()).slice(0,300)}` }}
     Comment characteristics:
     - If possible, use the article's keyword in the comment
     - Some positive, some neutral
     - Conversational tone, not formal
     - Some short, some long
     ```  
   - Connect output of Fetch Articles node to this node.

4. **Create OpenAI Node for Comment Generation**  
   - Name: `Generate Article Comment (AI)`  
   - Type: OpenAI (Langchain integration)  
   - Model: Select GPT-5 from available models  
   - Input Messages: Single message with content: `=={{$json.prompt}}`  
   - Authentication: Provide OpenAI API credentials  
   - Retry: Enable with max 5 retries, 2000 ms wait  
   - Connect output of Set node (Build Article Comment Prompt) to this node.

5. **Create Set Node to Extract AI Output**  
   - Name: `Extract AI Output1`  
   - Type: Set  
   - Add new field `comment` (String) with expression:  
     `={{$json.message?.content || $json.choices?.[0]?.message?.content || $json.content}}`  
   - Connect output of AI node to this node.

6. **Create HTTP Request Node to Post Comment**  
   - Name: `Post Comment to Article`  
   - Type: HTTP Request  
   - URL: `https://example.com/wp-json/wp/v2/comments`  
   - Method: POST  
   - Body Parameters (x-www-form-urlencoded or JSON):  
     - `post`: `={{ $('Fetch Articles from WordPress').item.json.id }}`  
     - `content`: `={{ $('Generate Article Comment (AI)').item.json.message.content }}`  
     - `author_name`: Use JavaScript expression to generate random name:  
       ```
       ={{ (() => {
         const first = ['John','Emily','Michael','Sophia','David','Olivia','Daniel','Ava','James','Isabella','Ethan','Mia','William','Charlotte','Benjamin','Amelia','Alexander','Harper','Lucas','Ella'];
         const last  = ['Smith','Johnson','Williams','Brown','Jones','Garcia','Miller','Davis','Rodriguez','Martinez','Hernandez','Lopez','Gonzalez','Wilson','Anderson','Thomas','Taylor','Moore','Jackson','Martin'];
         return `${first[Math.floor(Math.random()*first.length)]} ${last[Math.floor(Math.random()*last.length)]}`;
       })() }}
       ```  
     - `author_email`:  
       ```
       ={{ `guest+post${$items("Fetch Articles from WordPress")[$itemIndex()].json.id}-${Date.now()%100000}@example.com`.toLowerCase() }}
       ```  
   - Authentication: HTTP Basic Auth (reuse credential from fetch node)  
   - Retry: Enable with max 5 retries, 2000 ms wait  
   - Timeout: 60000 ms  
   - Connect output of Extract AI Output node to this node.

7. **Add Sticky Note**  
   - Content:  
     ```
     ## Article AI Comment Generator

     This workflow uses AI to generate relevant, natural-sounding comments for blog posts. It retrieves articles via the WordPress REST API, builds a prompt from the post content, and posts the AI-generated comment back to the site.
     ```  
   - Place to the left/top to describe workflow purpose.

8. **Connect nodes in sequence:**  
   Manual Trigger → Fetch Articles → Build Prompt → Generate AI Comment → Extract AI Output → Post Comment

9. **Verify credentials:**  
   - Create and configure HTTP Basic Auth credential with WordPress API key.  
   - Create and configure OpenAI API credential with valid GPT-5 access.

10. **Test workflow:**  
    - Execute manually and monitor logs for errors or API responses.  
    - Adjust prompt or retry settings as needed.

---

### 5. General Notes & Resources

| Note Content                                                                                                                                              | Context or Link                                 |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
| This workflow leverages GPT-5 via Langchain integration in n8n, enabling advanced AI text generation capabilities for content automation.                 | n8n OpenAI documentation                        |
| WordPress REST API endpoints used: `/wp-json/wp/v2/posts` for fetching posts, `/wp-json/wp/v2/comments` for posting comments.                             | WordPress REST API documentation                |
| Randomized author names and emails help simulate human-like commenters, reducing spam detection risk.                                                     | Custom JavaScript expressions in Set node      |
| Ensure WordPress user permissions and API keys allow comment creation via REST API.                                                                       | WordPress user roles and API settings           |
| The workflow uses batching and retry mechanisms to increase robustness against API rate limits and transient failures.                                    | n8n HTTP Request node features                   |
| Sticky notes in the workflow provide an overview and contextual guidance on the workflow’s purpose and structure.                                         | Visible in workflow editor                       |

---

**Disclaimer:** The text provided originates exclusively from an automated workflow created with n8n, a tool for integration and automation. This processing strictly adheres to current content policies and contains no illegal, offensive, or protected elements. All manipulated data is legal and public.

---