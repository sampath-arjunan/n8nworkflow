{"id":"CubaJ5d4CagwtJPK","meta":{"instanceId":"b023674627c58980fb6714426453392ba62def288b4513c7739228bcf5ecfb50"},"name":"Generate merchandise proposals and market research from NASA APOD","tags":[],"nodes":[{"id":"e20eca6f-a79d-4026-b083-604ace3bd460","name":"Sticky Note 1","type":"n8n-nodes-base.stickyNote","position":[608,1120],"parameters":{"color":7,"width":320,"height":180,"content":"### 1. Sourcing & Design\nFetch the daily image, generate relevant keywords using AI, and create a visual mockup of the product."},"typeVersion":1},{"id":"175a2616-ef7f-429b-99bb-8f169af34cbd","name":"Sticky Note 2","type":"n8n-nodes-base.stickyNote","position":[1280,1040],"parameters":{"color":7,"width":320,"height":180,"content":"### 2. Market Research\nSearch Etsy for similar products to determine average market price and calculate potential profit margins."},"typeVersion":1},{"id":"2ec53e3b-add6-4cd4-ae47-9180823275d4","name":"Sticky Note 3","type":"n8n-nodes-base.stickyNote","position":[1952,1152],"parameters":{"color":7,"width":340,"height":180,"content":"### 3. Analysis & Approval\nAI analyzes the data to provide marketing advice. A Slack message is sent to the user for a Go/No-Go decision."},"typeVersion":1},{"id":"9d05f1b7-6086-4153-86b2-ee401b636341","name":"Sticky Note 4","type":"n8n-nodes-base.stickyNote","position":[2992,1152],"parameters":{"color":7,"width":340,"height":180,"content":"### 4. Asset Storage\nIf approved, the high-quality image is saved to Google Drive and the product metadata is logged in Notion."},"typeVersion":1},{"id":"a8cbc6ad-fddd-4434-b090-86512ad6c3e8","name":"Schedule Trigger1","type":"n8n-nodes-base.scheduleTrigger","position":[288,1360],"parameters":{"rule":{"interval":[{"triggerAtHour":8}]}},"typeVersion":1.2},{"id":"7c60d1eb-5e88-473f-85c4-c22058f29b47","name":"Workflow Configuration1","type":"n8n-nodes-base.set","position":[512,1360],"parameters":{"options":{},"assignments":{"assignments":[{"id":"id-1","name":"cloudinaryCloudName","type":"string","value":"<__PLACEHOLDER_VALUE__Your Cloudinary Cloud Name__>"},{"id":"id-2","name":"cloudinaryApiKey","type":"string","value":"<__PLACEHOLDER_VALUE__Your Cloudinary API Key__>"},{"id":"id-3","name":"tshirtPublicId","type":"string","value":"white_tshirt_base"},{"id":"id-4","name":"productionCost","type":"number","value":15},{"id":"id-5","name":"minProfitThreshold","type":"number","value":5}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"bc7c3af4-c504-46f5-bbb1-787df6fc0206","name":"Get NASA APOD1","type":"n8n-nodes-base.nasa","position":[736,1360],"parameters":{"additionalFields":{}},"typeVersion":1},{"id":"a0641c2b-c8b9-4888-87fb-5b7e86899fbc","name":"Generate Keywords & Check Logo1","type":"@n8n/n8n-nodes-langchain.openAi","position":[960,1264],"parameters":{"operation":"message"},"typeVersion":2},{"id":"041b336a-4d40-4da8-850e-13053e89333d","name":"Create Mockup with Cloudinary1","type":"n8n-nodes-base.httpRequest","position":[1536,1456],"parameters":{"url":"=https://res.cloudinary.com/{{ $('Workflow Configuration1').first().json.cloudinaryCloudName }}/image/upload/l_fetch:{{ encodeURIComponent(Buffer.from($('Get NASA APOD1').first().json.url).toString('base64')) }},w_400,c_fit,g_center/{{ $('Workflow Configuration1').first().json.tshirtPublicId }}.jpg","options":{"response":{"response":{"responseFormat":"file"}}}},"typeVersion":4.3},{"id":"ce92f375-344e-4967-bf0e-0a8cf023d3c9","name":"Search Etsy Market1","type":"@apify/n8n-nodes-preview-apify.apify","position":[1312,1264],"parameters":{"resource":"Actors","operation":"Run actor"},"credentials":{},"typeVersion":1},{"id":"86e7c8ba-9671-45cd-af7d-eced37cde793","name":"Calculate Profit1","type":"n8n-nodes-base.code","position":[1536,1264],"parameters":{"jsCode":"const items = $input.all();\nlet totalPrice = 0;\nlet count = 0;\n\nitems.forEach(item => {\n  if (item.json.price) {\n    const price = parseFloat(item.json.price.toString().replace(/[^0-9.]/g, ''));\n    if (!isNaN(price) && price > 0) {\n      totalPrice += price;\n      count++;\n    }\n  }\n});\n\nconst avgPrice = count > 0 ? (totalPrice / count) : 0;\nconst productionCost = parseFloat($('Workflow Configuration1').first().json.productionCost);\nconst minProfit = parseFloat($('Workflow Configuration1').first().json.minProfitThreshold);\nconst profit = avgPrice - productionCost;\n\nreturn {\n  avg_price: avgPrice.toFixed(2),\n  profit: profit.toFixed(2),\n  is_profitable: profit >= minProfit,\n  production_cost: productionCost.toFixed(2),\n  competitor_count: count\n};"},"typeVersion":2},{"id":"ee9d3746-c226-4409-b5c5-fe255e17c452","name":"Merge Data1","type":"n8n-nodes-base.merge","position":[1760,1360],"parameters":{"mode":"combine","options":{},"combineBy":"combineAll"},"typeVersion":3.2},{"id":"661db403-235d-4c0e-a0db-854a4989518e","name":"AI Marketing Advisor1","type":"@n8n/n8n-nodes-langchain.openAi","position":[1984,1360],"parameters":{"operation":"message"},"typeVersion":2},{"id":"cb306cd3-c787-4e95-b42e-41da0b267e44","name":"Send Slack Proposal1","type":"n8n-nodes-base.slack","position":[2336,1360],"webhookId":"bc530c20-4d61-4b44-9375-38636e21bed2","parameters":{"text":"=üí∞ *Merch Candidate Found!*\n\n*Title:* {{ $('Get NASA APOD1').first().json.title }}\n*Keywords:* {{ $('Generate Keywords & Check Logo1').first().json.keywords }}\n*Has NASA Logo:* {{ $('Generate Keywords & Check Logo1').first().json.has_logo ? \"‚ö†Ô∏è Yes - Review needed\" : \"‚úÖ No\" }}\n\nüíµ *Market Data:*\n‚Ä¢ Average Price: ${{ $('Calculate Profit1').first().json.avg_price }}\n‚Ä¢ Production Cost: ${{ $('Calculate Profit1').first().json.production_cost }}\n‚Ä¢ Est. Profit: ${{ $('Calculate Profit1').first().json.profit }} / unit\n‚Ä¢ Competitors: {{ $('Calculate Profit1').first().json.competitor_count }}\n‚Ä¢ Profitable: {{ $('Calculate Profit1').first().json.is_profitable ? \"‚úÖ Yes\" : \"‚ùå No\" }}\n\nü§ñ *AI Advice:*\n{{ $('AI Marketing Advisor1').first().json.message.content }}\n\nüëï *Mockup Preview:* Check the file attachment\n\n*Save this design to your database?*","select":"channel","channelId":{"__rl":true,"mode":"id","value":"<__PLACEHOLDER_VALUE__Slack Channel ID__>"},"otherOptions":{}},"typeVersion":2.3},{"id":"93245811-8fcc-4e52-9999-1d9b88fe9e92","name":"Wait for User Decision1","type":"n8n-nodes-base.wait","position":[2560,1360],"webhookId":"830d2c1d-fa54-495d-aa58-e316ca51eedf","parameters":{"resume":"webhook","options":{"responseData":"={ \"status\": \"received\" }"}},"typeVersion":1.1},{"id":"d88663ff-6a2a-47ea-a712-9f9de787c03d","name":"Check User Decision1","type":"n8n-nodes-base.switch","position":[2784,1360],"parameters":{"rules":{"values":[{"conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"operator":{"type":"string","operation":"equals"},"leftValue":"={{ $json.action }}","rightValue":"save"}]}}]},"options":{"fallbackOutput":"none"}},"typeVersion":3.3},{"id":"ca658c19-68ff-4935-9c57-3dda6eac4bdb","name":"Download NASA Image1","type":"n8n-nodes-base.httpRequest","position":[3008,1360],"parameters":{"url":"={{ $('Get NASA APOD1').first().json.url }}","options":{"response":{"response":{"responseFormat":"file"}}}},"typeVersion":4.3},{"id":"211dc2b0-0f38-4264-a8c2-16d39ca3e4d4","name":"Save to Google Drive1","type":"n8n-nodes-base.googleDrive","position":[3232,1360],"parameters":{"name":"={{ $('Get NASA APOD1').first().json.title }}.jpg","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"options":{},"folderId":{"__rl":true,"mode":"id","value":"<__PLACEHOLDER_VALUE__Google Drive Folder ID__>"}},"typeVersion":3},{"id":"571868fe-b339-4279-b7e9-079837b568c7","name":"Save to Notion DB1","type":"n8n-nodes-base.notion","position":[3456,1360],"parameters":{"title":"={{ $('Get NASA APOD1').first().json.title }}","pageId":{"mode":"id","value":"<__PLACEHOLDER_VALUE__Notion Database ID__>"},"options":{}},"typeVersion":2.2},{"id":"60f1f178-6ef4-4767-9eef-0043807d5bce","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-224,1104],"parameters":{"width":462,"height":780,"content":"## Automate merchandise creation and market analysis from NASA APOD\n\nThis workflow streamlines the product development process for Print-on-Demand businesses by leveraging NASA's public domain images.\n\n### üöÄ What it does\n1. **Content Sourcing**: Fetches NASA's Astronomy Picture of the Day.\n2. **Product Design**: Generates a T-shirt mockup using Cloudinary.\n3. **Market Research**: Scrapes Etsy via Apify to analyze competitor pricing and calculates potential profit.\n4. **AI Analysis**: OpenAI generates SEO keywords and marketing advice.\n5. **Approval Loop**: Sends a detailed proposal to Slack.\n6. **Asset Management**: Upon approval, saves the image to Google Drive and the product details to Notion.\n\n### üõ†Ô∏è Setup\n1. **Configure Credentials**: Ensure you have credentials for NASA, OpenAI, Cloudinary, Apify, Slack, Google Drive, and Notion.\n2. **Set Variables**: Open the **Workflow Configuration** node and enter your specific details (Cloudinary keys, production costs, etc.).\n3. **Adjust IDs**: Update the Slack Channel ID, Google Drive Folder ID, and Notion Database ID in their respective nodes (marked with placeholders).\n\n### üìã Requirements\n- **Cloudinary**: For image transformations.\n- **Apify**: Uses the `dtrungtin/etsy-scraper` actor.\n- **OpenAI**: For text generation and analysis.\n- **Slack, Google Drive, Notion**: For communication and storage."},"typeVersion":1}],"active":false,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"236a4b9f-89c1-4d23-920a-f568b78995ae","connections":{"Merge Data1":{"main":[[{"node":"AI Marketing Advisor1","type":"main","index":0}]]},"Get NASA APOD1":{"main":[[{"node":"Generate Keywords & Check Logo1","type":"main","index":0},{"node":"Create Mockup with Cloudinary1","type":"main","index":0}]]},"Calculate Profit1":{"main":[[{"node":"Merge Data1","type":"main","index":0}]]},"Schedule Trigger1":{"main":[[{"node":"Workflow Configuration1","type":"main","index":0}]]},"Search Etsy Market1":{"main":[[{"node":"Calculate Profit1","type":"main","index":0}]]},"Check User Decision1":{"main":[[{"node":"Download NASA Image1","type":"main","index":0}]]},"Download NASA Image1":{"main":[[{"node":"Save to Google Drive1","type":"main","index":0}]]},"Send Slack Proposal1":{"main":[[{"node":"Wait for User Decision1","type":"main","index":0}]]},"AI Marketing Advisor1":{"main":[[{"node":"Send Slack Proposal1","type":"main","index":0}]]},"Save to Google Drive1":{"main":[[{"node":"Save to Notion DB1","type":"main","index":0}]]},"Wait for User Decision1":{"main":[[{"node":"Check User Decision1","type":"main","index":0}]]},"Workflow Configuration1":{"main":[[{"node":"Get NASA APOD1","type":"main","index":0}]]},"Create Mockup with Cloudinary1":{"main":[[{"node":"Merge Data1","type":"main","index":1}]]},"Generate Keywords & Check Logo1":{"main":[[{"node":"Search Etsy Market1","type":"main","index":0}]]}}}