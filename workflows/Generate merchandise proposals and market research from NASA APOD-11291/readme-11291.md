Generate merchandise proposals and market research from NASA APOD

https://n8nworkflows.xyz/workflows/generate-merchandise-proposals-and-market-research-from-nasa-apod-11291


# Generate merchandise proposals and market research from NASA APOD

---

### 1. Workflow Overview

This n8n workflow automates the creation and market analysis of merchandise ideas based on NASA‚Äôs Astronomy Picture of the Day (APOD). It is designed primarily for Print-on-Demand businesses to streamline product ideation, market validation, and asset management.

The workflow can be logically divided into four main blocks:

**1.1 Sourcing & Design**  
Fetches NASA‚Äôs daily APOD image, uses AI to generate relevant keywords and checks for NASA branding (logo), and creates a T-shirt mockup image using Cloudinary image transformations.

**1.2 Market Research**  
Scrapes Etsy for similar products using Apify‚Äôs Etsy scraper actor, analyzes competitor prices, calculates average price and potential profit margins against production costs.

**1.3 Analysis & Approval**  
Combines gathered data, uses AI to generate marketing advice, then sends a detailed proposal to a Slack channel. Waits for a user decision (Go/No-Go) sent back via Slack interaction.

**1.4 Asset Storage**  
If approved, downloads the original NASA image, saves it to Google Drive, and logs the product metadata in a Notion database.

---

### 2. Block-by-Block Analysis

---

#### 2.1 Sourcing & Design

**Overview:**  
This block sources the daily NASA APOD image, uses OpenAI to generate SEO keywords and detect any NASA logo presence, then creates a product mockup by overlaying the image on a T-shirt base using Cloudinary.

**Nodes Involved:**  
- Schedule Trigger1  
- Workflow Configuration1  
- Get NASA APOD1  
- Generate Keywords & Check Logo1  
- Create Mockup with Cloudinary1

**Node Details:**

- **Schedule Trigger1**  
  - *Type:* Schedule Trigger  
  - *Role:* Triggers the workflow daily at 08:00 AM automatically.  
  - *Config:* Interval trigger set to fire every day at hour 8.  
  - *Edge Cases:* Missed trigger if n8n is down; time zone considerations.  
  - *Connections:* Output ‚Üí Workflow Configuration1.

- **Workflow Configuration1**  
  - *Type:* Set  
  - *Role:* Stores configuration variables such as Cloudinary credentials, T-shirt base image ID, production cost, and profit threshold.  
  - *Config:* Placeholder values for Cloudinary cloud name and API key, T-shirt public ID ("white_tshirt_base"), production cost (15), and minimum profit threshold (5).  
  - *Edge Cases:* Misconfiguration leads to failed API calls or incorrect profit calculations.  
  - *Connections:* Output ‚Üí Get NASA APOD1.

- **Get NASA APOD1**  
  - *Type:* NASA node (API integration)  
  - *Role:* Fetches the current Astronomy Picture of the Day from NASA‚Äôs API.  
  - *Config:* Default parameters, no additional fields specified.  
  - *Output:* JSON containing image URL, title, explanation, etc.  
  - *Edge Cases:* API rate limits, network errors, or missing image URL.  
  - *Connections:* Output ‚Üí Generate Keywords & Check Logo1 and Create Mockup with Cloudinary1.

- **Generate Keywords & Check Logo1**  
  - *Type:* OpenAI (LangChain node)  
  - *Role:* Sends a prompt to OpenAI to generate relevant keywords for SEO and checks if the NASA logo is present in the image description (or metadata).  
  - *Config:* Operation set to "message" to perform text generation.  
  - *Key Variables:* Uses JSON data from NASA APOD node as input context.  
  - *Edge Cases:* API call failures, unexpected AI response format.  
  - *Connections:* Output ‚Üí Search Etsy Market1.

- **Create Mockup with Cloudinary1**  
  - *Type:* HTTP Request  
  - *Role:* Constructs a Cloudinary URL to overlay the NASA APOD image (encoded in base64) on a white T-shirt mockup image. The image is resized to width 400 and centered.  
  - *Config:*  
    - URL dynamically built using Cloudinary cloud name and T-shirt public ID from Workflow Configuration1 node.  
    - Response format requested as a file (binary data).  
  - *Edge Cases:* HTTP errors, invalid Cloudinary credentials, incorrect URL encoding.  
  - *Connections:* Output ‚Üí Merge Data1 (second input).

---

#### 2.2 Market Research

**Overview:**  
This block performs competitive product market analysis by scraping Etsy listings, extracting competitor prices, and calculating average prices and profit margins.

**Nodes Involved:**  
- Generate Keywords & Check Logo1 (continued from previous block)  
- Search Etsy Market1  
- Calculate Profit1

**Node Details:**

- **Search Etsy Market1**  
  - *Type:* Apify integration node  
  - *Role:* Runs the `dtrungtin/etsy-scraper` actor to search Etsy for products matching the keywords generated by AI.  
  - *Config:* Executes the actor without additional input parameters configured in this node; likely uses previous keyword output implicitly.  
  - *Credentials:* Requires Apify API key (not explicitly shown).  
  - *Edge Cases:* Actor execution failures, API rate limits, no results returned.  
  - *Connections:* Output ‚Üí Calculate Profit1.

- **Calculate Profit1**  
  - *Type:* Code (JavaScript)  
  - *Role:* Processes Etsy search results to:  
    - Extract numeric prices from competitor items.  
    - Calculate average competitor price.  
    - Determine profit margin based on production cost from Workflow Configuration1.  
    - Check if profit meets or exceeds minimum profit threshold.  
  - *Logic Highlights:*  
    - Strips non-numeric characters from price strings.  
    - Counts valid items with prices > 0.  
    - Returns average price, profit amount, profitability boolean, production cost, and competitor count.  
  - *Edge Cases:* Non-standard price formats, empty results, division by zero avoided.  
  - *Connections:* Output ‚Üí Merge Data1 (first input).

---

#### 2.3 Analysis & Approval

**Overview:**  
Combines the AI marketing advice and market data, sends a detailed proposal with key metrics and a mockup preview to Slack, then waits for user approval to proceed.

**Nodes Involved:**  
- Calculate Profit1  
- Create Mockup with Cloudinary1  
- Merge Data1  
- AI Marketing Advisor1  
- Send Slack Proposal1  
- Wait for User Decision1  
- Check User Decision1

**Node Details:**

- **Merge Data1**  
  - *Type:* Merge  
  - *Role:* Combines market research results (Calculate Profit1) and mockup image (Create Mockup with Cloudinary1) into a single data payload.  
  - *Config:* Combine mode set to "combineAll" to merge all input data into one JSON.  
  - *Connections:* Output ‚Üí AI Marketing Advisor1.

- **AI Marketing Advisor1**  
  - *Type:* OpenAI (LangChain node)  
  - *Role:* Uses AI to analyze combined data and generate marketing advice for the proposed merchandise.  
  - *Config:* Operation "message" to generate text output.  
  - *Edge Cases:* API call failures, unexpected response.  
  - *Connections:* Output ‚Üí Send Slack Proposal1.

- **Send Slack Proposal1**  
  - *Type:* Slack node  
  - *Role:* Sends a formatted message to a configured Slack channel including:  
    - Product title and keywords  
    - NASA logo presence warning  
    - Market data (average price, production cost, estimated profit, competitor count, profitability)  
    - AI marketing advice content  
    - Mockup image as a file attachment  
    - Prompt for user to decide whether to save the design  
  - *Config:* Channel ID placeholder to be replaced by user.  
  - *Edge Cases:* Slack API errors, invalid channel ID, message formatting errors.  
  - *Connections:* Output ‚Üí Wait for User Decision1.

- **Wait for User Decision1**  
  - *Type:* Wait (Webhook)  
  - *Role:* Pauses the workflow and waits for an external webhook call to resume with user decision data (e.g., "save" or other action).  
  - *Config:* Webhook ID assigned; response data sent to confirm receipt.  
  - *Edge Cases:* Timeout if no user response, invalid data in webhook payload.  
  - *Connections:* Output ‚Üí Check User Decision1.

- **Check User Decision1**  
  - *Type:* Switch  
  - *Role:* Evaluates the user response's "action" field; if it equals "save", proceeds to asset storage; otherwise, ends.  
  - *Config:* Case-sensitive string equality check for "save".  
  - *Edge Cases:* Missing or malformed action field; fallback output set to none (workflow ends).  
  - *Connections:* Output ("save" branch) ‚Üí Download NASA Image1.

---

#### 2.4 Asset Storage

**Overview:**  
Upon approval, downloads the original NASA APOD image, saves it to a Google Drive folder, and creates an entry with metadata in a Notion database.

**Nodes Involved:**  
- Download NASA Image1  
- Save to Google Drive1  
- Save to Notion DB1

**Node Details:**

- **Download NASA Image1**  
  - *Type:* HTTP Request  
  - *Role:* Downloads the original NASA APOD image file for storage.  
  - *Config:* URL dynamically taken from the NASA APOD node‚Äôs JSON URL.  
  - *Response:* Binary file data.  
  - *Edge Cases:* Download failure, broken URL, network issues.  
  - *Connections:* Output ‚Üí Save to Google Drive1.

- **Save to Google Drive1**  
  - *Type:* Google Drive  
  - *Role:* Uploads the downloaded image file to a specified Google Drive folder.  
  - *Config:*  
    - File name set dynamically to the APOD title with ".jpg" extension.  
    - Folder ID placeholder to be filled.  
  - *Credentials:* Google Drive OAuth2 required.  
  - *Edge Cases:* Permission errors, quota exceeded, invalid folder ID.  
  - *Connections:* Output ‚Üí Save to Notion DB1.

- **Save to Notion DB1**  
  - *Type:* Notion  
  - *Role:* Creates a new page in a Notion database logging the product metadata (title).  
  - *Config:*  
    - Page title set to APOD title.  
    - Database ID placeholder to be configured.  
  - *Credentials:* Notion integration token required.  
  - *Edge Cases:* API errors, invalid database ID, permission issues.  
  - *Connections:* None (workflow ends).

---

### 3. Summary Table

| Node Name                  | Node Type                  | Functional Role                          | Input Node(s)                    | Output Node(s)                   | Sticky Note                                                                                           |
|----------------------------|----------------------------|----------------------------------------|---------------------------------|---------------------------------|-----------------------------------------------------------------------------------------------------|
| Schedule Trigger1           | Schedule Trigger           | Triggers workflow daily at 08:00       | -                               | Workflow Configuration1          |                                                                                                     |
| Workflow Configuration1     | Set                        | Stores configuration variables          | Schedule Trigger1                | Get NASA APOD1                   |                                                                                                     |
| Get NASA APOD1              | NASA API                   | Fetches NASA Astronomy Picture of the Day | Workflow Configuration1          | Generate Keywords & Check Logo1, Create Mockup with Cloudinary1 |                                                                                                     |
| Generate Keywords & Check Logo1 | OpenAI (LangChain)       | Generates keywords, detects NASA logo  | Get NASA APOD1                  | Search Etsy Market1              |                                                                                                     |
| Search Etsy Market1         | Apify Actor                | Scrapes Etsy for competitor data        | Generate Keywords & Check Logo1  | Calculate Profit1                |                                                                                                     |
| Calculate Profit1           | Code (JS)                  | Calculates average price and profit     | Search Etsy Market1              | Merge Data1                     |                                                                                                     |
| Create Mockup with Cloudinary1 | HTTP Request              | Creates T-shirt mockup with Cloudinary  | Get NASA APOD1                  | Merge Data1                     |                                                                                                     |
| Merge Data1                | Merge                      | Combines market data and mockup image  | Calculate Profit1, Create Mockup with Cloudinary1 | AI Marketing Advisor1           |                                                                                                     |
| AI Marketing Advisor1       | OpenAI (LangChain)         | Generates marketing advice              | Merge Data1                    | Send Slack Proposal1             |                                                                                                     |
| Send Slack Proposal1        | Slack                      | Sends proposal message with data       | AI Marketing Advisor1           | Wait for User Decision1          |                                                                                                     |
| Wait for User Decision1     | Wait (Webhook)             | Waits for user approval decision       | Send Slack Proposal1            | Check User Decision1             |                                                                                                     |
| Check User Decision1        | Switch                     | Routes based on user action ("save")   | Wait for User Decision1         | Download NASA Image1 (on "save") |                                                                                                     |
| Download NASA Image1        | HTTP Request               | Downloads NASA APOD image               | Check User Decision1            | Save to Google Drive1            |                                                                                                     |
| Save to Google Drive1       | Google Drive               | Stores image file in Drive              | Download NASA Image1            | Save to Notion DB1               |                                                                                                     |
| Save to Notion DB1          | Notion                     | Logs product metadata in Notion DB     | Save to Google Drive1           | -                               |                                                                                                     |
| Sticky Note 1               | Sticky Note                | Describes Sourcing & Design block       | -                               | -                               | ### 1. Sourcing & Design\nFetch the daily image, generate relevant keywords using AI, and create a visual mockup of the product. |
| Sticky Note 2               | Sticky Note                | Describes Market Research block         | -                               | -                               | ### 2. Market Research\nSearch Etsy for similar products to determine average market price and calculate potential profit margins. |
| Sticky Note 3               | Sticky Note                | Describes Analysis & Approval block     | -                               | -                               | ### 3. Analysis & Approval\nAI analyzes the data to provide marketing advice. A Slack message is sent to the user for a Go/No-Go decision. |
| Sticky Note 4               | Sticky Note                | Describes Asset Storage block            | -                               | -                               | ### 4. Asset Storage\nIf approved, the high-quality image is saved to Google Drive and the product metadata is logged in Notion. |
| Sticky Note1                | Sticky Note                | Workflow description and setup notes    | -                               | -                               | ## Automate merchandise creation and market analysis from NASA APOD\n\nThis workflow streamlines the product development process for Print-on-Demand businesses by leveraging NASA's public domain images.\n\n### üöÄ What it does\n1. **Content Sourcing**: Fetches NASA's Astronomy Picture of the Day.\n2. **Product Design**: Generates a T-shirt mockup using Cloudinary.\n3. **Market Research**: Scrapes Etsy via Apify to analyze competitor pricing and calculates potential profit.\n4. **AI Analysis**: OpenAI generates SEO keywords and marketing advice.\n5. **Approval Loop**: Sends a detailed proposal to Slack.\n6. **Asset Management**: Upon approval, saves the image to Google Drive and the product details to Notion.\n\n### üõ†Ô∏è Setup\n1. **Configure Credentials**: Ensure you have credentials for NASA, OpenAI, Cloudinary, Apify, Slack, Google Drive, and Notion.\n2. **Set Variables**: Open the **Workflow Configuration** node and enter your specific details (Cloudinary keys, production costs, etc.).\n3. **Adjust IDs**: Update the Slack Channel ID, Google Drive Folder ID, and Notion Database ID in their respective nodes (marked with placeholders).\n\n### üìã Requirements\n- **Cloudinary**: For image transformations.\n- **Apify**: Uses the `dtrungtin/etsy-scraper` actor.\n- **OpenAI**: For text generation and analysis.\n- **Slack, Google Drive, Notion**: For communication and storage. |

---

### 4. Reproducing the Workflow from Scratch

1. **Create a new n8n workflow.**

2. **Add a Schedule Trigger node** named `Schedule Trigger1`:  
   - Set interval to trigger daily at 08:00 AM.

3. **Add a Set node** named `Workflow Configuration1`:  
   - Configure these variables:  
     - `cloudinaryCloudName` (string): Your Cloudinary cloud name.  
     - `cloudinaryApiKey` (string): Your Cloudinary API key.  
     - `tshirtPublicId` (string): Set to `"white_tshirt_base"`.  
     - `productionCost` (number): Set to `15`.  
     - `minProfitThreshold` (number): Set to `5`.  
   - Connect output of `Schedule Trigger1` ‚Üí `Workflow Configuration1`.

4. **Add NASA node** named `Get NASA APOD1`:  
   - Connect output of `Workflow Configuration1` ‚Üí `Get NASA APOD1`.  
   - Use default parameters to fetch daily APOD.

5. **Add an OpenAI (LangChain) node** named `Generate Keywords & Check Logo1`:  
   - Set operation to "message".  
   - Input: Use output from `Get NASA APOD1` to prompt AI to generate keywords and detect NASA logo presence.  
   - Connect output of `Get NASA APOD1` ‚Üí `Generate Keywords & Check Logo1`.

6. **Add Apify node** named `Search Etsy Market1`:  
   - Configure to run the Etsy scraper actor `dtrungtin/etsy-scraper`.  
   - Connect output of `Generate Keywords & Check Logo1` ‚Üí `Search Etsy Market1`.  
   - Configure Apify credentials.

7. **Add a Code node** named `Calculate Profit1`:  
   - Paste the provided JavaScript code that calculates average competitor price, profit, and profitability boolean.  
   - Use values from `Workflow Configuration1` for production cost and profit threshold.  
   - Connect output of `Search Etsy Market1` ‚Üí `Calculate Profit1`.

8. **Add HTTP Request node** named `Create Mockup with Cloudinary1`:  
   - Configure URL dynamically:  
     ```
     https://res.cloudinary.com/{{ $json.cloudinaryCloudName }}/image/upload/l_fetch:{{ encodeURIComponent(Buffer.from($json.url).toString('base64')) }},w_400,c_fit,g_center/{{ $json.tshirtPublicId }}.jpg
     ```  
   - Set response format to "File".  
   - Connect output of `Get NASA APOD1` ‚Üí `Create Mockup with Cloudinary1`.

9. **Add Merge node** named `Merge Data1`:  
   - Set mode to "combineAll".  
   - Connect outputs of `Calculate Profit1` (first input) and `Create Mockup with Cloudinary1` (second input) ‚Üí `Merge Data1`.

10. **Add OpenAI (LangChain) node** named `AI Marketing Advisor1`:  
    - Operation: "message".  
    - Input: Use merged data from `Merge Data1`.  
    - Connect output of `Merge Data1` ‚Üí `AI Marketing Advisor1`.

11. **Add Slack node** named `Send Slack Proposal1`:  
    - Configure Slack OAuth2 credentials.  
    - Set channel ID to your Slack channel.  
    - Compose message including variables: APOD title, keywords, NASA logo status, market data, AI advice, and mockup preview as attachment.  
    - Connect output of `AI Marketing Advisor1` ‚Üí `Send Slack Proposal1`.

12. **Add Wait node** named `Wait for User Decision1`:  
    - Configure webhook to wait for user input.  
    - Connect output of `Send Slack Proposal1` ‚Üí `Wait for User Decision1`.

13. **Add Switch node** named `Check User Decision1`:  
    - Configure to check if incoming JSON field `action` equals `"save"`.  
    - Connect output of `Wait for User Decision1` ‚Üí `Check User Decision1`.

14. **Add HTTP Request node** named `Download NASA Image1`:  
    - URL set dynamically to NASA APOD image URL from `Get NASA APOD1`.  
    - Response format set to "File".  
    - Connect "save" output of `Check User Decision1` ‚Üí `Download NASA Image1`.

15. **Add Google Drive node** named `Save to Google Drive1`:  
    - Configure Google Drive OAuth2 credentials.  
    - Folder ID: Your target Google Drive folder ID.  
    - File name: APOD title + ".jpg".  
    - Connect output of `Download NASA Image1` ‚Üí `Save to Google Drive1`.

16. **Add Notion node** named `Save to Notion DB1`:  
    - Configure Notion integration credentials.  
    - Database ID: Your Notion database ID.  
    - Page title: APOD title.  
    - Connect output of `Save to Google Drive1` ‚Üí `Save to Notion DB1`.

17. **Ensure all nodes are connected as specified**, and replace all placeholder credentials and IDs with actual values before activating the workflow.

---

### 5. General Notes & Resources

| Note Content                                                                                                                            | Context or Link                                                                                      |
|-----------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| Workflow automates merchandise creation using NASA‚Äôs public domain images, leveraging AI and multiple integrations for design and market analysis. | Workflow description in Sticky Note1 node.                                                         |
| Requires API credentials for NASA, OpenAI, Cloudinary, Apify (for Etsy scraping), Slack, Google Drive, and Notion.                     | Setup instructions in Sticky Note1 node.                                                           |
| Etsy scraping uses Apify actor `dtrungtin/etsy-scraper` ‚Äî ensure Apify account and API key configured properly.                         | Mentioned in Sticky Note1 and Search Etsy Market1 node.                                            |
| Cloudinary is used for image transformations to create mockups by overlaying NASA images onto a T-shirt base.                           | Design details in Sticky Note 1 and Create Mockup with Cloudinary1 node.                            |
| Slack channel ID, Google Drive folder ID, and Notion database ID must be replaced with actual values in respective nodes before running. | Placeholder IDs are visible in Send Slack Proposal1, Save to Google Drive1, and Save to Notion DB1. |
| AI Marketing Advisor and Keyword generation use OpenAI‚Äôs GPT models via LangChain nodes; ensure OpenAI credentials and quota availability. | AI nodes configuration and potential API limits.                                                   |

---

**Disclaimer:**  
The provided content is exclusively generated from an automated n8n workflow. The process strictly follows content policies and contains no illegal, offensive, or protected elements. All handled data is legal and publicly available.

---