Create Animated Stories using GPT-4o-mini, Midjourney, Kling and Creatomate API

https://n8nworkflows.xyz/workflows/create-animated-stories-using-gpt-4o-mini--midjourney--kling-and-creatomate-api-3655


# Create Animated Stories using GPT-4o-mini, Midjourney, Kling and Creatomate API

### 1. Workflow Overview

This workflow automates the creation of high-quality short animated videos by integrating multiple AI services: GPT-4o-mini for generating story prompts, Midjourney for image generation, Kling for video generation from images, and Creatomate for final video compositing. It targets content creators such as social media influencers, vloggers, educators, advertising agencies, and AI tool developers who want to quickly prototype and produce engaging short videos based on creative scenarios.

The workflow is logically divided into the following blocks:

- **1.1 Basic Input and Prompt Generation:** Accepts user parameters and uses GPT-4o-mini to generate a structured story prompt divided into three parts.
- **1.2 Image Generation (Three Images):** Sequentially generates three images using Midjourney API based on the prompts.
- **1.3 Video Generation from Images:** Converts each generated image into a short video using Kling API.
- **1.4 Video Status Polling and Retrieval:** Waits for video generation completion and retrieves video URLs.
- **1.5 Final Video Composition:** Combines the three generated videos into a single video using Creatomate API with a predefined template.

---

### 2. Block-by-Block Analysis

#### 2.1 Basic Input and Prompt Generation

- **Overview:**  
  This block collects user inputs (style, character, situational keywords) and generates a structured story prompt with three sections using GPT-4o-mini.

- **Nodes Involved:**  
  - Manual Trigger ("When clicking Test workflow")  
  - Set ("Basic Params")  
  - HTTP Request ("GPT-4o-mini Generate Image Scenario Prompt")  
  - Code ("Get Prompt")  
  - Sticky Note ("Sticky Note")

- **Node Details:**

  - **Manual Trigger ("When clicking Test workflow")**  
    - Type: Manual trigger to start the workflow.  
    - Configuration: Default.  
    - Inputs: None.  
    - Outputs: Triggers "Basic Params".  
    - Edge cases: None.

  - **Set ("Basic Params")**  
    - Type: Set node to define basic parameters.  
    - Configuration: Raw JSON input with keys:  
      - `x-api-key`: User’s PiAPI key (empty by default, must be filled).  
      - `style`: e.g., "a children’s book cover, ages 6-10. --s 500 --sref 4028286908  --niji 6"  
      - `character`: Description of characters (e.g., "A gentle girl and a fluffy rabbit explore a sunlit forest...")  
      - `situational_keywords`: Contextual keywords describing the scene.  
    - Inputs: Triggered by manual trigger.  
    - Outputs: Feeds into GPT-4o-mini HTTP Request.  
    - Edge cases: Missing or invalid API key will cause authentication errors downstream.

  - **HTTP Request ("GPT-4o-mini Generate Image Scenario Prompt")**  
    - Type: HTTP Request to PiAPI GPT-4o-mini chat completions endpoint.  
    - Configuration:  
      - POST to `https://api.piapi.ai/v1/chat/completions`  
      - Authorization header: Bearer token from `x-api-key` in Basic Params.  
      - Body: System and user messages instructing GPT-4o-mini to generate a JSON with keys: title, prompt1, prompt2, prompt3.  
      - The user message includes the character, style, and situational keywords from Basic Params.  
    - Inputs: Basic Params output.  
    - Outputs: JSON string with prompts.  
    - Edge cases: API key invalid, rate limits, malformed JSON response, or GPT generating invalid JSON.

  - **Code ("Get Prompt")**  
    - Type: Code node (JavaScript).  
    - Configuration: Parses the JSON string from GPT-4o-mini response into a JSON object named `prompts`.  
    - Inputs: GPT-4o-mini HTTP Request output.  
    - Outputs: Parsed prompt JSON for downstream use.  
    - Edge cases: JSON parse errors if GPT response is malformed.

  - **Sticky Note ("Sticky Note")**  
    - Content: Instructions for filling Basic Params and explanation of GPT-4o-mini role.  
    - Position: Near Basic Params node for user guidance.

---

#### 2.2 Image Generation (Three Images)

- **Overview:**  
  Generates three images sequentially using Midjourney API based on the prompts generated by GPT-4o-mini and the user’s character/style inputs.

- **Nodes Involved:**  
  - HTTP Request ("Midjourney Generator of the First Image")  
  - Set ("Get Task ID of the First Image")  
  - Wait ("Wait for the First Image Generation")  
  - HTTP Request ("Get Task of the First Image")  
  - If ("Verify the first image generation status")  
  - Switch ("Get the First Image Generation Status")  
  - Set ("Get the First Image URL")  
  - HTTP Request ("Midjourney Generator of the Second Image")  
  - Wait ("Wait for the Second Image Generation")  
  - HTTP Request ("Get Task of the Second Image")  
  - If ("Verify the second image generation status")  
  - Switch ("Get the Second Image Generation Status")  
  - Set ("Get the Second Image URL")  
  - HTTP Request ("Midjourney Generator of the Third Image")  
  - Wait ("Wait for the Third Image Generation")  
  - HTTP Request ("Get Task of the Third Image")  
  - If ("Verify the third image generation status")  
  - Switch ("Get the Third Image Generation Status")  
  - Set ("Get the Third Image URL")  
  - Set ("Get three Image URLs")  
  - Sticky Notes ("Sticky Note1", "Sticky Note2", "Sticky Note3")

- **Node Details:**

  - **HTTP Request ("Midjourney Generator of the First Image")**  
    - Type: HTTP POST to PiAPI Midjourney imagine endpoint.  
    - Configuration:  
      - URL: `https://api.piapi.ai/api/v1/task`  
      - Body includes model "midjourney", task_type "imagine", and prompt combining character, prompt1, and style from Basic Params and Get Prompt nodes.  
      - Aspect ratio fixed at 2:3, process_mode "turbo".  
      - Header includes `x-api-key` from Basic Params.  
    - Inputs: Output from "Get Prompt".  
    - Outputs: Task ID for image generation.  
    - Edge cases: API errors, invalid prompt, rate limits.

  - **Set ("Get Task ID of the First Image")**  
    - Extracts the task_id from the Midjourney generation response for polling.  
    - Inputs: Midjourney Generator node output.  
    - Outputs: Task ID string for next polling node.

  - **Wait ("Wait for the First Image Generation")**  
    - Waits for a webhook callback or a fixed delay before polling the task status.  
    - Inputs: Task ID node output.  
    - Outputs: Triggers task status check.

  - **HTTP Request ("Get Task of the First Image")**  
    - Polls the Midjourney task status using the task ID.  
    - URL constructed dynamically with task ID.  
    - Inputs: Wait node output.  
    - Outputs: Task status JSON.

  - **If ("Verify the first image generation status")**  
    - Checks if the status is "completed" or "failed".  
    - Inputs: Task status node output.  
    - Outputs: Branches to success or retry.

  - **Switch ("Get the First Image Generation Status")**  
    - Routes flow based on status "completed" or other.  
    - Inputs: Task status node output.  
    - Outputs: On "completed", proceeds to get image URLs.

  - **Set ("Get the First Image URL")**  
    - Extracts temporary image URLs from the completed task output.  
    - Inputs: Switch node output.  
    - Outputs: Image URLs array.

  - The above pattern repeats for the second and third images with analogous nodes named accordingly (Midjourney Generator of the Second Image, Wait for the Second Image Generation, etc.).

  - **Set ("Get three Image URLs")**  
    - Consolidates the first, second, and third image URLs into separate variables for downstream video generation.  
    - Inputs: Outputs from the three "Get Image URL" nodes.  
    - Outputs: Three distinct image URLs.

  - **Sticky Notes ("Sticky Note1", "Sticky Note2", "Sticky Note3")**  
    - Provide user guidance on each image generation section.

- **Edge Cases:**  
  - Image generation failure or timeout.  
  - API rate limits or invalid API key.  
  - Missing or malformed prompt data.  
  - Webhook delays or failures in wait nodes.

---

#### 2.3 Video Generation from Images

- **Overview:**  
  Converts each generated image into a short video using Kling API, then polls for video generation completion.

- **Nodes Involved:**  
  - HTTP Request ("Generate the First Video")  
  - HTTP Request ("Generate the Second Video")  
  - HTTP Request ("Generate the Third Video")  
  - Set ("Get Video Task IDs")  
  - Wait ("Wait for Video Generation for at Least 4 min")  
  - HTTP Request ("Get the First Video Task")  
  - If ("Verify the First Video Generation")  
  - Switch ("Get the First Video Generation")  
  - Wait ("Wait for the First Video Generation")  
  - HTTP Request ("Get the Second Video Task")  
  - If ("Verify the Second Video Generation")  
  - Switch ("Get the Second Video Generation")  
  - Wait ("Wait for the Second Video Generation")  
  - HTTP Request ("Get the Third Video Task")  
  - If ("Verify the Third Video Generation")  
  - Switch ("Get the Third Video Generation")  
  - Wait ("Wait for the Third Video Generation")  
  - Set ("output1")  
  - Set ("output2")  
  - Set ("Get the Third Video URL")  
  - Sticky Note ("Sticky Note4")

- **Node Details:**

  - **HTTP Request ("Generate the First Video")**  
    - POST to PiAPI Kling video generation endpoint.  
    - Body includes model "kling", task_type "video_generation", version "1.6", mode "pro", image_url from first image URL, and prompt "Natural swing".  
    - Header includes `x-api-key`.  
    - Inputs: "Get three Image URLs" output.  
    - Outputs: Video generation task ID.

  - **HTTP Request ("Generate the Second Video")** and **("Generate the Third Video")**  
    - Same configuration as first video, but use second and third image URLs respectively.

  - **Set ("Get Video Task IDs")**  
    - Extracts video generation task IDs from the three video generation responses.  
    - Inputs: Outputs from the three Generate Video nodes.  
    - Outputs: Task IDs for polling.

  - **Wait ("Wait for Video Generation for at Least 4 min")**  
    - Fixed wait of 4 minutes before polling video generation status to allow processing time.  
    - Inputs: "Get Video Task IDs" output.  
    - Outputs: Triggers first video task status check.

  - **HTTP Request ("Get the First Video Task")**  
    - Polls video generation status for first video using task ID.  
    - Inputs: Wait node output.  
    - Outputs: Video task status JSON.

  - **If ("Verify the First Video Generation")**  
    - Checks if status is "completed" or "failed".  
    - On success, proceeds to get video URL.  
    - On failure or incomplete, triggers wait and retry.

  - **Switch ("Get the First Video Generation")**  
    - Routes based on status.  
    - On "completed", sets video URL in "output1".  
    - On other, loops back to wait.

  - The above pattern repeats for second and third videos with analogous nodes.

  - **Set ("output1")**, **Set ("output2")**, **Set ("Get the Third Video URL")**  
    - Extract and assign the final video URLs from the completed video generation tasks.

  - **Sticky Note ("Sticky Note4")**  
    - Explains this section generates three Kling videos.

- **Edge Cases:**  
  - Video generation failure or timeout.  
  - API rate limits or invalid API key.  
  - Delays in video processing requiring extended waits.  
  - Network errors during polling.

---

#### 2.4 Final Video Composition

- **Overview:**  
  Combines the three generated videos into a single composite video using Creatomate API with a predefined video template.

- **Nodes Involved:**  
  - HTTP Request ("Final Video Combination")  
  - Sticky Note ("Sticky Note5")

- **Node Details:**

  - **HTTP Request ("Final Video Combination")**  
    - POST to `https://api.creatomate.com/v1/renders`  
    - Body includes:  
      - `template_id`: A predefined Creatomate video template ID.  
      - `modifications`: Sets the sources of three video elements to the URLs from the three Kling videos, and sets a text element to the story title from GPT prompts.  
    - Headers:  
      - Authorization: Bearer token (user must fill their Creatomate API token).  
      - Content-Type: application/json.  
    - Inputs: Video URLs from "output1", "output2", and "Get the Third Video URL", and title from "Get Prompt".  
    - Outputs: Final rendered video URL.  
    - Edge cases: Invalid or missing Creatomate API token, template ID errors, network issues.

  - **Sticky Note ("Sticky Note5")**  
    - Provides instructions on setting up Creatomate template and node configuration.

---

### 3. Summary Table

| Node Name                             | Node Type           | Functional Role                                  | Input Node(s)                          | Output Node(s)                         | Sticky Note                                                                                   |
|-------------------------------------|---------------------|-------------------------------------------------|--------------------------------------|--------------------------------------|----------------------------------------------------------------------------------------------|
| When clicking Test workflow          | Manual Trigger      | Starts the workflow                              | None                                 | Basic Params                         |                                                                                              |
| Basic Params                        | Set                 | Defines user input parameters                    | When clicking Test workflow           | GPT-4o-mini Generate Image Scenario Prompt | Basic Setting Instruction: Fill in style, character, situational_keywords, and API key.       |
| GPT-4o-mini Generate Image Scenario Prompt | HTTP Request       | Generates story prompts via GPT-4o-mini          | Basic Params                         | Get Prompt                          |                                                                                              |
| Get Prompt                         | Code                | Parses GPT-4o-mini JSON response                 | GPT-4o-mini Generate Image Scenario Prompt | Midjourney Generator of the First Image |                                                                                              |
| Midjourney Generator of the First Image | HTTP Request       | Generates first image via Midjourney API         | Get Prompt                          | Get Task ID of the First Image      | Generate the first image                                                                     |
| Get Task ID of the First Image      | Set                 | Extracts task ID for first image                  | Midjourney Generator of the First Image | Wait for the First Image Generation |                                                                                              |
| Wait for the First Image Generation | Wait                | Waits for first image generation                  | Get Task ID of the First Image       | Get Task of the First Image          |                                                                                              |
| Get Task of the First Image         | HTTP Request        | Polls first image generation status               | Wait for the First Image Generation   | Verify the first image generation status |                                                                                              |
| Verify the first image generation status | If                  | Checks if first image generation completed or failed | Get Task of the First Image          | Get the First Image Generation Status, Wait for the First Image Generation |                                                                                              |
| Get the First Image Generation Status | Switch              | Routes based on first image generation status     | Verify the first image generation status | Get the First Image URL              |                                                                                              |
| Get the First Image URL             | Set                 | Extracts first image URLs                          | Get the First Image Generation Status | Midjourney Generator of the Second Image |                                                                                              |
| Midjourney Generator of the Second Image | HTTP Request       | Generates second image via Midjourney API         | Get the First Image URL              | Get Task of the Second Image         | Generate the second image                                                                    |
| Wait for the Second Image Generation | Wait                | Waits for second image generation                  | Midjourney Generator of the Second Image | Get Task of the Second Image         |                                                                                              |
| Get Task of the Second Image        | HTTP Request        | Polls second image generation status               | Wait for the Second Image Generation  | Verify the second image generation status |                                                                                              |
| Verify the second image generation status | If                  | Checks if second image generation completed or failed | Get Task of the Second Image         | Get the Second Image Generation Status, Wait for the Second Image Generation |                                                                                              |
| Get the Second Image Generation Status | Switch              | Routes based on second image generation status     | Verify the second image generation status | Get the Second Image URL             |                                                                                              |
| Get the Second Image URL            | Set                 | Extracts second image URLs                         | Get the Second Image Generation Status | Midjourney Generator of the Third Image |                                                                                              |
| Midjourney Generator of the Third Image | HTTP Request       | Generates third image via Midjourney API          | Get the Second Image URL             | Wait for the Third Image Generation  | Generate the third image                                                                     |
| Wait for the Third Image Generation | Wait                | Waits for third image generation                   | Midjourney Generator of the Third Image | Get Task of the Third Image          |                                                                                              |
| Get Task of the Third Image         | HTTP Request        | Polls third image generation status                | Wait for the Third Image Generation   | Verify the third image generation status |                                                                                              |
| Verify the third image generation status | If                  | Checks if third image generation completed or failed | Get Task of the Third Image          | Get the Third Image Generation Status, Wait for the Third Image Generation |                                                                                              |
| Get the Third Image Generation Status | Switch              | Routes based on third image generation status      | Verify the third image generation status | Get the Third Image URL              |                                                                                              |
| Get the Third Image URL             | Set                 | Extracts third image URLs                          | Get the Third Image Generation Status | Get three Image URLs                 |                                                                                              |
| Get three Image URLs                | Set                 | Consolidates all three image URLs                  | Get the Third Image URL              | Generate the First Video             |                                                                                              |
| Generate the First Video            | HTTP Request        | Generates first video from first image via Kling  | Get three Image URLs                 | Generate the Second Video            | Generate three Kling videos                                                                 |
| Generate the Second Video           | HTTP Request        | Generates second video from second image via Kling | Generate the First Video             | Generate the Third Video             |                                                                                              |
| Generate the Third Video            | HTTP Request        | Generates third video from third image via Kling  | Generate the Second Video            | Get Video Task IDs                   |                                                                                              |
| Get Video Task IDs                  | Set                 | Extracts video generation task IDs                  | Generate the Third Video             | Wait for Video Generation for at Least 4 min |                                                                                              |
| Wait for Video Generation for at Least 4 min | Wait                | Fixed wait before polling video generation status  | Get Video Task IDs                  | Get the First Video Task             |                                                                                              |
| Get the First Video Task            | HTTP Request        | Polls first video generation status                 | Wait for Video Generation for at Least 4 min | Verify the First Video Generation    |                                                                                              |
| Verify the First Video Generation   | If                  | Checks if first video generation completed or failed | Get the First Video Task            | Get the First Video Generation, Wait for the First Video Generation |                                                                                              |
| Get the First Video Generation      | Switch              | Routes based on first video generation status       | Verify the First Video Generation    | output1                            |                                                                                              |
| Wait for the First Video Generation | Wait                | Waits before retrying first video generation status | Verify the First Video Generation    | Get the First Video Task             |                                                                                              |
| Get the Second Video Task           | HTTP Request        | Polls second video generation status                | Wait for the First Video Generation  | Verify the Second Video Generation   |                                                                                              |
| Verify the Second Video Generation  | If                  | Checks if second video generation completed or failed | Get the Second Video Task           | Get the Second Video Generation, Wait for the Second Video Generation |                                                                                              |
| Get the Second Video Generation     | Switch              | Routes based on second video generation status      | Verify the Second Video Generation   | output2                            |                                                                                              |
| Wait for the Second Video Generation | Wait                | Waits before retrying second video generation status | Verify the Second Video Generation   | Get the Second Video Task            |                                                                                              |
| Get the Third Video Task            | HTTP Request        | Polls third video generation status                 | Wait for the Second Video Generation | Verify the Third Video Generation    |                                                                                              |
| Verify the Third Video Generation   | If                  | Checks if third video generation completed or failed | Get the Third Video Task            | Get the Third Video Generation, Wait for the Third Video Generation |                                                                                              |
| Get the Third Video Generation      | Switch              | Routes based on third video generation status       | Verify the Third Video Generation    | Get the Third Video URL              |                                                                                              |
| Wait for the Third Video Generation | Wait                | Waits before retrying third video generation status | Verify the Third Video Generation    | Get the Third Video Task             |                                                                                              |
| output1                           | Set                 | Stores first video URL                               | Get the First Video Generation       | Get the Second Video Task            |                                                                                              |
| output2                           | Set                 | Stores second video URL                              | Get the Second Video Generation      | Get the Third Video Task             |                                                                                              |
| Get the Third Video URL             | Set                 | Stores third video URL                               | Get the Third Video Generation        | Final Video Combination              |                                                                                              |
| Final Video Combination             | HTTP Request        | Combines three videos into final video via Creatomate | Get the Third Video URL             | None                               | Combine Videos in Creatomate: Set video template and node with instructions.                 |
| Sticky Note                       | Sticky Note          | Basic setting instructions                           | None                                 | None                               | Fill in Basic Params based on user needs; GPT-4o-mini generates image description.           |
| Sticky Note1                      | Sticky Note          | Guidance for first image generation                  | None                                 | None                               | Generate the first image                                                                     |
| Sticky Note2                      | Sticky Note          | Guidance for second image generation                 | None                                 | None                               | Generate the second image                                                                    |
| Sticky Note3                      | Sticky Note          | Guidance for third image generation                  | None                                 | None                               | Generate the third image                                                                     |
| Sticky Note4                      | Sticky Note          | Guidance for Kling video generation                   | None                                 | None                               | Generate three Kling videos                                                                 |
| Sticky Note5                      | Sticky Note          | Guidance for Creatomate video combination            | None                                 | None                               | Combine Videos in Creatomate                                                                 |

---

### 4. Reproducing the Workflow from Scratch

1. **Create a Manual Trigger node** named "When clicking Test workflow" to start the workflow manually.

2. **Add a Set node** named "Basic Params" connected from the Manual Trigger.  
   - Configure raw JSON with keys:  
     - `"x-api-key"`: Your PiAPI API key (empty by default).  
     - `"style"`: e.g., `"a children’s book cover, ages 6-10. --s 500 --sref 4028286908  --niji 6"`.  
     - `"character"`: e.g., `"A gentle girl and a fluffy rabbit explore a sunlit forest together, playing by a sparkling stream"`.  
     - `"situational_keywords"`: e.g., `"Butterflies flutter around them as golden sunlight filters through green leaves. Warm and peaceful atmosphere"`.

3. **Add an HTTP Request node** named "GPT-4o-mini Generate Image Scenario Prompt" connected from "Basic Params".  
   - Method: POST  
   - URL: `https://api.piapi.ai/v1/chat/completions`  
   - Headers:  
     - Authorization: `Bearer {{$json["x-api-key"]}}` (use expression to get from Basic Params)  
   - Body (JSON):  
     ```json
     {
       "model": "gpt-4o-mini",
       "messages": [
         {"role": "system", "content": "You are a helpful assistant."},
         {"role": "user", "content": "Character is {{ $json.character }}, style is {{ $json.style }}, context keywords are {{ $json.situational_keywords }}, please generate a short story containing relevant elements and styles based on Character and context keywords. It should be concise and clear and divided into three sections. The return format is {'title':'','prompt1':'','prompt2':'','prompt3':''}, directly return json data format, not markdown include unusual characters such as hyphens,The key and value are enclosed in double quotes, but if you need to use quotes in the value string, please use single quotes."}
       ]
     }
     ```

4. **Add a Code node** named "Get Prompt" connected from the GPT-4o-mini node.  
   - JavaScript code:  
     ```javascript
     const content = $input.first().json.choices[0].message.content;
     const prompts = JSON.parse(content);
     return { prompts };
     ```

5. **For each of the three images:**

   - **Create an HTTP Request node** named "Midjourney Generator of the First Image" (and similarly for second and third images).  
     - Method: POST  
     - URL: `https://api.piapi.ai/api/v1/task`  
     - Headers:  
       - `x-api-key`: from Basic Params  
     - Body (JSON):  
       ```json
       {
         "model": "midjourney",
         "task_type": "imagine",
         "input": {
           "prompt": "{{ $json.character }},{{ $json.prompts.prompt1 }},{{ $json.style }}",
           "aspect_ratio": "2:3",
           "process_mode": "turbo",
           "skip_prompt_check": false
         }
       }
       ```  
     - Adjust prompt for second and third images to use `prompt2` and `prompt3`.

   - **Add a Set node** to extract the `task_id` from the Midjourney response.

   - **Add a Wait node** to pause before polling.

   - **Add an HTTP Request node** to poll the task status using the task ID.

   - **Add an If node** to check if status is "completed" or "failed".

   - **Add a Switch node** to route on "completed" status.

   - **Add a Set node** to extract the image URLs from the completed task.

6. **Add a Set node** named "Get three Image URLs" to consolidate the three image URLs into separate variables.

7. **For each of the three videos:**

   - **Create an HTTP Request node** named "Generate the First Video" (and similarly for second and third videos).  
     - Method: POST  
     - URL: `https://api.piapi.ai/api/v1/task`  
     - Headers:  
       - `x-api-key`: from Basic Params  
     - Body (JSON):  
       ```json
       {
         "model": "kling",
         "task_type": "video_generation",
         "input": {
           "version": "1.6",
           "mode": "pro",
           "image_url": "{{ $json.image_output1 }}",
           "prompt": "Natural swing"
         }
       }
       ```  
     - Adjust `image_url` for second and third videos accordingly.

   - **Add a Set node** to extract video generation task IDs.

   - **Add a Wait node** to wait at least 4 minutes before polling video status.

   - **Add HTTP Request nodes** to poll video generation status for each video.

   - **Add If and Switch nodes** to verify video generation completion and handle retries.

   - **Add Set nodes** to extract final video URLs.

8. **Add an HTTP Request node** named "Final Video Combination" to call Creatomate API.  
   - Method: POST  
   - URL: `https://api.creatomate.com/v1/renders`  
   - Headers:  
     - Authorization: `Bearer <Creatomate API token>` (must be filled)  
     - Content-Type: `application/json`  
   - Body (JSON):  
     ```json
     {
       "template_id": "c10c62b6-d515-4f36-a730-f4646d1b7ee2",
       "modifications": {
         "Video-1.source": "{{ $json.video1 }}",
         "Video-2.source": "{{ $json.video2 }}",
         "Video-3.source": "{{ $json.video3 }}",
         "Text-1.text": "{{ $json.title }}"
       }
     }
     ```  
   - Connect inputs from the three video URL Set nodes and the title from "Get Prompt".

9. **Add final Set nodes** to extract the final combined video URL.

10. **Add Sticky Notes** at appropriate places to guide users on parameter filling, API keys, and node purposes.

---

### 5. General Notes & Resources

| Note Content                                                                                                                      | Context or Link                                                                                      |
|-----------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| This workflow uses unofficial APIs from PiAPI for GPT-4o-mini, Midjourney, and Kling models.                                      | [PiAPI](https://piapi.ai)                                                                          |
| Creatomate API is used for final video compositing with a predefined video template.                                              | [Creatomate API Documentation](https://creatomate.com/docs/api/introduction)                        |
| Users must fill in their PiAPI `x-api-key` in the Basic Params node before running the workflow.                                  | Basic Params node                                                                                   |
| Users must fill in their Creatomate API Bearer token in the Final Video Combination node.                                         | Final Video Combination node                                                                        |
| The workflow includes wait nodes with webhook IDs to handle asynchronous task polling for image and video generation.            | Wait nodes                                                                                        |
| For best results, users should first prototype with basic assets in Creatomate before full integration.                           | Workflow description                                                                               |
| The workflow can be extended by adding audio generation nodes using PiAPI audio models or other music solutions.                 | Workflow description                                                                               |
| Example use case parameters and output video are provided in the workflow description for reference.                             | Workflow description                                                                               |
| Official API documentation links for PiAPI and Creatomate are essential for understanding advanced use cases and parameters.    | [PiAPI Docs](https://piapi.ai/docs/overview), [Creatomate Docs](https://creatomate.com/docs/api/introduction) |

---

This completes the comprehensive reference documentation for the "Create Animated Stories using GPT-4o-mini, Midjourney, Kling and Creatomate API" n8n workflow.