Convert HTML to PDF & Extract Text from PDFs with CustomJS API

https://n8nworkflows.xyz/workflows/convert-html-to-pdf---extract-text-from-pdfs-with-customjs-api-3871


# Convert HTML to PDF & Extract Text from PDFs with CustomJS API

### 1. Workflow Overview

This n8n workflow demonstrates how to convert HTML content into a PDF document and subsequently extract text from PDF files using the CustomJS PDF Toolkit API. It supports both generating PDFs from raw HTML and extracting text from existing PDF files accessible via URLs. The workflow is designed for self-hosted n8n instances with a valid CustomJS API key.

**Target Use Cases:**
- Automating PDF generation from HTML content.
- Extracting textual data from PDFs for further processing.
- Handling PDF files referenced by URLs.
- Integrating PDF text extraction into larger automation pipelines.

**Logical Blocks:**

- **1.1 Trigger Block:** Initiates the workflow manually.
- **1.2 HTML to PDF Conversion Block:** Converts given HTML input into a PDF document.
- **1.3 PDF Text Extraction Block:** Extracts text from the generated PDF.
- **1.4 URL-based PDF Text Extraction Block:** Handles PDF URLs, downloads the PDF, and extracts text.

---

### 2. Block-by-Block Analysis

#### 2.1 Trigger Block

- **Overview:**  
  Starts the workflow manually by user interaction.

- **Nodes Involved:**  
  - When clicking ‘Test workflow’ (Manual Trigger)

- **Node Details:**

  - **When clicking ‘Test workflow’**  
    - Type: Manual Trigger  
    - Role: Entry point to start the workflow on demand.  
    - Configuration: Default manual trigger with no parameters.  
    - Inputs: None  
    - Outputs: Triggers two parallel branches: "HTML to PDF" and "Code" nodes.  
    - Edge Cases: None typical; user must trigger manually.  
    - Version: v1  

---

#### 2.2 HTML to PDF Conversion Block

- **Overview:**  
  Converts static HTML content into a PDF document using the CustomJS API.

- **Nodes Involved:**  
  - HTML to PDF  
  - Convert PDF into Text

- **Node Details:**

  - **HTML to PDF**  
    - Type: CustomJS PDF Toolkit - html2Pdf node  
    - Role: Converts provided HTML string into a PDF file.  
    - Configuration:  
      - `htmlInput`: Hardcoded HTML string `<h1>Hello World</h1>`.  
      - Credentials: CustomJS API key required for authentication.  
    - Inputs: Triggered by Manual Trigger node.  
    - Outputs: PDF binary data passed to "Convert PDF into Text" node.  
    - Edge Cases:  
      - HTML input must be valid; malformed HTML may produce unexpected PDFs.  
      - API key must be valid; authentication errors possible.  
      - Network or API timeouts may occur.  
    - Version: v1  

  - **Convert PDF into Text**  
    - Type: CustomJS PDF Toolkit - PdfToText node  
    - Role: Extracts textual content from the PDF generated by the previous node.  
    - Configuration: Default, no additional parameters.  
    - Inputs: Receives PDF binary data from "HTML to PDF" node.  
    - Outputs: Extracted text as JSON output.  
    - Edge Cases:  
      - PDF must be valid; corrupted PDFs may cause extraction failure.  
      - API key authentication required.  
      - Network or API errors possible.  
    - Version: v1  

---

#### 2.3 URL-based PDF Text Extraction Block

- **Overview:**  
  Handles PDF files accessible via URLs by passing the URL to the CustomJS API to extract text directly.

- **Nodes Involved:**  
  - Code  
  - Convert PDF into Text1

- **Node Details:**

  - **Code**  
    - Type: n8n Code node (JavaScript)  
    - Role: Provides a JSON object containing the PDF URL to be processed.  
    - Configuration:  
      - JavaScript code returns:  
        ```js
        return {
          json: {
            path: "https://www.nlbk.niedersachsen.de/download/164891/Test-pdf_3.pdf.pdf"
          }
        };
        ```  
      - This sets the `path` field to the URL of the PDF file.  
    - Inputs: Triggered by Manual Trigger node.  
    - Outputs: JSON object with `path` property.  
    - Edge Cases:  
      - URL must be accessible and point to a valid PDF file.  
      - Network issues or URL inaccessibility will cause failures downstream.  
    - Version: v2  

  - **Convert PDF into Text1**  
    - Type: CustomJS PDF Toolkit - PdfToText node  
    - Role: Extracts text from the PDF located at the URL provided by the Code node.  
    - Configuration:  
      - `resource`: Set to `"url"` to indicate input is a URL.  
      - `field_name`: Expression `={{ $json.path }}` dynamically reads the URL from the incoming JSON.  
      - Credentials: CustomJS API key required.  
    - Inputs: Receives JSON with URL from Code node.  
    - Outputs: Extracted text as JSON.  
    - Edge Cases:  
      - URL must be reachable and point to a valid PDF.  
      - API key and network connectivity required.  
      - Timeout or invalid URL errors possible.  
    - Version: v1  

---

### 3. Summary Table

| Node Name               | Node Type                                   | Functional Role                          | Input Node(s)               | Output Node(s)               | Sticky Note                                                                                              |
|-------------------------|---------------------------------------------|----------------------------------------|-----------------------------|-----------------------------|--------------------------------------------------------------------------------------------------------|
| When clicking ‘Test workflow’ | Manual Trigger                             | Starts workflow manually                | None                        | HTML to PDF, Code           |                                                                                                        |
| HTML to PDF             | CustomJS PDF Toolkit - html2Pdf              | Converts HTML to PDF                    | When clicking ‘Test workflow’ | Convert PDF into Text        |                                                                                                        |
| Convert PDF into Text    | CustomJS PDF Toolkit - PdfToText             | Extracts text from generated PDF       | HTML to PDF                 | None                        |                                                                                                        |
| Code                    | n8n Code node                                | Provides PDF URL for text extraction   | When clicking ‘Test workflow’ | Convert PDF into Text1       |                                                                                                        |
| Convert PDF into Text1   | CustomJS PDF Toolkit - PdfToText             | Extracts text from PDF at URL           | Code                        | None                        |                                                                                                        |

---

### 4. Reproducing the Workflow from Scratch

1. **Create Manual Trigger Node**  
   - Add a **Manual Trigger** node named "When clicking ‘Test workflow’".  
   - No special configuration needed.

2. **Create HTML to PDF Node**  
   - Add a **CustomJS PDF Toolkit - html2Pdf** node named "HTML to PDF".  
   - Set `htmlInput` parameter to `<h1>Hello World</h1>`.  
   - Configure credentials: Select or create CustomJS API credentials with your API key.  
   - Connect output of "When clicking ‘Test workflow’" to input of "HTML to PDF".

3. **Create Convert PDF into Text Node (for generated PDF)**  
   - Add a **CustomJS PDF Toolkit - PdfToText** node named "Convert PDF into Text".  
   - Use default parameters (no resource or field_name override).  
   - Configure credentials: Use same CustomJS API credentials.  
   - Connect output of "HTML to PDF" node to input of "Convert PDF into Text".

4. **Create Code Node (to provide PDF URL)**  
   - Add a **Code** node named "Code".  
   - Set language to JavaScript (v2).  
   - Enter code:  
     ```js
     return {
       json: {
         path: "https://www.nlbk.niedersachsen.de/download/164891/Test-pdf_3.pdf.pdf"
       }
     };
     ```  
   - Connect output of "When clicking ‘Test workflow’" node to input of "Code".

5. **Create Convert PDF into Text Node (for URL PDF)**  
   - Add a **CustomJS PDF Toolkit - PdfToText** node named "Convert PDF into Text1".  
   - Set `resource` parameter to `"url"`.  
   - Set `field_name` parameter to expression: `={{ $json.path }}` to dynamically read URL from incoming JSON.  
   - Configure credentials: Use same CustomJS API credentials.  
   - Connect output of "Code" node to input of "Convert PDF into Text1".

6. **Verify Credentials**  
   - Ensure CustomJS API credentials are configured in n8n with a valid API key obtained from https://www.customjs.space.  
   - Credentials must be assigned to all CustomJS nodes.

7. **Save and Activate Workflow**  
   - Save the workflow and activate it if desired.  
   - Run manually via the Manual Trigger node to test.

---

### 5. General Notes & Resources

| Note Content                                                                                          | Context or Link                                                                                      |
|-----------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| Community nodes like CustomJS PDF Toolkit require self-hosted n8n instances to be installed.        | https://www.npmjs.com/package/@custom-js/n8n-nodes-pdf-toolkit                                      |
| Obtain CustomJS API key by signing up at https://www.customjs.space and navigating to profile page.| https://www.customjs.space                                                                          |
| Replace Manual Trigger with Webhook node to automate triggering and returning results programmatically.| Workflow design suggestion from original description                                                |
| Example PDF URL used in Code node: https://www.nlbk.niedersachsen.de/download/164891/Test-pdf_3.pdf.pdf | Used for demonstration of URL-based PDF text extraction                                             |

---

This document fully describes the workflow "Convert HTML to PDF & Extract Text from PDFs with CustomJS API" to enable understanding, reproduction, and modification.