{"id":"ioofAvQkygfyHxOd","meta":{"instanceId":"be7665cef51b13547e586e0f385e42416ebee48719c71d7dc7c03dbdf41fc246"},"name":"Automatically resolve tickets with coding agents","tags":[],"nodes":[{"id":"b406b9a3-85af-4f5e-960a-8f105fba2406","name":"Parse Port AI response","type":"CUSTOM.portIo","position":[-720,128],"parameters":{"operation":"getInvocation","invocationId":"={{ $json.invocationIdentifier }}"},"credentials":{"portIoApi":{"id":"vphYNYaTZimXT7su","name":"Port.io account"}},"typeVersion":1},{"id":"595d2b11-2e6b-4e50-b871-64a5d8dfffcc","name":"Is issue creation successful?","type":"n8n-nodes-base.if","position":[-304,128],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"ded3f45f-fd63-493a-a5fc-225004d5d292","operator":{"type":"number","operation":"notEmpty","singleValue":true},"leftValue":"={{ $json.number }}","rightValue":""}]}},"typeVersion":2.2},{"id":"a905b89a-606e-487f-80e3-c3f825550184","name":"Extract context from Port","type":"CUSTOM.portIo","position":[-928,128],"parameters":{"tools":"[\"^(list|get|search|track|describe)_.*\"]","operation":"generalInvoke","userPrompt":"=A Jira issue has moved to In Progress.\n\nIssue Details:\n- Key: {{ $json.issue.key }}\n- Title: {{ $json.issue.fields.summary }}\n- Type: {{ $json.issue.fields.issuetype.name }}\n- Description: {{ $json.issue.fields.description }}\n\nJira Project:\n- Key/Name: {{ $json.issue.fields.project.key }} / {{ $json.issue.fields.project.name }}\n\nYour task:\nQuery the Port catalog across services, repositories, teams, architecture, documentation, cloud resources, workloads, internal docs, READMEs, and dependencies.  \nExtract ONLY the contextual information that actually exists in the catalog and that is directly relevant to this Jira issue.\n\nThen create:\n1. A GitHub issue title that starts with the Jira key.\n2. A GitHub issue body that:\n   - Summarizes the Jira description in clear developer-friendly language.\n   - Incorporates any relevant Port context found.\n   - Is fully self-contained.\n   - Ends with the directive:\n\n     @github-copilot please begin working on this issue.\n\nOutput format:\nReturn ONLY the following JSON object:\n\n{\n  \"github_issue_title\": \"\",\n  \"github_issue_body\": \"\"\n}\n\nRules:\n- If no relevant context exists, leave the string empty (\"\").\n- Do NOT include explanations, reasoning, commentary, assumptions, or URLs.\n- Do NOT mention things you did not find.\n- Do NOT return any text outside the JSON object.\n","generalModel":"gpt-5","systemPrompt":"You are a helpful assistant","generalProvider":"port"},"credentials":{"portIoApi":{"id":"vphYNYaTZimXT7su","name":"Port.io account"}},"typeVersion":1},{"id":"c3809188-d14d-4c33-89a3-086ca097f880","name":"Is ready for assignment?","type":"n8n-nodes-base.if","position":[-1200,144],"parameters":{"options":{},"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"8800068e-ddaa-4979-a589-6442f424bb09","operator":{"type":"boolean","operation":"true","singleValue":true},"leftValue":"={{ $json.webhookEvent == \"jira:issue_updated\" && $json.issue.fields.status.name == \"In Progress\" && $json.issue.fields.labels.includes(\"product_approved\") && !$json.issue.fields.labels.includes(\"copilot_assigned\") }}","rightValue":""}]}},"typeVersion":2.2},{"id":"2cbdb130-79fa-4885-a106-53234c467681","name":"Create a GitHub issue","type":"n8n-nodes-base.github","position":[-512,128],"webhookId":"7115b4e9-ca3d-4dbc-8b1b-8e00931a26f8","parameters":{"body":"={{ $json.result.message.parseJson().github_issue_body }}","owner":{"__rl":true,"mode":"url","value":"https://github.com/ORG"},"title":"={{ $json.result.message.parseJson().github_issue_title }}","labels":[{"label":"n8n"},{"label":"ai-workflow"}],"assignees":[],"repository":{"__rl":true,"mode":"list","value":"REPO","cachedResultUrl":"https://github.com/ORG/REPO","cachedResultName":"REPO"}},"credentials":{"githubApi":{"id":"zs106oTl3aX0eWI1","name":"GitHub account"}},"typeVersion":1.1},{"id":"0f0de120-9f27-4d06-958e-8b87b91a0487","name":"Assign issue to Copilot","type":"n8n-nodes-base.github","position":[-96,128],"webhookId":"87254a3f-ea48-432e-9fd2-897cf9b58143","parameters":{"body":"@copilot please take ownership of this issue and begin working on a solution.\n\nUse the information in the issue body and title to propose and implement the necessary code changes.\n","owner":{"__rl":true,"mode":"url","value":"https://github.com/ORG"},"operation":"createComment","repository":{"__rl":true,"mode":"list","value":"REPO","cachedResultUrl":"https://github.com/ORG/REPO","cachedResultName":"REPO"},"issueNumber":"={{ $('Create a GitHub issue').item.json.number }}"},"credentials":{"githubApi":{"id":"zs106oTl3aX0eWI1","name":"GitHub account"}},"typeVersion":1.1},{"id":"128e81aa-0607-4204-8f7a-1999f7690eed","name":"Add issue link to Jira ticket","type":"n8n-nodes-base.jira","position":[208,0],"parameters":{"comment":"=We've created an issue at {{ $json.issue_url }} and assigned it to Copilot.","options":{},"issueKey":"={{ $('Webhook').item.json.issue.key }}","resource":"issueComment"},"credentials":{"jiraSoftwareCloudApi":{"id":"FcPOq6LRxRxgY0PY","name":"Jira SW Cloud account"}},"typeVersion":1},{"id":"f424eb13-155c-411e-80b6-5abdc04b60c9","name":"Mark ticket as assigned","type":"n8n-nodes-base.jira","position":[208,240],"parameters":{"issueKey":"={{ $('Webhook').item.json.issue.key }}","operation":"update","updateFields":{"labels":"={{ $('Webhook').item.json.issue.fields.labels.concat('copilot_assigned') }}"}},"credentials":{"jiraSoftwareCloudApi":{"id":"FcPOq6LRxRxgY0PY","name":"Jira SW Cloud account"}},"typeVersion":1},{"id":"3e0414e9-faf5-45ba-bd1e-995d9506a39c","name":"On Jira ticket updated","type":"n8n-nodes-base.jiraTrigger","position":[-1424,144],"webhookId":"9cdd8662-169f-4aae-b30f-d02d9666fce7","parameters":{"events":["jira:issue_updated"],"additionalFields":{}},"credentials":{"jiraSoftwareCloudApi":{"id":"FcPOq6LRxRxgY0PY","name":"Jira SW Cloud account"}},"typeVersion":1.1},{"id":"5badbf3d-1732-480f-bb83-26ec01fbdb33","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-2016,-176],"parameters":{"width":512,"height":672,"content":"## Auto-resolve Jira tickets with coding agents\n\nImprove issue resolution by assigning Jira tickets to coding agents with full operational context from Port, ensuring faster, accurate, and context-aware development\n\n### How it works\n1. Listen for Jira ticket updates and detect when an issue moves to \\\"In Progress\\\" with the label product_approved and without copilot_assigned.\n2. Query the Port catalog to extract only contextual information relevant to the Jira issue (services, repos, docs, resources, dependencies).\n3. Generate a concise GitHub issue title and a self-contained issue body that summarizes the Jira description and includes any found Port context.\n4. Create the GitHub issue in the target repository and post a comment that requests Copilot to take ownership.\n5. Write the GitHub link back to the Jira ticket and add the copilot_assigned label so the ticket is marked as handled.\n\n### Setup\n- [ ] Connect your Jira Cloud account and enable issue_updated events\n- [ ] Register for free on [Port.io](https://www.port.io)\n- [ ]  Connect your Port.io account and add the API key\n- [ ] Connect your GitHub account and select the target repository\n- [ ] Ensure a Copilot bot or @copilot user has access to the repository\n- [ ] Confirm the workflow webhook or Jira trigger URL is active\n- [ ] Test by moving a product_approved ticket to In Progress"},"typeVersion":1},{"id":"840ffdbb-f4c2-4ed2-ab9e-f756efde12e9","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-976,-160],"parameters":{"color":6,"width":400,"height":560,"content":"## Port Context Lake\n\nTo extract contextual information relevant to the Jira issue (services, repos, docs, resources, dependencies)."},"typeVersion":1},{"id":"4f389694-ed4b-448c-8a88-724c6cd66635","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[-544,-160],"parameters":{"color":4,"width":592,"height":560,"content":"## Github Copilot Assignment\n\nTo assign a ticket to Copilot, we first create a GitHub issue and then add a @copilot comment to the GitHub issue instructing Copilot to take ownership."},"typeVersion":1},{"id":"e71ebc42-20b1-4095-aed7-9e7fbe731d8f","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[80,-160],"parameters":{"color":5,"width":464,"height":560,"content":"## Jira Ticket Linkage\n\nTo ensure that any new Github issue related to a Jira ticket is promptly linked back to the ticket in a comment, providing clear traceability and context for development progress."},"typeVersion":1}],"active":false,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"7f20c404-39e1-42e4-a7dd-5b6e217d9f24","connections":{"Create a GitHub issue":{"main":[[{"node":"Is issue creation successful?","type":"main","index":0}]]},"On Jira ticket updated":{"main":[[{"node":"Is ready for assignment?","type":"main","index":0}]]},"Parse Port AI response":{"main":[[{"node":"Create a GitHub issue","type":"main","index":0}]]},"Assign issue to Copilot":{"main":[[{"node":"Add issue link to Jira ticket","type":"main","index":0},{"node":"Mark ticket as assigned","type":"main","index":0}]]},"Is ready for assignment?":{"main":[[{"node":"Extract context from Port","type":"main","index":0}]]},"Extract context from Port":{"main":[[{"node":"Parse Port AI response","type":"main","index":0}]]},"Is issue creation successful?":{"main":[[{"node":"Assign issue to Copilot","type":"main","index":0}]]}}}