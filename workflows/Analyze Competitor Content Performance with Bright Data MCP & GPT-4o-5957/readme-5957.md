Analyze Competitor Content Performance with Bright Data MCP & GPT-4o

https://n8nworkflows.xyz/workflows/analyze-competitor-content-performance-with-bright-data-mcp---gpt-4o-5957


# Analyze Competitor Content Performance with Bright Data MCP & GPT-4o

### 1. Workflow Overview

This workflow automates the process of analyzing competitor blog content performance using Bright Data MCP (Massive Client Platform) scraping combined with GPT-4o AI analysis. The core purpose is to scrape real-time competitor data, generate actionable insights using AI, and send professional improvement suggestions via email â€” all without manual effort.

It is structured into three major logical blocks:

- **1.1 Trigger & Input:** Manual start of the workflow with user-provided competitor URLs or blog tags to analyze.
- **1.2 AI Analysis & Scraping:** The heart of the workflow, where competitor data is scraped using Bright Data MCP and analyzed by GPT-4o-powered AI agents to identify content strengths and gaps, preparing a formatted email.
- **1.3 Send Email:** Automatically sends the AI-generated insights as a professional email to a specified recipient using Gmail.

---

### 2. Block-by-Block Analysis

#### 1.1 Trigger & Input

**Overview:**  
This section initializes the workflow, allowing manual execution and input of competitor URLs or tags to analyze.

**Nodes Involved:**  
- âš¡ Start: Execute Workflow  
- ğŸ“ Input: Competitor Details  

**Node Details:**

- **âš¡ Start: Execute Workflow**  
  - Type: Manual Trigger  
  - Role: Entry point to trigger workflow execution on demand.  
  - Config: No parameters; user manually clicks â€œExecute Workflowâ€ to start.  
  - Inputs: None  
  - Outputs: Passes control to Input node  
  - Failures: None expected; manual trigger  

- **ğŸ“ Input: Competitor Details**  
  - Type: Set Node  
  - Role: Provides input data for competitor URLs or tags.  
  - Config: Hardcoded string field `url` with example value `"https://medium.com/?tag=technology"`; can be extended with additional fields.  
  - Inputs: From Start node  
  - Outputs: Supplies input JSON with competitor URL for downstream use  
  - Failures: None unless misconfigured; no dynamic input validation here  

---

#### 1.2 AI Analysis & Scraping

**Overview:**  
This is the core processing block. It uses an AI agent node that orchestrates calls to the MCP scraper for blog data, OpenAIâ€™s GPT-4o model for insight generation, and structured output parsing to produce a clean JSON suited for email delivery.

**Nodes Involved:**  
- ğŸ¤– AI Agent: Analyze Content  
- ğŸ’¬ OpenAI: Generate Insights  
- ğŸŒ MCP Scraper: Get Blog Data  
- Auto-fixing Output Parser  
- OpenAI Chat Model  
- Structured Output Parser  

**Node Details:**

- **ğŸ¤– AI Agent: Analyze Content**  
  - Type: LangChain AI Agent Node  
  - Role: Controls the workflowâ€™s AI orchestration, integrating scraping and analysis.  
  - Config: Prompt includes scraping instructions with competitor URL input (`{{ $json.url }}`) to scrape stats and draft an email suggesting improvements. Uses output parser to format results.  
  - Inputs: Receives competitor URL from Input node  
  - Outputs: Produces JSON containing email subject and body  
  - Failures: Potential timeout if scraping or AI calls lag; expression errors if `url` field missing; API quota or auth errors with OpenAI or MCP  
  - Sub-Workflow: Internally uses calls to OpenAI and MCP nodes  

- **ğŸ’¬ OpenAI: Generate Insights**  
  - Type: LangChain OpenAI Chat Node  
  - Role: Generates textual insights analyzing competitor content gaps and strengths.  
  - Config: Uses GPT-4o-mini model; no extra options set.  
  - Credentials: Requires valid OpenAI API key  
  - Inputs: Invoked by AI Agent  
  - Outputs: Textual AI output for parsing  
  - Failures: API quota limits, network issues, or invalid credentials  

- **ğŸŒ MCP Scraper: Get Blog Data**  
  - Type: Bright Data MCP Client Tool Node  
  - Role: Scrapes competitor blog data (traffic, publish dates, titles) as markdown.  
  - Config: Tool named `scrape_as_markdown`, parameters dynamically generated by AI override expression.  
  - Credentials: MCP Client API credentials required  
  - Inputs: Invoked by AI Agent as AI tool  
  - Outputs: Raw scrape data for AI analysis  
  - Failures: Proxy or anti-bot blocks, timeout, credential expiry, malformed parameters  

- **Auto-fixing Output Parser**  
  - Type: LangChain Output Parser Autofixing Node  
  - Role: Cleans and corrects AI outputs to conform to expected JSON format for email content.  
  - Inputs: Connected downstream of OpenAI Chat Model and Structured Output Parser  
  - Outputs: Corrected parsed JSON for AI Agent  
  - Failures: Parsing errors if AI output deviates strongly from schema  

- **OpenAI Chat Model**  
  - Type: LangChain OpenAI Chat Node (supporting chaining)  
  - Role: Provides chat model interface for AI Agent internal use.  
  - Config: GPT-4o-mini model with standard options  
  - Credentials: OpenAI API key  
  - Inputs: Feeds into Auto-fixing Output Parser  
  - Outputs: AI raw textual responses  
  - Failures: API/credential errors, rate limits  

- **Structured Output Parser**  
  - Type: LangChain Structured Output Parser Node  
  - Role: Defines JSON schema example for email subject and body to parse AI responses into structured data.  
  - Inputs: Feeds into Auto-fixing Output Parser  
  - Outputs: Parsed JSON object with email keys  
  - Failures: Schema mismatch or malformed AI output  

---

#### 1.3 Send Email

**Overview:**  
This block sends an automated email with the AI-generated suggestions to the client using Gmail with OAuth2 authentication.

**Nodes Involved:**  
- ğŸ“§ Send Email: Client Suggestions  

**Node Details:**

- **ğŸ“§ Send Email: Client Suggestions**  
  - Type: Gmail Node  
  - Role: Sends the final email with subject and body from AI output.  
  - Config:  
    - Recipient: `shahkar.genai@gmail.com` (can be changed)  
    - Subject and message content dynamically bound to AI output JSON keys (`{{ $json.output.email.subject }}`, `{{ $json.output.email.body }}`)  
    - Email type: Plain text  
  - Credentials: Gmail OAuth2 account required  
  - Inputs: Receives JSON email content from AI Agent output  
  - Outputs: Email send confirmation  
  - Failures: OAuth token expiry, Gmail API limits, invalid recipient address  

---

### 3. Summary Table

| Node Name                      | Node Type                               | Functional Role                             | Input Node(s)                 | Output Node(s)                  | Sticky Note                                                                                                                     |
|-------------------------------|---------------------------------------|---------------------------------------------|------------------------------|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| âš¡ Start: Execute Workflow     | Manual Trigger                        | Manual workflow start                       | None                         | ğŸ“ Input: Competitor Details    | This node waits for you to click â€œExecute Workflow.â€ Itâ€™s like a start button.                                                  |
| ğŸ“ Input: Competitor Details   | Set Node                             | Provides competitor URL input               | âš¡ Start                      | ğŸ¤– AI Agent: Analyze Content    | Manually enter competitor blog URLs or tags for flexible input.                                                                |
| ğŸ¤– AI Agent: Analyze Content   | LangChain AI Agent                   | Orchestrates scraping & AI analysis        | ğŸ“ Input, Auto-fixing Output Parser | ğŸ“§ Send Email: Client Suggestions | Connects to OpenAI, MCP scraper, and output parser to generate email content.                                                  |
| ğŸ’¬ OpenAI: Generate Insights   | LangChain OpenAI Chat                | Generates textual insights                   | Invoked by AI Agent          | AI Agent (indirect)             | Uses GPT-4o-mini to find strengths and gaps in competitor content.                                                             |
| ğŸŒ MCP Scraper: Get Blog Data  | Bright Data MCP Client Tool           | Scrapes competitor blog data                 | Invoked by AI Agent          | AI Agent (indirect)             | Pulls real traffic numbers and page details using proxies and anti-bot tech.                                                   |
| Auto-fixing Output Parser      | LangChain Output Parser Autofixing   | Cleans AI output into structured JSON       | OpenAI Chat Model, Structured Output Parser | ğŸ¤– AI Agent: Analyze Content | Ensures AI output matches expected JSON format with subject and body.                                                          |
| OpenAI Chat Model              | LangChain OpenAI Chat                | Chat model backend for AI Agent              | -                            | Auto-fixing Output Parser       | Uses GPT-4o-mini model.                                                                                                         |
| Structured Output Parser       | LangChain Structured Output Parser   | Defines JSON schema for email output         | -                            | Auto-fixing Output Parser       | Parses AI output into JSON with email subject and body keys.                                                                   |
| ğŸ“§ Send Email: Client Suggestions | Gmail Node                          | Sends email with AI suggestions              | ğŸ¤– AI Agent: Analyze Content  | None                          | Sends structured email to client automatically via Gmail OAuth2.                                                               |

---

### 4. Reproducing the Workflow from Scratch

1. **Create Manual Trigger Node:**  
   - Add a Manual Trigger node called `âš¡ Start: Execute Workflow`. No extra configuration required. This node triggers the workflow manually.

2. **Create Set Node for Input:**  
   - Add a Set node named `ğŸ“ Input: Competitor Details`.  
   - Add a string field `url` with default value (e.g.) `https://medium.com/?tag=technology`.  
   - Connect `âš¡ Start: Execute Workflow` â†’ `ğŸ“ Input: Competitor Details`.

3. **Create LangChain AI Agent Node:**  
   - Add LangChain AI Agent node named `ğŸ¤– AI Agent: Analyze Content`.  
   - Configure prompt to scrape stats from `{{ $json.url }}` and write an email suggesting improvements.  
   - Enable output parser.  
   - Connect `ğŸ“ Input: Competitor Details` â†’ `ğŸ¤– AI Agent: Analyze Content`.

4. **Add MCP Client Tool Node:**  
   - Add MCP Client Tool node named `ğŸŒ MCP Scraper: Get Blog Data`.  
   - Set toolName to `scrape_as_markdown`.  
   - For toolParameters, use an expression placeholder to be overridden by the AI Agent (e.g., `={{ $fromAI(...) }}`).  
   - Configure MCP Client API credentials.  
   - Connect this node as an AI tool node invoked by `ğŸ¤– AI Agent: Analyze Content` (in AI tool input).

5. **Add OpenAI Nodes:**  
   - Add LangChain OpenAI Chat node `ğŸ’¬ OpenAI: Generate Insights` with GPT-4o-mini model, linked as AI language model input to the AI Agent node.  
   - Add another LangChain OpenAI Chat node `OpenAI Chat Model` (GPT-4o-mini) used internally and connected to output parsers.

6. **Add Output Parsers:**  
   - Add `Structured Output Parser` node with a JSON schema example defining the `email.subject` and `email.body` fields.  
   - Add `Auto-fixing Output Parser` node to clean AI output.  
   - Connect `OpenAI Chat Model` and `Structured Output Parser` â†’ `Auto-fixing Output Parser`.  
   - Connect `Auto-fixing Output Parser` output as AI output parser input for `ğŸ¤– AI Agent: Analyze Content`.

7. **Create Gmail Node to Send Email:**  
   - Add Gmail node named `ğŸ“§ Send Email: Client Suggestions`.  
   - Set recipient email (e.g. `shahkar.genai@gmail.com`).  
   - Set subject and message using expressions:  
     - Subject: `={{ $json.output.email.subject }}`  
     - Message: `={{ $json.output.email.body }}`  
   - Use Gmail OAuth2 credentials.  
   - Connect `ğŸ¤– AI Agent: Analyze Content` â†’ `ğŸ“§ Send Email: Client Suggestions`.

8. **Verify Credentials:**  
   - Ensure valid OpenAI API credentials are set for LangChain nodes.  
   - Ensure valid Bright Data MCP Client API credentials are configured.  
   - Ensure Gmail OAuth2 credentials are properly set and authorized.

9. **Test Workflow:**  
   - Manually trigger the workflow.  
   - Check that scraping, AI analysis, parsing, and email sending execute without errors.

---

### 5. General Notes & Resources

| Note Content                                                                                                         | Context or Link                                                     |
|----------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
| Workflow automates competitor blog scraping, AI-driven content gap analysis, and email reporting with no code needed.| Branding and general description                                   |
| Add emojis ğŸ“ ğŸ¤– ğŸ’¬ ğŸŒ ğŸ—‚ï¸ ğŸ“§ to node names in n8n to improve readability and clarity at a glance.                      | Workflow design tip                                                |
| Bright Data MCP uses advanced proxy and anti-bot tech to deliver real-time scrape data without manual effort.         | Integration detail                                                |
| Gmail node requires OAuth2 credentials; ensure token validity to avoid send failures.                                 | Credential management                                             |
| Contact Yaron@nofluff.online for workflow assistance; see YouTube and LinkedIn channels for more tips.                 | Support and learning resources                                    |
| Affiliate link for Bright Data MCP: https://get.brightdata.com/1tndi4600b25                                           | Affiliate disclosure and link                                     |

---

**Disclaimer:**  
This document is based exclusively on an automated n8n workflow. All data processed are legal and publicly accessible, and the workflow complies with content policies.