Archive trending TikTok hashtags using TikTok, Airtable, and Apify

https://n8nworkflows.xyz/workflows/archive-trending-tiktok-hashtags-using-tiktok--airtable--and-apify-6536


# Archive trending TikTok hashtags using TikTok, Airtable, and Apify

### 1. Workflow Overview

This workflow automates the monthly archival of trending TikTok hashtags by scraping TikTok data via Apify, processing it, and storing the results in Airtable. It is designed for social media managers, marketers, and analysts seeking to track and analyze hashtag trends over time.

**Logical Blocks:**

- **1.1 Scheduled Trigger:** Automatically initiates the workflow on a monthly interval.
- **1.2 TikTok Hashtag Scraping:** Runs an Apify Actor to scrape the top 100 trending TikTok hashtags for a specified country.
- **1.3 Data Retrieval:** Retrieves the scraped hashtag data from the Apify dataset.
- **1.4 Data Processing:** Splits the dataset into individual hashtag records.
- **1.5 Data Archival:** Saves each hashtag record into an Airtable base with key metrics and metadata.

---

### 2. Block-by-Block Analysis

#### 1.1 Scheduled Trigger

- **Overview:**  
  This block initiates the workflow automatically once every month, ensuring regular data updates without manual intervention.

- **Nodes Involved:**  
  - Start: Monthly Schedule

- **Node Details:**

  - **Start: Monthly Schedule**  
    - Type & Role: Schedule Trigger node that activates the workflow based on a time interval.  
    - Configuration: Set to trigger every month (field `"months"` in interval).  
    - Expressions/Variables: None.  
    - Input Connections: None (entry point).  
    - Output Connections: Connected to "1. Run TikTok Hashtag Scraper".  
    - Version Requirements: Compatible with n8n versions supporting scheduleTrigger v1.2.  
    - Potential Failures: Misconfigured schedule; system time issues.  
    - Sub-Workflow: None.

#### 1.2 TikTok Hashtag Scraping

- **Overview:**  
  Executes an Apify Actor to scrape TikTok’s top 100 trending hashtags for a specified country (default US) over a 30-day period.

- **Nodes Involved:**  
  - 1. Run TikTok Hashtag Scraper

- **Node Details:**

  - **1. Run TikTok Hashtag Scraper**  
    - Type & Role: Apify node running an external actor (tiktok-trending-hashtags-analytics) to scrape data.  
    - Configuration:  
      - Actor ID: `iegmveuLh4C0XH7Hc` (TikTok trending hashtags analytics).  
      - Custom body JSON configures:  
        - country: `"US"`  
        - result_type: `"top100"`  
        - top100_new_on_board: `false`  
        - top100_period: `"30"` (days)  
      - Max items: 100  
    - Expressions/Variables: CustomBody uses static JSON; dataset ID retrieved dynamically in next node.  
    - Input Connections: From schedule trigger.  
    - Output Connections: To "2. Get Scraped Hashtag Data".  
    - Credentials: Requires Apify API credentials (configured).  
    - Potential Failures: API authentication errors, actor execution failures, rate limits, network timeouts.  
    - Sub-Workflow: None.

#### 1.3 Data Retrieval

- **Overview:**  
  Fetches the dataset generated by the Apify Actor containing the scraped hashtag metrics.

- **Nodes Involved:**  
  - 2. Get Scraped Hashtag Data

- **Node Details:**

  - **2. Get Scraped Hashtag Data**  
    - Type & Role: Apify node retrieving dataset items from the actor run output.  
    - Configuration:  
      - Operation: Get items from dataset.  
      - Dataset ID: Dynamically obtained from previous node’s JSON output (`{{$json.data.defaultDatasetId}}`).  
      - Clean: true (removes empty fields).  
    - Expressions/Variables: Dataset ID expression critical for dynamic retrieval.  
    - Input Connections: From "1. Run TikTok Hashtag Scraper".  
    - Output Connections: To "3. Split Hashtags into Items".  
    - Credentials: Apify API credentials reused.  
    - Potential Failures: Dataset ID missing or invalid, API auth errors, empty datasets.  
    - Sub-Workflow: None.

#### 1.4 Data Processing

- **Overview:**  
  Splits the single dataset array into individual hashtag records for downstream processing.

- **Nodes Involved:**  
  - 3. Split Hashtags into Items

- **Node Details:**

  - **3. Split Hashtags into Items**  
    - Type & Role: SplitOut node that converts one item containing multiple hashtags into multiple single items.  
    - Configuration: Field to split out is `data` (which contains the array of hashtags).  
    - Expressions/Variables: None.  
    - Input Connections: From "2. Get Scraped Hashtag Data".  
    - Output Connections: To "4. Save Hashtag to Airtable".  
    - Potential Failures: Missing or malformed `data` field; empty arrays causing no output.  
    - Sub-Workflow: None.

#### 1.5 Data Archival

- **Overview:**  
  Saves each individual hashtag item into Airtable with structured fields such as ID, Name, Rank, Country, Industry, Date Added, Video Views, Publish Count, and Status.

- **Nodes Involved:**  
  - 4. Save Hashtag to Airtable

- **Node Details:**

  - **4. Save Hashtag to Airtable**  
    - Type & Role: Airtable node that creates new records in a specified base and table.  
    - Configuration:  
      - Base: Airtable base named "Creative Ideation" (ID: appwEOGxCbXgEGwjT)  
      - Table: "Trending Hashtags"  
      - Operation: Create new record per item  
      - Columns mapped explicitly with expressions pulling data from JSON fields:  
        - ID: `{{$json.hashtag_id}}`  
        - Name: `{{$json.hashtag_name}}`  
        - Rank: `{{$json.rank}}`  
        - Status: Static value `"Added"`  
        - Country: `{{$json.country_info.value}}`  
        - Industry: `{{$json.industry_info.value}}`  
        - Date Added: Current timestamp (`{{$now}}`)  
        - Video Views: `{{$json.video_views}}`  
        - Publish Count: `{{$json.publish_cnt}}`  
      - Typecasting enabled for numeric fields.  
    - Expressions/Variables: As above, dynamic extraction from JSON input.  
    - Input Connections: From "3. Split Hashtags into Items".  
    - Output Connections: None (terminal node).  
    - Credentials: Airtable Personal Access Token configured.  
    - Potential Failures: API auth errors, rate limits, schema mismatch, missing required fields, network errors.  
    - Sub-Workflow: None.

---

### 3. Summary Table

| Node Name                   | Node Type               | Functional Role                       | Input Node(s)               | Output Node(s)                | Sticky Note                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|-----------------------------|-------------------------|------------------------------------|-----------------------------|------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Start: Monthly Schedule      | Schedule Trigger        | Initiates workflow monthly          | —                           | 1. Run TikTok Hashtag Scraper |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 1. Run TikTok Hashtag Scraper | Apify                   | Runs Apify actor to scrape hashtags | Start: Monthly Schedule      | 2. Get Scraped Hashtag Data   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 2. Get Scraped Hashtag Data  | Apify                   | Retrieves scraped dataset            | 1. Run TikTok Hashtag Scraper | 3. Split Hashtags into Items  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 3. Split Hashtags into Items | SplitOut                | Splits dataset into individual records | 2. Get Scraped Hashtag Data  | 4. Save Hashtag to Airtable   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 4. Save Hashtag to Airtable  | Airtable                | Saves each hashtag record to Airtable | 3. Split Hashtags into Items | —                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Sticky Note                 | Sticky Note             | Provides comprehensive documentation | —                           | —                            | ## Archive Trending TikTok Hashtags to Airtable with Apify\nThis template uses a community node (`@apify/n8n-nodes-apify`). It will not work without the required node installed.\n\n### Who it's for\n**Social Media Managers & Content Creators**\nDiscover relevant hashtags and build content calendars based on real trends.\n**Marketing & Brand Strategists**\nTrack cultural shifts and find opportunities by understanding regional audience interests.\n**Data Analysts**\nCreate a dataset for analyzing hashtag trends, virality, and performance over time.\n\n### What it does\nThis workflow automates trend discovery and data collection from TikTok into Airtable.\n* **Schedule**: Triggers automatically once a month.\n* **Scrape**: Runs an Apify Actor to scrape TikTok’s top 100 trending hashtags for a specified country (default is US).\n* **Retrieve**: Fetches the dataset with hashtag metrics after scraping completes.\n* **Process & Load**: Splits the dataset and saves each hashtag as a new record in Airtable with relevant details.\n\n### How to set it up\n**1. Install the Community Node**\nGo to `Settings > Community Nodes` on your n8n instance and install `@apify/n8n-nodes-apify`.\n\n**2. Prepare Airtable**\nCreate a base with a table named `Trending Hashtags`:\n* ID\n* Name\n* Country\n* Industry\n* Date Added\n* Publish Count\n* Video Views\n* Rank\n* Status\n\n\n**3. Add Credentials**\nAdd your Apify and Airtable credentials in n8n.\n\n**4. Configure Scraper (Optional)**\nOpen the `1. Run TikTok Hashtag Scraper` node.\nIn the **Custom Body**, you can adjust:\n  * `country_code` (e.g., `\"US\"` to `\"GB\"`)\n  * `top100_period` (e.g., `\"30\"` to `\"7\"`)\n\n\n**5. Configure Airtable Node**\nOpen the `4. Save Hashtag to Airtable` node.\nSelect the correct Airtable Base and the `Trending Hashtags` table.\n\n**6. Activate Workflow**\nSave and activate the workflow. It will now run automatically every month.\n\n### Requirements\n* Installed community node: `@apify/n8n-nodes-apify`\n* Apify account\n* Airtable account with a structured base\n\n### How to customize the workflow\n**Change Schedule**\nModify the `Start: Monthly Schedule` node to run weekly or on another interval.\n**Add Notifications**\nAttach a Slack or Discord node after the `4. Save Hashtag to Airtable` node to alert your team when new data is added.\n**Filter Hashtags**\nUse a `Filter` node after `3. Split Hashtags into Items` to only save hashtags that meet specific conditions (e.g., over 1M video views). |

---

### 4. Reproducing the Workflow from Scratch

1. **Create a New Workflow in n8n.**

2. **Add Schedule Trigger Node:**  
   - Node Type: Schedule Trigger  
   - Name: `Start: Monthly Schedule`  
   - Set interval to trigger every month (field: months).  
   - No credentials required.

3. **Add Apify Node to Run TikTok Hashtag Scraper:**  
   - Node Type: Apify  
   - Name: `1. Run TikTok Hashtag Scraper`  
   - Credentials: Configure Apify API credentials (Personal API token).  
   - Operation: Run Actor  
   - Actor ID: `iegmveuLh4C0XH7Hc` (TikTok trending hashtags analytics)  
   - Custom Body (JSON):  
     ```json
     {
       "country": "US",
       "result_type": "top100",
       "top100_new_on_board": false,
       "top100_period": "30"
     }
     ```  
   - Max Items: 100  
   - Connect output of `Start: Monthly Schedule` to this node’s input.

4. **Add Apify Node to Get Scraped Hashtag Data:**  
   - Node Type: Apify  
   - Name: `2. Get Scraped Hashtag Data`  
   - Credentials: Use same Apify API credentials.  
   - Operation: Get Items from Dataset  
   - Dataset ID: Use expression to fetch from previous node output: `{{$json.data.defaultDatasetId}}`  
   - Clean data option enabled.  
   - Connect output of `1. Run TikTok Hashtag Scraper` to this node.

5. **Add Split Out Node to Split Hashtags:**  
   - Node Type: SplitOut  
   - Name: `3. Split Hashtags into Items`  
   - Field to Split Out: `data` (the array containing hashtag objects)  
   - Connect output of `2. Get Scraped Hashtag Data` to this node.

6. **Add Airtable Node to Save Hashtag Records:**  
   - Node Type: Airtable  
   - Name: `4. Save Hashtag to Airtable`  
   - Credentials: Configure Airtable Personal Access Token with required permissions.  
   - Base: Select or enter the Airtable Base ID for your "Creative Ideation" base.  
   - Table: Select or enter the `Trending Hashtags` table.  
   - Operation: Create Record  
   - Map fields explicitly with expressions from the incoming JSON:  
     - ID: `{{$json.hashtag_id}}`  
     - Name: `{{$json.hashtag_name}}`  
     - Rank: `{{$json.rank}}`  
     - Status: Static value `"Added"`  
     - Country: `{{$json.country_info.value}}`  
     - Industry: `{{$json.industry_info.value}}`  
     - Date Added: Use expression `{{$now}}` for current timestamp  
     - Video Views: `{{$json.video_views}}`  
     - Publish Count: `{{$json.publish_cnt}}`  
   - Enable typecasting to correctly store numeric values.  
   - Connect output of `3. Split Hashtags into Items` to this node.

7. **Save and Activate the Workflow.**

---

### 5. General Notes & Resources

| Note Content                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Context or Link                                                                                                                                                                |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| This template uses a community node (`@apify/n8n-nodes-apify`). It will not work without the required node installed. Install it via `Settings > Community Nodes` in n8n.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Installation requirement for Apify node: https://docs.n8n.io/nodes/community-nodes/#apify                                                                                      |
| Prepare Airtable with a base named "Creative Ideation" and a table "Trending Hashtags" with columns: ID, Name, Country, Industry, Date Added, Publish Count, Video Views, Rank, Status.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Airtable base structure requirement                                                                                                                                           |
| Customize scraper parameters in the "1. Run TikTok Hashtag Scraper" node by modifying the JSON body, e.g., changing `"country"` to `"GB"` or `"top100_period"` to `"7"`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Allows regional or temporal customization for hashtag data                                                                                                                    |
| Consider adding notification nodes such as Slack or Discord after Airtable node to alert when new data is saved. Also, a Filter node can be added after splitting hashtags to selectively save records based on criteria (e.g., video views > 1 million).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Workflow extensibility suggestions                                                                                                                                             |
| Workflow requires valid Apify and Airtable accounts with appropriate API permissions.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Credential prerequisites                                                                                                                                                        |

---

**Disclaimer:** The provided content is exclusively generated from an automated n8n workflow. It complies strictly with content policies and contains no illegal, offensive, or protected elements. All data processed is legal and publicly available.