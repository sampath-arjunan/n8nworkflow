Nano Banana/Gemini 2.5 Telegram Bot with Multi-modal Functionality

https://n8nworkflows.xyz/workflows/nano-banana-gemini-2-5-telegram-bot-with-multi-modal-functionality-8734


# Nano Banana/Gemini 2.5 Telegram Bot with Multi-modal Functionality

---
### 1. Workflow Overview

This workflow implements a sophisticated Telegram bot named **Nano Banana/Gemini 2.5 Telegram Bot with Multi-modal Functionality**. Its purpose is to interact with users via Telegram, handling multiple input types‚Äîtext, images, voice messages, and PDF documents‚Äîand to provide AI-powered responses or content generation.

The workflow‚Äôs core use cases are:
- Text-based interaction with an AI prompt design agent specialized in image generation.
- Image analysis with detailed descriptions generated by an advanced AI.
- Voice message transcription to text for further AI processing.
- PDF document content extraction and description.
- AI-assisted image generation using Google Gemini 2.5 Flash Image (Nano Banana API).

The workflow is logically divided into these functional blocks:

- **1.1 Telegram Input Reception and Initial Processing:** Captures Telegram messages and determines their type.
- **1.2 File Handling and Preprocessing:** Downloads and extracts content from images, audio, and PDF files.
- **1.3 AI Analysis and Transcription:** Uses OpenAI models to transcribe audio and analyze images.
- **1.4 Conversational AI Agent:** A dual-model agent using GPT-5-mini and Gemini 2.5 to manage dialog, generate prompts, and handle image generation commands.
- **1.5 Image Generation Pipeline:** Sends optimized prompts to the Nano Banana API, converts the output for Telegram, and sends back generated images.
- **1.6 Output Delivery:** Sends text or photo responses back to Telegram users.
- **1.7 Error and Format Handling:** Manages unsupported file types and sends appropriate feedback.

---

### 2. Block-by-Block Analysis

#### 1.1 Telegram Input Reception and Initial Processing

**Overview:**  
This block triggers on all incoming Telegram messages, extracts user info and message content, and routes the flow based on message type (text, image, audio, or document).

**Nodes Involved:**  
- Telegram Trigger  
- Set Initial Data  
- Switch  

**Node Details:**

- **Telegram Trigger**  
  - Type: Telegram Trigger (Webhook)  
  - Role: Entry point receiving Telegram messages (text, photo, voice, documents).  
  - Configuration: Watches for "message" updates, enables file downloads.  
  - Input: Incoming Telegram webhook data.  
  - Output: JSON with message content and metadata.  
  - Failure cases: Webhook misconfiguration, credential errors, network issues.  

- **Set Initial Data**  
  - Type: Set node  
  - Role: Extracts `userTelegramId` and `messageBody` from incoming message JSON.  
  - Configuration: Sets variables from Telegram data (user ID, text or fallback to media placeholder).  
  - Input: Telegram Trigger output.  
  - Output: JSON with simplified user ID and text variables.  
  - Edge cases: Missing text or media data, undefined message fields.  

- **Switch**  
  - Type: Switch  
  - Role: Routes based on message content type: Text, Photo, Audio, Document.  
  - Configuration: Checks existence of message.text, message.photo, message.voice, message.document fields.  
  - Input: Set Initial Data output.  
  - Output: Branches to different processing nodes depending on type.  
  - Edge cases: Messages with multiple media types or unsupported types may be misrouted.  

---

#### 1.2 File Handling and Preprocessing

**Overview:**  
Downloads files from Telegram servers for images, audio, and documents; extracts text from PDFs.

**Nodes Involved:**  
- Get Image Url  
- Analyze Image  
- Get Audio Url  
- Download Audio  
- Transcribe Audio  
- Only PDF File (If node)  
- Get File Url  
- Download File  
- Extract from File  

**Node Details:**

- **Get Image Url**  
  - Type: HTTP Request  
  - Role: Retrieves the file path URL for the highest resolution photo from Telegram API.  
  - Configuration: Uses Telegram API `getFile` with file_id from photo array.  
  - Input: Switch node‚Äôs Photo output.  
  - Output: JSON containing file path for image download.  
  - Edge cases: Invalid file ID, Telegram API errors, quota limits.  

- **Analyze Image**  
  - Type: OpenAI Image Analysis node (Langchain openAi)  
  - Role: Uses GPT-4o-mini model to generate detailed image descriptions.  
  - Configuration: Custom prompt instructs AI to analyze and describe images thoroughly.  
  - Input: Image URL constructed from Telegram file path.  
  - Output: Text description of image content.  
  - Edge cases: Blurry or low-res images, sensitive content, API timeout or quota issues.  

- **Get Audio Url**  
  - Type: HTTP Request  
  - Role: Retrieves file path URL for voice messages.  
  - Configuration: Telegram API `getFile` with voice file_id.  
  - Input: Switch node‚Äôs Audio output.  
  - Output: JSON with file path.  
  - Edge cases: Missing voice message, file access errors.  

- **Download Audio**  
  - Type: HTTP Request  
  - Role: Downloads voice message audio file using obtained URL.  
  - Configuration: Uses generic HTTP header authentication (Slack ZEP credentials).  
  - Input: Get Audio Url output.  
  - Output: Binary audio data.  
  - Edge cases: Network errors, incorrect auth, large file size.  

- **Transcribe Audio**  
  - Type: OpenAI Audio Transcription (Langchain openAi)  
  - Role: Converts audio file to text using OpenAI Whisper.  
  - Configuration: Defaults to Whisper model transcription.  
  - Input: Download Audio output.  
  - Output: Transcribed text string.  
  - Edge cases: Noisy audio, unsupported formats, API errors.  

- **Only PDF File**  
  - Type: If node  
  - Role: Checks if the incoming document‚Äôs MIME type is "application/pdf".  
  - Configuration: Strict equality check on MIME type.  
  - Input: Switch node‚Äôs Document output.  
  - Output: True branch for PDF, False branch for error handling.  
  - Edge cases: Other document types trigger error path.  

- **Get File Url**  
  - Type: HTTP Request  
  - Role: Retrieves file path URL for the document from Telegram API.  
  - Configuration: Uses Telegram API `getFile` with document file_id.  
  - Input: Only PDF File (True branch).  
  - Output: JSON with file path.  
  - Edge cases: File not found, invalid file ID.  

- **Download File**  
  - Type: HTTP Request  
  - Role: Downloads the PDF document using the file path.  
  - Configuration: Standard HTTP GET, no special auth.  
  - Input: Get File Url output.  
  - Output: Binary PDF data.  
  - Edge cases: Large file, corrupted download.  

- **Extract from File**  
  - Type: Extract From File  
  - Role: Extracts text content from PDF binary data.  
  - Configuration: Operation set to PDF extraction.  
  - Input: Download File output.  
  - Output: Extracted text content from PDF.  
  - Edge cases: Poorly formatted PDFs, encrypted documents.  

---

#### 1.3 AI Analysis and Transcription Output Preparation

**Overview:**  
Prepares extracted or transcribed text for the AI conversational agent, setting textual context for different media types.

**Nodes Involved:**  
- Text  
- Audio  
- Image  
- File  

**Node Details:**

- **Text**  
  - Type: Set  
  - Role: Sets a variable `text` holding the user‚Äôs text message and userId.  
  - Configuration: Assigns `text` and `userId` from incoming JSON.  
  - Input: Switch node‚Äôs Text output.  
  - Output: JSON with `text` and `userId`.  
  - Edge cases: Empty or invalid text.  

- **Audio**  
  - Type: Set  
  - Role: Sets `text` variable from transcribed audio text.  
  - Input: Transcribe Audio output.  
  - Output: JSON with `text` for agent.  
  - Edge cases: Transcription failure results in empty text or errors.  

- **Image**  
  - Type: Set  
  - Role: Constructs descriptive text combining user‚Äôs image request and AI-generated image description.  
  - Configuration: Concatenates caption or default prompt with AI image description content.  
  - Input: Analyze Image output.  
  - Output: JSON text containing user request and detailed image description.  
  - Edge cases: Missing captions or incomplete description.  

- **File**  
  - Type: Set  
  - Role: Constructs descriptive text combining user‚Äôs file request and extracted file text.  
  - Input: Extract from File output.  
  - Output: JSON text with user request and extracted file content.  
  - Edge cases: Empty or failed extraction.  

---

#### 1.4 Conversational AI Agent

**Overview:**  
Manages user dialogues and image generation prompt creation using two AI models and session memory for context retention.

**Nodes Involved:**  
- Generator Agent  
- Simple Memory  
- gpt-5-mini  
- gemini-2.5-flash  
- Fix JSON Output  
- Image Generation Ready?  

**Node Details:**

- **Simple Memory**  
  - Type: Memory Buffer Window (Langchain)  
  - Role: Maintains conversation context per user (last 10 messages).  
  - Configuration: Uses Telegram user ID as session key.  
  - Input: Output from Telegram Trigger (via Set nodes).  
  - Output: Context-enhanced input for Agent node.  
  - Edge cases: Session overflow, lost context between restarts.  

- **gpt-5-mini**  
  - Type: OpenAI Chat node  
  - Role: Primary AI model for reasoning and prompt design.  
  - Configuration: Uses GPT-5-mini model with default options.  
  - Input: Feeds into Generator Agent as one of two models.  
  - Output: Processed AI response.  
  - Edge cases: API limits, slow response.  

- **gemini-2.5-flash**  
  - Type: Google Gemini Chat node  
  - Role: Secondary AI model for fallback and comparison.  
  - Configuration: Uses Google Gemini model with default options.  
  - Input: Alternative to GPT-5-mini for prompts.  
  - Output: AI response for agent.  
  - Edge cases: API quota, latency.  

- **Generator Agent**  
  - Type: Langchain Agent node  
  - Role: Orchestrates conversation and prompt creation using both AI models and memory.  
  - Configuration: Implements advanced prompt engineering for image generation, remembers previous prompts for modification commands, and outputs in specific formats.  
  - Input: Text from Set nodes (Text, Audio, Image, File), memory context, and AI model outputs.  
  - Output: Raw AI output string, potentially commands or image generation prompts.  
  - Edge cases: Misinterpretation of user requests, output format errors.  

- **Fix JSON Output**  
  - Type: Code node  
  - Role: Parses agent output, distinguishes between text replies and image generation commands.  
  - Configuration: Checks if output starts with "READY_TO_GENERATE", extracts prompt accordingly; else treats as text response.  
  - Input: Generator Agent output.  
  - Output: JSON with `type` and either `text` or `prompt`.  
  - Edge cases: Unexpected output formats, missing keywords.  

- **Image Generation Ready?**  
  - Type: Switch  
  - Role: Routes output either to image generation flow or text message sending.  
  - Configuration: Checks `type` field for "image" or "text".  
  - Input: Fix JSON Output.  
  - Outputs:  
    - Image ‚Üí Nano Banana API node  
    - Text ‚Üí Send Text Message node  
  - Edge cases: Unknown types, empty output.  

---

#### 1.5 Image Generation Pipeline

**Overview:**  
Sends optimized prompts to Google Gemini 2.5 Flash Image API (Nano Banana), converts returned base64 image data to binary, and sends the image back to Telegram.

**Nodes Involved:**  
- Nano Banana API  
- Convert Image to Binary  
- Send a photo message  

**Node Details:**

- **Nano Banana API**  
  - Type: HTTP Request  
  - Role: Sends prompt to Gemini 2.5 Flash Image generation endpoint.  
  - Configuration: POST JSON with prompt in request body, authenticates using HTTP header with API key.  
  - Input: Image prompt from Image Generation Ready? switch.  
  - Output: JSON containing image data encoded in base64.  
  - Edge cases: API quota, invalid prompt, network errors.  

- **Convert Image to Binary**  
  - Type: Code node  
  - Role: Extracts base64 image data from Nano Banana response, converts to binary for Telegram.  
  - Configuration: Searches for inlineData in response, converts to Buffer with MIME type image/jpeg.  
  - Input: Nano Banana API output.  
  - Output: Binary data ready for Telegram photo send.  
  - Edge cases: Missing image data, conversion errors.  

- **Send a photo message**  
  - Type: Telegram node  
  - Role: Sends generated image as photo message to Telegram user.  
  - Configuration: Sends binary data from previous node as photo to user chat ID.  
  - Input: Convert Image to Binary output.  
  - Output: Confirmation of Telegram message sent.  
  - Edge cases: Telegram API errors, large image data, network issues.  

---

#### 1.6 Output Delivery

**Overview:**  
Sends AI-generated text responses back to Telegram users.

**Nodes Involved:**  
- Send Text Message  

**Node Details:**

- **Send Text Message**  
  - Type: Telegram node  
  - Role: Sends textual AI responses to the user on Telegram.  
  - Configuration: Sends message text, uses HTML parse mode, disables auto-attribution.  
  - Input: Image Generation Ready? switch (Text output branch).  
  - Output: Confirmation of message sent.  
  - Edge cases: Message length limits, Telegram API errors.  

---

#### 1.7 Error and Format Handling

**Overview:**  
Detects unsupported document types and informs users.

**Nodes Involved:**  
- Incorrect format  

**Node Details:**

- **Incorrect format**  
  - Type: Telegram node  
  - Role: Sends a message to the user indicating only PDF files are accepted.  
  - Configuration: Static text response, uses chat ID from Telegram Trigger node.  
  - Input: Only PDF File (False branch).  
  - Output: Telegram message informing about incorrect file type.  
  - Edge cases: Users sending unsupported file types repeatedly.  

---

### 3. Summary Table

| Node Name           | Node Type                                  | Functional Role                          | Input Node(s)                    | Output Node(s)                 | Sticky Note                                                                                                   |
|---------------------|--------------------------------------------|----------------------------------------|---------------------------------|-------------------------------|--------------------------------------------------------------------------------------------------------------|
| Telegram Trigger     | Telegram Trigger                           | Entry webhook for Telegram messages    | -                               | Set Initial Data               | üöÄ TELEGRAM TRIGGER: Receives all Telegram messages, downloads media, routes by type                         |
| Set Initial Data     | Set                                        | Extract userId and messageBody         | Telegram Trigger                | Switch                        | üöÄ TELEGRAM TRIGGER: Prepares basic variables for routing                                                    |
| Switch              | Switch                                     | Routes message by content type          | Set Initial Data                | Text, Get Image Url, Get Audio Url, Only PDF File | üöÄ TELEGRAM TRIGGER: Branches workflow by message type                                                     |
| Text                | Set                                        | Prepare text messages for AI agent      | Switch (Text)                  | Generator Agent               | ## Text                                                                                                      |
| Get Image Url        | HTTP Request                               | Retrieve Telegram image file path       | Switch (Photo)                 | Analyze Image                 | ## Image                                                                                                     |
| Analyze Image        | OpenAI Image Analysis (Langchain)          | Generate detailed image description     | Get Image Url                  | Image                        | ## Image                                                                                                     |
| Image               | Set                                        | Combine user prompt and image description | Analyze Image                  | Generator Agent               | ## Image                                                                                                     |
| Get Audio Url        | HTTP Request                               | Retrieve Telegram voice file path       | Switch (Audio)                 | Download Audio                | ## Voice                                                                                                     |
| Download Audio       | HTTP Request                               | Download voice audio file                | Get Audio Url                  | Transcribe Audio             | ## Voice                                                                                                     |
| Transcribe Audio     | OpenAI Audio Transcription (Langchain)     | Convert audio to text                    | Download Audio                 | Audio                        | ## Voice                                                                                                     |
| Audio               | Set                                        | Prepare transcribed text for AI agent   | Transcribe Audio               | Generator Agent               | ## Voice                                                                                                     |
| Only PDF File        | If                                         | Check if document MIME type is PDF      | Switch (Document)              | Get File Url, Incorrect format | ## Document                                                                                                  |
| Get File Url         | HTTP Request                               | Retrieve Telegram document file path    | Only PDF File (True)           | Download File                | ## Document                                                                                                  |
| Download File        | HTTP Request                               | Download PDF document                    | Get File Url                  | Extract from File            | ## Document                                                                                                  |
| Extract from File    | Extract From File                          | Extract text content from PDF            | Download File                 | File                         | ## Document                                                                                                  |
| File                | Set                                        | Combine user prompt and extracted text  | Extract from File              | Generator Agent               | ## Document                                                                                                  |
| Generator Agent      | Langchain Agent                           | Core conversational and prompt agent    | Text, Audio, Image, File       | Fix JSON Output              | ü§ñ DUAL-MODEL GENERATOR AGENT: Handles conversation, prompt engineering, remembers previous prompts          |
| Simple Memory        | Langchain Memory Buffer Window             | Maintains conversation context          | Telegram Trigger              | Generator Agent              | ü§ñ DUAL-MODEL GENERATOR AGENT: Maintains 10-message chat memory per user                                     |
| gpt-5-mini           | OpenAI Chat Model                         | Primary AI reasoning model               | Generator Agent (ai_languageModel) | Generator Agent              | ü§ñ DUAL-MODEL GENERATOR AGENT: Primary AI model for reasoning                                               |
| gemini-2.5-flash     | Google Gemini Chat Model                  | Secondary AI fallback model              | Generator Agent (ai_languageModel) | Generator Agent              | ü§ñ DUAL-MODEL GENERATOR AGENT: Fallback/comparison AI model                                                |
| Fix JSON Output      | Code                                       | Parses AI output into actionable JSON   | Generator Agent              | Image Generation Ready?       | üì§ INTELLIGENT OUTPUT HANDLER: Distinguishes text vs. image commands                                        |
| Image Generation Ready? | Switch                                  | Routes AI output to image or text flow  | Fix JSON Output               | Nano Banana API, Send Text Message | üì§ INTELLIGENT OUTPUT HANDLER: Branches to image generation or text response                                |
| Nano Banana API      | HTTP Request                               | Sends prompt to Gemini 2.5 image API    | Image Generation Ready? (Image) | Convert Image to Binary      | üé® NANO BANANA IMAGE PIPELINE: Calls Google Gemini 2.5 Flash Image generation API                            |
| Convert Image to Binary | Code                                     | Converts base64 image data to binary    | Nano Banana API               | Send a photo message          | üé® NANO BANANA IMAGE PIPELINE: Converts API output for Telegram delivery                                    |
| Send a photo message | Telegram                                   | Sends generated image to user           | Convert Image to Binary       | -                            | üé® NANO BANANA IMAGE PIPELINE: Delivers generated images to Telegram user                                   |
| Send Text Message    | Telegram                                   | Sends AI-generated text response        | Image Generation Ready? (Text) | -                            | üì§ INTELLIGENT OUTPUT HANDLER: Sends text responses to Telegram users                                       |
| Incorrect format     | Telegram                                   | Notifies users about unsupported files  | Only PDF File (False)         | -                            | ## Document: Alerts user that only PDF files are accepted                                                  |

---

### 4. Reproducing the Workflow from Scratch

1. **Create Telegram Trigger node**  
   - Type: Telegram Trigger  
   - Configure webhook with your Telegram bot credentials.  
   - Enable ‚ÄúDownload‚Äù option to automatically download media files.  
   - Set update types to listen for `message`.  

2. **Add Set Initial Data node**  
   - Type: Set  
   - Extract:  
     - `userTelegramId` = `{{$json.message.from.id}}`  
     - `messageBody` = `{{$json.message.text || ($json.message.photo ? '[Image]' : '[Media]')}}`  
   - Connect Telegram Trigger output to this node.  

3. **Add Switch node**  
   - Type: Switch  
   - Create rules for outputs:  
     - Text: message.text exists  
     - Photo: message.photo exists  
     - Audio: message.voice exists  
     - Document: message.document exists  
   - Connect Set Initial Data output to Switch input.  

4. **Text Branch:**  
   - Add a Set node named "Text"  
     - Set `text` = `{{$json.text}}`  
   - Connect Switch Text output to this node.  

5. **Photo Branch:**  
   - Add HTTP Request node "Get Image Url"  
     - URL: `https://api.telegram.org/bot<YOUR_TOKEN>/getFile`  
     - Query Parameters: file_id = last element of `message.photo` array's `file_id`  
   - Connect Switch Photo output to this node.  
   - Add OpenAI Image Analysis node "Analyze Image"  
     - Model: `gpt-4o-mini`  
     - Resource: image  
     - Operation: analyze  
     - Image URL: Construct from Telegram file path in Get Image Url response  
     - Custom prompt to describe images in detail (as in original).  
   - Connect Get Image Url to Analyze Image.  
   - Add Set node "Image"  
     - Compose `text` with user image request + AI image description.  
   - Connect Analyze Image to Set Image.  

6. **Audio Branch:**  
   - Add HTTP Request node "Get Audio Url"  
     - URL: Telegram `getFile` API with voice file_id  
   - Connect Switch Audio output to this node.  
   - Add HTTP Request node "Download Audio"  
     - URL constructed from Telegram file path from Get Audio Url  
     - Use generic HTTP header authentication with your credentials.  
   - Connect Get Audio Url to Download Audio.  
   - Add OpenAI Audio Transcription node "Transcribe Audio"  
     - Resource: audio  
     - Operation: transcribe  
   - Connect Download Audio to Transcribe Audio.  
   - Add Set node "Audio"  
     - Set `text` = transcribed audio text.  
   - Connect Transcribe Audio to Audio.  

7. **Document Branch:**  
   - Add If node "Only PDF File"  
     - Condition: `message.document.mime_type` equals `application/pdf` (strict)  
   - Connect Switch Document output to this node.  
   - Add HTTP Request "Get File Url"  
     - URL: Telegram `getFile` API with document file_id  
   - Connect Only PDF File True output to Get File Url.  
   - Add HTTP Request "Download File"  
     - URL constructed from Telegram file path  
   - Connect Get File Url to Download File.  
   - Add Extract From File node  
     - Operation: PDF extraction  
   - Connect Download File to Extract From File.  
   - Add Set node "File"  
     - Compose `text` = user file request + extracted text content.  
   - Connect Extract From File to File.  
   - Add Telegram node "Incorrect format"  
     - Text: "Sorry but you can only send PDF files"  
     - Chat ID from Telegram Trigger user id  
   - Connect Only PDF File False output to Incorrect format.  

8. **Connect all Set nodes (Text, Audio, Image, File) to Generator Agent node**  
   - Add Langchain Agent node "Generator Agent"  
     - Set with prompt and system message configured for expert prompt design assistant specialized in Nano Banana image generation.  
     - Enable memory support.  
   - Connect Simple Memory node to Generator Agent as memory buffer:  
     - Session key: Telegram user ID  
     - Context window length: 10 messages  
   - Connect gpt-5-mini and gemini-2.5-flash AI model nodes to Generator Agent as primary and fallback models.  

9. **Add Code node "Fix JSON Output"**  
   - Parses agent output string:  
     - If output starts with "READY_TO_GENERATE", extract prompt and set type "image".  
     - Else set type "text" with output text.  
   - Connect Generator Agent output to this node.  

10. **Add Switch node "Image Generation Ready?"**  
    - Branch on `type` field: "image" or "text".  
    - Connect Fix JSON Output output to this node.  

11. **Image branch:**  
    - Add HTTP Request node "Nano Banana API"  
      - POST to Nano Banana Gemini 2.5 Flash Image generation endpoint.  
      - Body JSON with prompt from Fix JSON Output.  
      - Authenticate with HTTP header API key.  
    - Connect Image Generation Ready? Image output to this node.  
    - Add Code node "Convert Image to Binary"  
      - Convert base64 image data from Nano Banana API response to binary buffer.  
    - Connect Nano Banana API output to this node.  
    - Add Telegram node "Send a photo message"  
      - Send photo binary data to Telegram user.  
    - Connect Convert Image to Binary output to this node.  

12. **Text branch:**  
    - Add Telegram node "Send Text Message"  
      - Send text message to Telegram user from Fix JSON Output text.  
    - Connect Image Generation Ready? Text output to this node.  

13. **Add Sticky Notes for documentation** (optional but recommended)  
    - Group nodes by functional blocks for clarity.  

14. **Configure all credentials:**  
    - Telegram API credential with bot token.  
    - OpenAI API credential with API key.  
    - Google Gemini API credential using HTTP Header Auth with API key.  
    - Generic HTTP header auth credential for audio download if needed.  

15. **Test end-to-end:**  
    - Send text, image, voice, and PDF messages to bot.  
    - Verify correct AI responses and generated images.  

---

### 5. General Notes & Resources

| Note Content | Context or Link |
|--------------|-----------------|
| Workflow uses GPT-4o-mini for image analysis and Whisper for audio transcription via OpenAI. | Node "Analyze Image", "Transcribe Audio" |
| Dual AI Models: GPT-5-mini (primary) and Google Gemini 2.5 Flash (fallback) power the conversational agent. | Node "Generator Agent", Sticky Note5 |
| Nano Banana API: Google Gemini 2.5 Flash Image model used for image generation, costing ~$0.04 per image. | Node "Nano Banana API", Sticky Note7 |
| Telegram Bot Setup: Create bot via @BotFather, disable privacy, set webhook pointing to n8n. | Sticky Note8 |
| OpenAI API Setup: Obtain API keys, enable billing, use GPT and Whisper models. | Sticky Note8 |
| Google Gemini API Setup: Obtain API key from Google AI Studio for Nano Banana model. | Sticky Note8 |
| Important: Update all Telegram API file URLs with your bot token. | Sticky Note8 |
| AI Agent prompt engineering includes memory of previous prompts for image modification commands. | Node "Generator Agent" parameters |
| Error Handling: Users sending non-PDF documents receive a polite rejection message. | Node "Incorrect format" |
| Workflow respects content policies by providing objective image descriptions without judgment. | Node "Analyze Image" prompt |

---

This document provides a detailed, structured reference of the entire Nano Banana/Gemini 2.5 Telegram Bot workflow, enabling advanced users and AI agents to understand, reproduce, and modify the system confidently.