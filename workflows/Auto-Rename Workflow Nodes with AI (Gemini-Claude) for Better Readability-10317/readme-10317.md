Auto-Rename Workflow Nodes with AI (Gemini/Claude) for Better Readability

https://n8nworkflows.xyz/workflows/auto-rename-workflow-nodes-with-ai--gemini-claude--for-better-readability-10317


# Auto-Rename Workflow Nodes with AI (Gemini/Claude) for Better Readability

### 1. Workflow Overview

This workflow automates the process of improving the readability and maintainability of n8n workflows by renaming nodes with concise, meaningful titles generated by AI models (Google Gemini or Anthropic Claude). It ingests an existing workflow JSON, analyzes each node’s function and context, proposes new names through AI, applies the new names while updating all internal references, and finally creates and activates a renamed copy of the original workflow.

The workflow is logically divided into the following blocks:

- **1.1 Input & Setup:** Manual trigger, suffix setting, and retrieval of the target workflow JSON.
- **1.2 AI Name Generation:** Sending the workflow JSON to AI models to get proposed new node names.
- **1.3 Response Parsing:** Structuring the AI response JSON for further processing.
- **1.4 Applying Names:** Parsing the AI output and updating node names and all related references in the workflow JSON.
- **1.5 Workflow Copy & Activation:** Creating a new workflow copy with updated names, deactivating the old workflow, and activating the renamed copy.
- **1.6 Auxiliary:** Sticky note with workflow description and instructions for user guidance.

---

### 2. Block-by-Block Analysis

#### 2.1 Input & Setup

- **Overview:**  
  This block handles the manual start of the process, sets a suffix for the renamed workflow’s title, and fetches the JSON of the workflow to be renamed.

- **Nodes Involved:**  
  - Start Workflow Manually  
  - Set Renamed Workflow Suffix  
  - Get Current Workflow JSON

- **Node Details:**

  - **Start Workflow Manually**  
    - *Type:* Manual Trigger  
    - *Role:* Entry point to start the renaming process on demand.  
    - *Config:* No parameters; manual trigger initiates workflow.  
    - *Connections:* Outputs to “Set Renamed Workflow Suffix”.  
    - *Failure Modes:* None typical; user must trigger manually.

  - **Set Renamed Workflow Suffix**  
    - *Type:* Set Node  
    - *Role:* Assigns a string suffix appended to the renamed workflow’s name to distinguish it.  
    - *Config:* Sets variable `workflowNameSuffix` = `" - new node names"`.  
    - *Connections:* Outputs to “Get Current Workflow JSON”.  
    - *Failure Modes:* None typical.

  - **Get Current Workflow JSON**  
    - *Type:* n8n API node  
    - *Role:* Retrieves the full JSON data of the workflow targeted for renaming.  
    - *Config:* Operation "get" with a workflow ID hardcoded or selected.  
    - *Connections:* Outputs to “AI Generate Name Suggestions”.  
    - *Credentials:* Requires valid n8n API credentials with read access.  
    - *Failure Modes:* Authentication failures, invalid workflow ID, API timeouts.

---

#### 2.2 AI Name Generation

- **Overview:**  
  Sends the current workflow JSON and a detailed prompt to an AI language model to generate concise, meaningful node name suggestions.

- **Nodes Involved:**  
  - AI Generate Name Suggestions  
  - Claude Sonnet AI Model  
  - Gemini AI Model  
  - Parse JSON Response Structure

- **Node Details:**

  - **AI Generate Name Suggestions**  
    - *Type:* Langchain Chain LLM Node  
    - *Role:* Sends the workflow JSON as text input with a carefully crafted prompt to AI to produce a JSON array mapping old node names to new concise names.  
    - *Config:* Uses a prompt specifying role, task, constraints (unique, short, no emojis), and output format. Incorporates the JSON string of the workflow (supplied dynamically).  
    - *Connections:* Input from “Get Current Workflow JSON”; output to “Apply Names and Update References”.  
    - *Failure Modes:* Timeout, API rate limits, prompt parsing errors, malformed AI output.

  - **Claude Sonnet AI Model**  
    - *Type:* Langchain OpenRouter Chat Model  
    - *Role:* One of two interchangeable AI backends for name generation. Uses Anthropic Claude Sonnet model with temperature 0 (deterministic).  
    - *Config:* Requires OpenRouter API credentials.  
    - *Connections:* Outputs parsed AI response to “AI Generate Name Suggestions” node’s AI language model input.  
    - *Failure Modes:* API authentication errors, rate limiting.

  - **Gemini AI Model**  
    - *Type:* Langchain Google Gemini Chat Model  
    - *Role:* Alternative AI backend option to Claude Sonnet for generating name suggestions.  
    - *Config:* Uses Google Gemini “flash” model. Requires Google Palm API credentials.  
    - *Connections:* Outputs parsed AI response to “Parse JSON Response Structure”.  
    - *Failure Modes:* API key issues, quota limits.

  - **Parse JSON Response Structure**  
    - *Type:* Langchain Structured Output Parser  
    - *Role:* Parses AI output string into a structured JSON array with fields `originalName` and `newName`. Auto-fix enabled to correct minor formatting issues.  
    - *Config:* Input schema manually defined, expecting array of objects with required string properties.  
    - *Connections:* Takes AI response output, sends structured data to “AI Generate Name Suggestions” for processing.  
    - *Failure Modes:* Parsing failures if AI output deviates significantly from schema.

---

#### 2.3 Applying Names

- **Overview:**  
  This code node processes the AI-generated name mappings, updates the node names in the original workflow JSON, and fixes all references to nodes within expressions and connections. It prepares a fully updated workflow JSON for duplication.

- **Nodes Involved:**  
  - Apply Names and Update References

- **Node Details:**

  - **Apply Names and Update References**  
    - *Type:* Code Node (JavaScript)  
    - *Role:*  
      - Extracts name mappings from AI output.  
      - Replaces node names in the nodes array.  
      - Updates connection references to renamed nodes.  
      - Recursively updates any string expressions referencing nodes (e.g., `$(`, `$items(`).  
      - Builds the final updated workflow JSON object, appending the suffix to the name.  
    - *Key Logic:*  
      - Uses regex to parse names from AI output properties.  
      - Deeply updates all node properties for references via regex replacements.  
      - Preserves original workflow settings (executionOrder, timezone, errorWorkflow) and tags.  
    - *Connections:* Outputs updated workflow JSON to “Create New Workflow Copy”.  
    - *Failure Modes:*  
      - Parsing errors if AI output JSON is malformed.  
      - Regex replacement edge cases with unusual node name characters.  
      - Unhandled reference formats in expressions might remain outdated.

---

#### 2.4 Workflow Copy & Activation

- **Overview:**  
  This block creates a new workflow in n8n from the updated JSON, deactivates the old workflow, and activates the newly created renamed workflow.

- **Nodes Involved:**  
  - Create New Workflow Copy  
  - Deactivate Old Workflow  
  - Activate Renamed Workflow

- **Node Details:**

  - **Create New Workflow Copy**  
    - *Type:* n8n API node  
    - *Role:* Creates a new workflow using the updated JSON from the previous step.  
    - *Config:* Operation “create” with workflow JSON as stringified input.  
    - *Credentials:* Requires n8n API credentials with workflow creation permissions.  
    - *Connections:* On success, triggers “Deactivate Old Workflow”.  
    - *Failure Modes:* Permission errors, API issues, invalid workflow JSON.

  - **Deactivate Old Workflow**  
    - *Type:* n8n API node  
    - *Role:* Deactivates the original workflow to prevent parallel execution.  
    - *Config:* Operation “deactivate” targeting the original workflow ID dynamically from “Get Current Workflow JSON”.  
    - *On Error:* “continueRegularOutput” to ensure activation still runs.  
    - *Connections:* On success, triggers “Activate Renamed Workflow”.  
    - *Failure Modes:* Workflow not found, API errors, permission issues.

  - **Activate Renamed Workflow**  
    - *Type:* n8n API node  
    - *Role:* Activates the newly created workflow copy with renamed nodes.  
    - *Config:* Operation “activate” on the new workflow ID from “Create New Workflow Copy”.  
    - *Credentials:* Requires appropriate API permissions.  
    - *Failure Modes:* Activation errors, permission denials.

---

#### 2.5 Auxiliary

- **Overview:**  
  Provides user instructions and context with a sticky note node for documentation and guidance.

- **Nodes Involved:**  
  - Workflow Description Note

- **Node Details:**

  - **Workflow Description Note**  
    - *Type:* Sticky Note  
    - *Role:* Contains a markdown-formatted description, usage instructions, and credits.  
    - *Config:* Size set to 672x320 px, content includes workflow purpose, steps to use, and branding (“UpFastAI - Automating Intelligence”).  
    - *Failure Modes:* None (visual aid only).

---

### 3. Summary Table

| Node Name                 | Node Type                             | Functional Role                          | Input Node(s)                  | Output Node(s)                 | Sticky Note                                                                                       |
|---------------------------|-------------------------------------|----------------------------------------|-------------------------------|-------------------------------|-------------------------------------------------------------------------------------------------|
| Start Workflow Manually   | Manual Trigger                      | Entry point to start workflow           |                               | Set Renamed Workflow Suffix    |                                                                                                 |
| Set Renamed Workflow Suffix | Set                                | Sets suffix string for new workflow name| Start Workflow Manually        | Get Current Workflow JSON      |                                                                                                 |
| Get Current Workflow JSON  | n8n API Node (workflow get)         | Fetches JSON of target workflow         | Set Renamed Workflow Suffix    | AI Generate Name Suggestions   |                                                                                                 |
| AI Generate Name Suggestions | Langchain Chain LLM                 | Sends prompt and workflow JSON to AI for node renaming | Get Current Workflow JSON      | Apply Names and Update References |                                                                                                 |
| Claude Sonnet AI Model     | Langchain OpenRouter Chat Model     | AI model backend option for Claude      |                               | AI Generate Name Suggestions (AI input) |                                                                                                 |
| Gemini AI Model            | Langchain Google Gemini Chat Model  | AI model backend option for Gemini      |                               | Parse JSON Response Structure  |                                                                                                 |
| Parse JSON Response Structure | Langchain Structured Output Parser | Parses AI JSON output for mappings       | Gemini AI Model                | AI Generate Name Suggestions (AI input) |                                                                                                 |
| Apply Names and Update References | Code Node (JavaScript)             | Applies new names & updates references  | AI Generate Name Suggestions   | Create New Workflow Copy       |                                                                                                 |
| Create New Workflow Copy   | n8n API Node (workflow create)      | Creates renamed workflow copy            | Apply Names and Update References | Deactivate Old Workflow       |                                                                                                 |
| Deactivate Old Workflow    | n8n API Node (workflow deactivate)  | Deactivates original workflow            | Create New Workflow Copy       | Activate Renamed Workflow      |                                                                                                 |
| Activate Renamed Workflow  | n8n API Node (workflow activate)    | Activates newly created renamed workflow| Deactivate Old Workflow        |                               |                                                                                                 |
| Workflow Description Note  | Sticky Note                        | Documentation and instructions           |                               |                               | ## **n8n Workflow Node Renamer**<br>This n8n workflow automates renaming nodes for clarity.<br>How to use it:<br>1. Optional suffix setting.<br>2. Set workflow ID.<br>3. Configure AI credentials.<br>4. Run manually.<br>Powered by **UpFastAI - Automating Intelligence** |

---

### 4. Reproducing the Workflow from Scratch

1. **Create Manual Trigger Node:**  
   - Add a “Manual Trigger” node named `Start Workflow Manually`. No parameters needed.

2. **Add a Set Node for Name Suffix:**  
   - Create a “Set” node named `Set Renamed Workflow Suffix`.  
   - Add a string field assignment: `workflowNameSuffix` = `" - new node names"`.

3. **Add n8n API Node to Get Workflow JSON:**  
   - Add an “n8n” node named `Get Current Workflow JSON`.  
   - Set operation to `get`.  
   - For `workflowId`, set to the ID of the workflow you want to rename (can be hardcoded or dynamically selected).  
   - Configure n8n API credentials with permission to read workflows.

4. **Add Langchain Chain LLM Node for AI Name Suggestions:**  
   - Add a node named `AI Generate Name Suggestions` of type `@n8n/n8n-nodes-langchain.chainLlm`.  
   - Configure the prompt with the detailed instructions for renaming nodes, including constraints and output format (JSON array mapping old to new names).  
   - Set the input text dynamically to the JSON string of the fetched workflow (e.g., using expression `{{ JSON.stringify($('Get Current Workflow JSON').first().json, null, 2) }}`).  
   - No batching needed.

5. **Add AI Model Nodes:**  
   - Add a node `Claude Sonnet AI Model` (type `@n8n/n8n-nodes-langchain.lmChatOpenRouter`).  
     - Model: `anthropic/claude-sonnet-4.5`.  
     - Temperature: 0.  
     - Set up OpenRouter API credentials.  
   - Add a node `Gemini AI Model` (type `@n8n/n8n-nodes-langchain.lmChatGoogleGemini`).  
     - Model: `models/gemini-flash-latest`.  
     - Configure Google Palm API credentials.  
   - Connect one of these AI model nodes as the backend for the `AI Generate Name Suggestions` node’s AI languageModel input.  
   - For Gemini, connect its output to a “Parse JSON Response Structure” node (see next).

6. **Add Parse JSON Response Structure Node:**  
   - Add node `Parse JSON Response Structure` of type `@n8n/n8n-nodes-langchain.outputParserStructured`.  
   - Configure input schema manually for an array of objects with `originalName` and `newName` string fields.  
   - Enable auto-fix.  
   - Connect the Gemini AI Model output to this node.  
   - Connect this node’s output to the AI Generate Name Suggestions node’s AI output parser input.

7. **Add Code Node to Apply Names and Update References:**  
   - Create a “Code” node named `Apply Names and Update References`.  
   - Paste the JavaScript code that:  
     - Reads original workflow JSON and AI-generated mappings.  
     - Parses and maps old names to new names.  
     - Updates all node names and connections.  
     - Recursively updates all string references in node parameters and expressions.  
     - Constructs the final workflow JSON with the suffix appended to the name.  
   - Connect the AI Generate Name Suggestions node to this code node.

8. **Create New Workflow Copy Node:**  
   - Add an “n8n” node called `Create New Workflow Copy`.  
   - Operation: `create`.  
   - Provide the updated workflow JSON from the previous node as `workflowObject`.  
   - Configure n8n API credentials with workflow creation permissions.  
   - Connect output of code node to this node.

9. **Deactivate Old Workflow Node:**  
   - Add an “n8n” node named `Deactivate Old Workflow`.  
   - Operation: `deactivate`.  
   - Workflow ID: taken dynamically from the original workflow JSON (`Get Current Workflow JSON`).  
   - On error, set to continue workflow execution.  
   - Connect output of `Create New Workflow Copy` to this node.

10. **Activate Renamed Workflow Node:**  
    - Add an “n8n” node named `Activate Renamed Workflow`.  
    - Operation: `activate`.  
    - Workflow ID: from the output of `Create New Workflow Copy` (ID of new workflow).  
    - Connect output of `Deactivate Old Workflow` to this node.

11. **Add Sticky Note:**  
    - Add a “Sticky Note” named `Workflow Description Note`.  
    - Add content describing the workflow purpose, usage instructions, and credits as per the original.  
    - Place visually near the start node for user guidance.

12. **Connect the Nodes:**
    - Link nodes in the order described above according to their dependencies:  
      `Start Workflow Manually` → `Set Renamed Workflow Suffix` → `Get Current Workflow JSON` → `AI Generate Name Suggestions` → `Apply Names and Update References` → `Create New Workflow Copy` → `Deactivate Old Workflow` → `Activate Renamed Workflow`.

13. **Final Checks:**
    - Ensure all credentials (n8n API, OpenRouter API, Google Palm API) are correctly configured.  
    - Validate expressions and ensure no hardcoded IDs unless intentional.  
    - Test with a sample workflow ID to confirm correct renaming.

---

### 5. General Notes & Resources

| Note Content                                                                                                                                                                                          | Context or Link                                                |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
| This workflow improves workflow maintainability by automating node renaming using AI, reducing manual effort and inconsistency.                                                                       | Workflow purpose                                              |
| To customize the suffix appended to the renamed workflow, edit the “Set Renamed Workflow Suffix” node before running.                                                                                 | Usage instruction                                            |
| Requires valid API credentials for n8n API access, and at least one AI service (OpenRouter for Claude or Google Palm for Gemini) configured properly.                                                  | Credential setup                                              |
| Powered by UpFastAI - Automating Intelligence                                                                                                                                                         | Branding                                                     |
| For detailed Langchain node usage and AI model configuration, consult n8n documentation: https://docs.n8n.io/integrations/builtin/n8n-nodes-langchain/                                                | Official n8n Langchain docs                                  |
| The workflow handles edge cases such as continuing execution on failure to deactivate the old workflow, ensuring activation of the new workflow proceeds.                                            | Error handling note                                           |

---

This completes the comprehensive documentation and analysis of the "Auto-Rename Workflow Nodes with AI (Gemini/Claude) for Better Readability" n8n workflow.