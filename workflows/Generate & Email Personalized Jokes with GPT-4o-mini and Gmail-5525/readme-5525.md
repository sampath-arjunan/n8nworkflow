Generate & Email Personalized Jokes with GPT-4o-mini and Gmail

https://n8nworkflows.xyz/workflows/generate---email-personalized-jokes-with-gpt-4o-mini-and-gmail-5525


# Generate & Email Personalized Jokes with GPT-4o-mini and Gmail

### 1. Workflow Overview

This workflow automates the generation and emailing of personalized jokes based on user-submitted inputs via a web form. It targets use cases such as interactive joke generation for entertainment, personalized marketing, or engagement campaigns where customized humor is sent automatically.

The workflow is logically divided into three main blocks:  
- **1.1 Input Reception:** Captures user inputs from a form submission containing three names or objects to be included in the joke.  
- **1.2 Joke Generation via AI:** Uses OpenAI's GPT-4o-mini model to generate a joke in Spanish containing the submitted words.  
- **1.3 Email Dispatch:** Sends the generated joke by email through Gmail.

---

### 2. Block-by-Block Analysis

#### 2.1 Input Reception

- **Overview:**  
  This block receives user input from a web form, where users specify three names or objects they want included in the joke. This input triggers the entire workflow.

- **Nodes Involved:**  
  - On form submission  
  - Sticky Note1

- **Node Details:**  
  - **On form submission**  
    - *Type:* Form Trigger  
    - *Role:* Entry point that listens for form submissions titled "Chistes generator" with three fields labeled "Nombre 1", "Nombre 2", and "Nombre 3" (placeholders: Juan, laptop, Maria).  
    - *Configuration:* The webhook is set up for external form submissions. The form description instructs users to input three names/objects for joke creation.  
    - *Expressions:* Values from the form fields are accessed downstream via `$('On form submission').item.json['Nombre 1']` etc.  
    - *Connections:* Output connects to LANG node.  
    - *Edge Cases:* Possible failures include webhook misconfiguration, missing fields on submission, or malformed input (e.g., empty strings).  
    - *Version:* 2.2  
  - **Sticky Note1**  
    - *Type:* Sticky Note  
    - *Role:* Provides user instruction to modify or add fields to improve joke creativity.  
    - *Connection:* None (annotation only).

#### 2.2 Joke Generation via AI

- **Overview:**  
  This block sets the language context and generates a personalized joke using the OpenAI GPT-4o-mini model, incorporating the input words.

- **Nodes Involved:**  
  - LANG  
  - Sticky Note  
  - OpenAI  
  - Sticky Note2

- **Node Details:**  
  - **LANG**  
    - *Type:* Set Node  
    - *Role:* Assigns the output language as "spanish / español" to a variable `language`.  
    - *Configuration:* Sets a string variable `language` to "spanish / español".  
    - *Connections:* Output connects to OpenAI node.  
    - *Edge Cases:* Hardcoded language may limit localization; if downstream nodes expect a different format, errors may occur.  
    - *Version:* 3.4  
  - **Sticky Note**  
    - *Type:* Sticky Note  
    - *Role:* Annotates that this node sets the output language.  
    - *Connection:* None.  
  - **OpenAI**  
    - *Type:* LangChain OpenAI Node  
    - *Role:* Generates the joke using GPT-4o-mini model by sending a prompt that includes the submitted names and the language variable.  
    - *Configuration:*  
      - Model: GPT-4o-mini  
      - Message prompt: "Tu tarea es generar un chiste que contenga estas palabras: [Nombre 1], [Nombre 2], y [Nombre 3]. Haz el chiste ne este idioma: [language]"  
      - Credentials: OpenAI API key configured.  
    - *Expressions:* Uses expressions to inject form submission data and language variable dynamically.  
    - *Connections:* Output connects to Gmail node.  
    - *Edge Cases:* Possible failures include API authentication errors, rate limit exceeded, malformed prompt, or network timeouts.  
    - *Version:* 1.8  
  - **Sticky Note2**  
    - *Type:* Sticky Note  
    - *Role:* Indicates the prompt message uses approximately 200 tokens.  
    - *Connection:* None.

#### 2.3 Email Dispatch

- **Overview:**  
  This block sends the generated joke via email to a fixed recipient using Gmail.

- **Nodes Involved:**  
  - Gmail  
  - Sticky Note3

- **Node Details:**  
  - **Gmail**  
    - *Type:* Gmail Node  
    - *Role:* Sends an email containing the joke generated by OpenAI to a specified recipient.  
    - *Configuration:*  
      - Recipient: "youremail@gmail.com" (placeholder, to be customized)  
      - Subject: "Joke generator"  
      - Message body: Injected dynamically from OpenAI's output field `message.content`  
      - Option: "Append Attribution" disabled to avoid including default Gmail signature  
      - Credentials: Gmail OAuth2 credentials configured.  
    - *Input:* Receives joke text from OpenAI node.  
    - *Edge Cases:* Potential issues include OAuth token expiration, quota limits, invalid recipient email, or network errors.  
    - *Version:* 2.1  
  - **Sticky Note3**  
    - *Type:* Sticky Note  
    - *Role:* Annotates the email send configuration.  
    - *Connection:* None.

---

### 3. Summary Table

| Node Name           | Node Type                  | Functional Role                | Input Node(s)       | Output Node(s) | Sticky Note Content                                                                                 |
|---------------------|----------------------------|-------------------------------|---------------------|----------------|---------------------------------------------------------------------------------------------------|
| On form submission   | Form Trigger               | Receives user input from form  | —                   | LANG           | Modify the fields as you wish, add more if necessary to make the joke more creative.              |
| LANG                | Set                        | Sets language variable         | On form submission  | OpenAI         | Set the output language                                                                            |
| OpenAI              | LangChain OpenAI            | Generates joke via GPT-4o-mini | LANG                | Gmail          | Prompt message (approx. using 200 tokens)                                                         |
| Gmail               | Gmail                      | Sends joke via email           | OpenAI              | —              | Configure email send                                                                              |
| Sticky Note1        | Sticky Note                | Instruction annotation         | —                   | —              | Modify the fields as you wish, add more if necessary to make the joke more creative.              |
| Sticky Note         | Sticky Note                | Annotation                    | —                   | —              | Set the output language                                                                            |
| Sticky Note2        | Sticky Note                | Annotation                    | —                   | —              | Prompt message (approx. using 200 tokens)                                                         |
| Sticky Note3        | Sticky Note                | Annotation                    | —                   | —              | Configure email send                                                                              |

---

### 4. Reproducing the Workflow from Scratch

1. **Create a Form Trigger Node: "On form submission"**  
   - Type: Form Trigger  
   - Configure webhook with a unique webhook ID.  
   - Set Form Title: "Chistes generator"  
   - Add three form fields:  
     - Field 1: Label "Nombre 1", Placeholder "Juan"  
     - Field 2: Label "Nombre 2", Placeholder "laptop"  
     - Field 3: Label "Nombre 3", Placeholder "Maria"  
   - Add Form Description: "Generador de chistes, introduce tres nombres o objetos que quieras que aparezcan en su chiste y a continuación se generará un chiste en base a ellos."  
   - Save and activate.

2. **Add a Set Node: "LANG"**  
   - Type: Set  
   - Add an assignment:  
     - Variable name: `language`  
     - Type: String  
     - Value: "spanish / español"  
   - Connect the output of "On form submission" to "LANG".

3. **Add LangChain OpenAI Node: "OpenAI"**  
   - Type: LangChain OpenAI  
   - Credentials: Configure OpenAI API key credentials.  
   - Model: Select "gpt-4o-mini".  
   - Messages: Configure a single message with content:  
     ```
     Tu tarea es generar un chiste que contenga estas palabras:
     {{ $('On form submission').item.json['Nombre 1'] }}
     {{ $('On form submission').item.json['Nombre 2'] }}
     y {{ $('On form submission').item.json['Nombre 3'] }}

     Haz el chiste ne este idioma:  {{ $json.language }}
     ```  
   - Connect output of "LANG" to "OpenAI".

4. **Add Gmail Node: "Gmail"**  
   - Type: Gmail  
   - Credentials: Set up OAuth2 credentials for Gmail.  
   - Configure:  
     - Send To: your email address (replace "youremail@gmail.com" with actual recipient)  
     - Subject: "Joke generator"  
     - Message: Set expression to `{{ $json.message.content }}` to use the joke generated by OpenAI.  
     - Disable "Append Attribution".  
   - Connect output of "OpenAI" to "Gmail".

5. **Optional: Add Sticky Notes** for documentation and clarity:  
   - Near "On form submission": Note about modifying form fields for creativity.  
   - Near "LANG": Note about setting output language.  
   - Near "OpenAI": Note about prompt length (~200 tokens).  
   - Near "Gmail": Note about email configuration.

6. **Test the workflow**:  
   - Submit the form with three example inputs.  
   - Check if the generated joke email arrives at the configured inbox.

---

### 5. General Notes & Resources

| Note Content                                                                                 | Context or Link                      |
|----------------------------------------------------------------------------------------------|------------------------------------|
| Modify the form fields to include more or different words to enrich joke creativity.         | Workflow form configuration         |
| OpenAI GPT-4o-mini is used for efficient joke generation balancing cost and quality.         | OpenAI model choice                 |
| Ensure Gmail OAuth2 credentials are valid and have proper scopes to send emails.             | Gmail node credential setup         |
| The prompt uses approx. 200 tokens, keep this in mind for token limits in OpenAI API.        | Prompt design                      |
| For production, replace placeholder email and secure all API keys properly.                  | Security best practices             |

---

**Disclaimer:** The provided text comes exclusively from an n8n automated workflow. It complies strictly with content policies and contains no illegal, offensive, or protected elements. All data handled is legal and public.