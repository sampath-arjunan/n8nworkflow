Automate AI Upwork Proposal Generation with Apify, Google Gemini & Sheets

https://n8nworkflows.xyz/workflows/automate-ai-upwork-proposal-generation-with-apify--google-gemini---sheets-8015


# Automate AI Upwork Proposal Generation with Apify, Google Gemini & Sheets

### 1. Workflow Overview

This workflow automates the generation of Upwork proposals using AI models, Apify actors, and Google Sheets integration. It is designed to scrape job listings from Upwork, store and update job data in Google Sheets, generate tailored AI-crafted proposals using Google Gemini, and send email notifications regarding new opportunities. The workflow is divided into two main logical blocks:

**1.1 Upwork Job Data Extraction and Notification**  
- Trigger job scraping on Upwork via Apify actors  
- Retrieve and store job listings in Google Sheets  
- Count new jobs and notify via email  

**1.2 AI Proposal Generation and Management**  
- Retrieve job details from Google Sheets  
- Conditionally process jobs to generate AI-crafted proposals using Google Gemini  
- Update proposal data back into Google Sheets  
- Summarize and send proposal emails  

---

### 2. Block-by-Block Analysis

#### 2.1 Upwork Job Data Extraction and Notification

**Overview:**  
This block scrapes job listings from Upwork using an Apify actor, stores the extracted data into Google Sheets, counts the number of new jobs, and sends an email notification about these new jobs.

**Nodes Involved:**  
- When clicking ‘Execute workflow’ (Manual Trigger)  
- Run Upwork Actor for Listed Jobs (Apify)  
- Get the Dataset from Upwork Actor (Apify)  
- Add the Extracted Data in Sheets (Google Sheets)  
- Count the New Jobs (Summarize)  
- Send Email Notification (Gmail)  

**Node Details:**

- **When clicking ‘Execute workflow’**  
  - Type: Manual Trigger  
  - Role: Initiates the workflow manually  
  - Configuration: No parameters; manually executed  
  - Inputs: None  
  - Outputs: Triggers "Run Upwork Actor for Listed Jobs"  
  - Edge cases: User must manually trigger; no automation if not triggered  

- **Run Upwork Actor for Listed Jobs**  
  - Type: Apify Actor node  
  - Role: Runs a pre-configured Apify crawler/actor to scrape Upwork job listings  
  - Configuration: Uses stored Apify actor credentials and settings (actor ID not explicitly shown)  
  - Inputs: Trigger from manual node  
  - Outputs: Provides actor run data, passed to "Get the Dataset from Upwork Actor"  
  - Edge cases: Apify API rate limits, actor errors, network timeouts  

- **Get the Dataset from Upwork Actor**  
  - Type: Apify Actor node  
  - Role: Retrieves the dataset (scraped job listings) generated by the actor run  
  - Configuration: Uses the previous actor run ID to fetch dataset  
  - Inputs: Output of "Run Upwork Actor for Listed Jobs"  
  - Outputs: Passes dataset to "Add the Extracted Data in Sheets"  
  - Edge cases: Dataset empty or incomplete, API errors  

- **Add the Extracted Data in Sheets**  
  - Type: Google Sheets node  
  - Role: Inserts or appends new job listings into a Google Sheet  
  - Configuration: Connected to appropriate Google Sheets credentials; configured for append or update  
  - Inputs: Dataset from Apify  
  - Outputs: Triggers "Count the New Jobs"  
  - Edge cases: Google API quota exceeded, sheet access errors  

- **Count the New Jobs**  
  - Type: Summarize node  
  - Role: Aggregates/counts new job entries added  
  - Configuration: Summarizes job count from sheet data  
  - Inputs: Output of "Add the Extracted Data in Sheets"  
  - Outputs: Triggers "Send Email Notification"  
  - Edge cases: Empty data sets lead to zero counts  

- **Send Email Notification**  
  - Type: Gmail node  
  - Role: Sends an email alert about new jobs scraped  
  - Configuration: Uses configured Gmail OAuth2 credentials, email content dynamically generated  
  - Inputs: Job count summary  
  - Outputs: Triggers "Get row(s) in sheet" for next block  
  - Edge cases: Gmail quota limits, authentication errors, malformed emails  

---

#### 2.2 AI Proposal Generation and Management

**Overview:**  
This block processes job records from Google Sheets, evaluates conditions, generates AI-crafted proposals using Google Gemini chat model, updates proposals back into the sheet, summarizes results, and sends proposal emails.

**Nodes Involved:**  
- Get row(s) in sheet (Google Sheets)  
- If (Conditional node)  
- Google Gemini Chat Model (AI Language Model)  
- Structured Output Parser (LangChain output parser)  
- Proposal Crafting (LangChain LLM chain)  
- Edit Fields (Set node)  
- Append or update row in sheet (Google Sheets)  
- Summarize (Summarize node)  
- Send a message (Gmail node)  

**Node Details:**

- **Get row(s) in sheet**  
  - Type: Google Sheets  
  - Role: Retrieves job entries or records to process for proposal generation  
  - Configuration: Reads specific rows or ranges from Google Sheets  
  - Inputs: Triggered after email notification  
  - Outputs: Passes data to "If" node  
  - Edge cases: Empty or missing rows, API errors  

- **If**  
  - Type: Conditional node  
  - Role: Determines whether a proposal should be generated for the job row(s)  
  - Configuration: Contains conditions (not visible) likely checking for job status or flags  
  - Inputs: Rows from Google Sheets  
  - Outputs: Passes qualifying rows to "Proposal Crafting"  
  - Edge cases: Misconfigured conditions may cause wrong branch selection  

- **Google Gemini Chat Model**  
  - Type: AI Language Model (LangChain integration)  
  - Role: Generates AI responses or proposals based on input job data  
  - Configuration: Uses Google Gemini model credentials and parameters (temperature, max tokens, etc.)  
  - Inputs: Job data from "If" node  
  - Outputs: Passes AI-generated raw response to "Proposal Crafting"  
  - Edge cases: API limits, model downtime, malformed prompts  

- **Structured Output Parser**  
  - Type: LangChain output parser  
  - Role: Parses structured JSON or formatted output from AI responses  
  - Configuration: Defines expected schema for outputs  
  - Inputs: AI raw output from "Google Gemini Chat Model"  
  - Outputs: Provides structured data to "Proposal Crafting"  
  - Edge cases: Parsing failures if AI output deviates from schema  

- **Proposal Crafting**  
  - Type: LangChain LLM chain  
  - Role: Orchestrates prompt chaining and output generation for proposal crafting  
  - Configuration: Combines AI output and parsing to finalize proposal text  
  - Inputs: Raw AI response and parsed structured data  
  - Outputs: Passes finalized proposal to "Edit Fields"  
  - Edge cases: Chain failures, errors in processing  

- **Edit Fields**  
  - Type: Set node  
  - Role: Modifies or enriches proposal data fields before updating sheet  
  - Configuration: Sets/updates fields such as proposal text, status flags, timestamps  
  - Inputs: Proposal from "Proposal Crafting"  
  - Outputs: Passes updated data to "Append or update row in sheet"  
  - Edge cases: Incorrect field mappings  

- **Append or update row in sheet**  
  - Type: Google Sheets  
  - Role: Updates existing rows or appends new proposals to Google Sheets  
  - Configuration: Uses Google Sheets credentials; update mode configured  
  - Inputs: Edited proposal data  
  - Outputs: Triggers "Summarize"  
  - Edge cases: API limits, concurrency conflicts  

- **Summarize**  
  - Type: Summarize node  
  - Role: Aggregates proposal results or statuses  
  - Configuration: Summarizes updated rows or proposal counts  
  - Inputs: Output of "Append or update row in sheet"  
  - Outputs: Triggers "Send a message"  
  - Edge cases: Empty input leads to empty summaries  

- **Send a message**  
  - Type: Gmail  
  - Role: Sends emails with AI-generated proposals or summary reports  
  - Configuration: Uses Gmail OAuth2 credentials; dynamically composed email content  
  - Inputs: Summarized proposal data  
  - Outputs: Ends the workflow  
  - Edge cases: Email sending failures, quota exceeded  

---

### 3. Summary Table

| Node Name                      | Node Type                           | Functional Role                                    | Input Node(s)                         | Output Node(s)                          | Sticky Note                             |
|--------------------------------|-----------------------------------|---------------------------------------------------|-------------------------------------|---------------------------------------|---------------------------------------|
| When clicking ‘Execute workflow’| Manual Trigger                    | Manual start of workflow                           | None                                | Run Upwork Actor for Listed Jobs      |                                       |
| Run Upwork Actor for Listed Jobs| Apify Actor                      | Runs Upwork scraping actor                         | When clicking ‘Execute workflow’    | Get the Dataset from Upwork Actor     |                                       |
| Get the Dataset from Upwork Actor| Apify Actor                     | Fetches scraped job dataset                        | Run Upwork Actor for Listed Jobs    | Add the Extracted Data in Sheets      |                                       |
| Add the Extracted Data in Sheets| Google Sheets                    | Stores job listings into Google Sheets             | Get the Dataset from Upwork Actor   | Count the New Jobs                    |                                       |
| Count the New Jobs              | Summarize                        | Counts new job entries                             | Add the Extracted Data in Sheets    | Send Email Notification               |                                       |
| Send Email Notification        | Gmail                           | Notifies about new jobs via email                  | Count the New Jobs                  | Get row(s) in sheet                   |                                       |
| Get row(s) in sheet            | Google Sheets                   | Retrieves jobs for proposal processing             | Send Email Notification             | If                                   |                                       |
| If                            | Conditional                    | Checks conditions to proceed with proposal          | Get row(s) in sheet                 | Proposal Crafting                     |                                       |
| Google Gemini Chat Model       | AI Language Model (LangChain)  | Generates AI proposals                              | Proposal Crafting (ai_languageModel)| Proposal Crafting                    |                                       |
| Structured Output Parser       | LangChain Output Parser        | Parses AI outputs into structured data             | Google Gemini Chat Model (ai_outputParser) | Proposal Crafting               |                                       |
| Proposal Crafting             | LangChain Chain LLM            | Orchestrates proposal creation                      | If                                | Edit Fields                          |                                       |
| Edit Fields                   | Set                           | Modifies proposal data fields                        | Proposal Crafting                  | Append or update row in sheet        |                                       |
| Append or update row in sheet | Google Sheets                 | Updates or appends proposal data                     | Edit Fields                       | Summarize                          |                                       |
| Summarize                    | Summarize                      | Summarizes proposals and statuses                    | Append or update row in sheet     | Send a message                       |                                       |
| Send a message               | Gmail                         | Sends proposal emails                                | Summarize                        | None                                |                                       |

---

### 4. Reproducing the Workflow from Scratch

1. **Create a Manual Trigger node** named "When clicking ‘Execute workflow’" to start the workflow manually.

2. **Add an Apify node** named "Run Upwork Actor for Listed Jobs":  
   - Configure with Apify credentials.  
   - Set to run the Upwork scraping actor (select actor ID from Apify).  
   - Connect output from the manual trigger.

3. **Add an Apify node** named "Get the Dataset from Upwork Actor":  
   - Configure to fetch dataset from the actor run (use previous node's run ID).  
   - Connect output from "Run Upwork Actor for Listed Jobs".

4. **Add a Google Sheets node** named "Add the Extracted Data in Sheets":  
   - Use Google Sheets credentials with access to the target sheet.  
   - Configure to append rows with job listing data.  
   - Connect output from "Get the Dataset from Upwork Actor".

5. **Add a Summarize node** named "Count the New Jobs":  
   - Configure to count number of new jobs added.  
   - Connect output from "Add the Extracted Data in Sheets".

6. **Add a Gmail node** named "Send Email Notification":  
   - Configure with Gmail OAuth2 credentials.  
   - Set up email content dynamically referencing job count.  
   - Connect output from "Count the New Jobs".

7. **Add a Google Sheets node** named "Get row(s) in sheet":  
   - Configure to read job rows for processing.  
   - Connect output from "Send Email Notification".

8. **Add an If node** named "If":  
   - Configure condition(s) to filter jobs needing proposal generation (e.g., status flags).  
   - Connect output from "Get row(s) in sheet".

9. **Add a Google Gemini Chat Model node** named "Google Gemini Chat Model":  
   - Configure with Google Gemini credentials and parameters (temperature, max tokens).  
   - Connect from the "If" node’s true branch.

10. **Add a Structured Output Parser node** named "Structured Output Parser":  
    - Define expected structured output schema for AI responses.  
    - Connect AI output from "Google Gemini Chat Model".

11. **Add a LangChain Chain LLM node** named "Proposal Crafting":  
    - Configure prompt templates and chain logic for proposal creation.  
    - Connect from "If" node and link AI model and output parser inputs accordingly.

12. **Add a Set node** named "Edit Fields":  
    - Configure to set or update proposal fields (e.g., proposal text, timestamps).  
    - Connect output from "Proposal Crafting".

13. **Add a Google Sheets node** named "Append or update row in sheet":  
    - Configure to update corresponding rows with proposals or append new entries.  
    - Connect output from "Edit Fields".

14. **Add a Summarize node** named "Summarize":  
    - Configure to summarize proposal updates or status counts.  
    - Connect output from "Append or update row in sheet".

15. **Add a Gmail node** named "Send a message":  
    - Configure with Gmail credentials.  
    - Set email content to send proposals or summaries.  
    - Connect output from "Summarize".

16. **Connect nodes to finalize flow:**  
    - Manual Trigger → Run Upwork Actor → Get Dataset → Add Data in Sheets → Count New Jobs → Send Email Notification → Get Rows → If → Proposal Crafting (AI Model + Parser) → Edit Fields → Update Sheets → Summarize → Send Proposal Email.

---

### 5. General Notes & Resources

| Note Content                                                                                                  | Context or Link                                  |
|---------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
| The workflow integrates Apify for web scraping, Google Gemini for AI proposal crafting, and Google Sheets for data storage. | High-level integration overview                   |
| Google Gemini requires proper API credentials and quota management to avoid throttling.                        | AI model usage                                    |
| Gmail nodes require OAuth2 credentials with appropriate scopes for sending emails.                             | Email sending configuration                       |
| Apify actor must be pre-configured to scrape Upwork job listings correctly.                                    | Apify actor setup                                 |
| Structured Output Parser expects AI outputs to conform to defined JSON schema; misalignment causes failures.  | AI output parsing                                 |
| The conditional logic in the "If" node should be tailored to filter jobs accurately (e.g., new or unprocessed). | Proposal generation control                        |
| Google Sheets API quotas should be monitored to prevent interruptions.                                        | Data storage considerations                        |

---

**Disclaimer:** The text provided originates exclusively from an automated workflow created with n8n, an integration and automation tool. This processing strictly complies with applicable content policies and contains no illegal, offensive, or protected elements. All data handled is legal and public.