Automate Gmail Tasks with Gemini AI Assistant and Contact Management

https://n8nworkflows.xyz/workflows/automate-gmail-tasks-with-gemini-ai-assistant-and-contact-management-7902


# Automate Gmail Tasks with Gemini AI Assistant and Contact Management

### 1. Workflow Overview

This workflow, titled **"Automate Gmail Tasks with Gemini AI Assistant and Contact Management"**, is designed to automate various Gmail-related tasks through an AI-powered chat interface. It targets users who want to efficiently manage emails by leveraging AI to send, reply, label, delete, or retrieve emails, while also integrating contact lookups via Google Sheets.

The workflow is structured into several logical blocks:

- **1.1 Input Reception:** Captures incoming chat messages to trigger the workflow.
- **1.2 AI Processing:** Uses an AI agent powered by Google Gemini and Langchain to interpret the chat message, decide on the Gmail operation, and generate necessary parameters.
- **1.3 Gmail Operations:** Executes specific Gmail tasks such as sending, replying, labeling, deleting, or fetching multiple emails based on AI agent instructions.
- **1.4 Contact Management:** Queries a Google Sheets document to retrieve contact email addresses when only names are provided.
- **1.5 Memory Management:** Maintains conversation context for improved continuity in chat interactions.
- **1.6 Documentation and Setup Guidance:** Provides embedded instructions and references for proper setup and usage.

---

### 2. Block-by-Block Analysis

#### 2.1 Input Reception

- **Overview:** This block listens for incoming chat messages via a webhook and triggers the workflow to process Gmail-related requests.
- **Nodes Involved:**  
  - `When chat message received`
- **Node Details:**

  - **When chat message received**  
    - **Type:** `@n8n/n8n-nodes-langchain.chatTrigger`  
    - **Role:** Webhook listener for chat messages initiating the workflow.  
    - **Configuration:** Default settings with an autogenerated webhook ID. No additional options set.  
    - **Input:** External chat messages via webhook URL.  
    - **Output:** Passes chat input to the AI Agent node.  
    - **Version:** 1.1  
    - **Potential Failures:** Network or webhook misconfiguration, invalid payloads, or unauthorized calls could cause failures.  
    - **Notes:** This node generates a webhook URL used to interact with the Gmail AI assistant chat interface.

#### 2.2 AI Processing

- **Overview:** Processes the received chat message using an AI agent powered by Langchain and Google Gemini. It interprets instructions, determines Gmail operations, fetches missing details (like emails from names), and applies Gmail labels.  
- **Nodes Involved:**  
  - `AI Agent`  
  - `Gemini`  
  - `Memory`
- **Node Details:**

  - **AI Agent**  
    - **Type:** `@n8n/n8n-nodes-langchain.agent`  
    - **Role:** Central AI decision-maker interpreting chat commands and orchestrating downstream Gmail actions.  
    - **Configuration:**  
      - System message instructing it to act as "Rakin’s smart Gmail assistant" with specific instructions:  
        - Use Gmail tools for tasks (Send, Reply, Label, Delete, Get Many).  
        - Fetch emails from Google Sheets if only names are provided.  
        - Auto-complete missing details (links, answers, summaries).  
        - Apply relevant labels (youtube-viewers, sales-inquiry, meeting-request, potential-clients, collaboration-requests).  
      - Version 2 of the node used (supports ai_tool, ai_languageModel, ai_memory connections).  
    - **Inputs:** Receives chat message from the trigger node.  
    - **Outputs:** Sends commands and parameters to Gmail operation nodes, Google Sheets node, Gemini language model, and Memory node.  
    - **Expressions:** Uses AI output variables such as `To`, `Message`, `Subject`, `Message_ID`, `Label_Names_or_IDs`, `Simplify`, `Return_All`.  
    - **Failures:** Misinterpretation by AI, missing or malformed data, or failure in invoking sub-nodes.  
    - **Notes:** Acts as the orchestrator, routing instructions and data to other specialized nodes.

  - **Gemini**  
    - **Type:** `@n8n/n8n-nodes-langchain.lmChatGoogleGemini`  
    - **Role:** Provides the language model backend for the AI Agent to generate natural language understanding and responses.  
    - **Configuration:** Uses Google Gemini via API key (credential setup required). No special options configured.  
    - **Input:** Receives prompts from AI Agent.  
    - **Output:** Feeds processed AI responses back to AI Agent.  
    - **Version:** 1  
    - **Failures:** API authentication errors, rate limits, or network issues.  
    - **Notes:** Requires Google Gemini (PaLM) credentials.

  - **Memory**  
    - **Type:** `@n8n/n8n-nodes-langchain.memoryBufferWindow`  
    - **Role:** Maintains conversational history to provide context and continuity for AI interactions.  
    - **Configuration:** Default buffer window size; stores recent conversation turns.  
    - **Input:** Connected to AI Agent for storing and retrieving chat context.  
    - **Output:** Provides memory buffer to AI Agent.  
    - **Version:** 1.3  
    - **Failures:** Buffer overflow or loss of context if improperly configured.  
    - **Notes:** Important for multi-turn conversations.

#### 2.3 Gmail Operations

- **Overview:** Executes Gmail-specific tasks such as sending emails, replying, labeling, deleting, and fetching messages based on AI Agent instructions.  
- **Nodes Involved:**  
  - `Send`  
  - `Reply`  
  - `Label`  
  - `Delete`  
  - `Get Many`
- **Node Details:**

  - **Send**  
    - **Type:** `n8n-nodes-base.gmailTool`  
    - **Role:** Sends new emails based on AI-generated content.  
    - **Configuration:**  
      - `sendTo`: Target recipient email extracted from AI output `To`.  
      - `message`: Email body from AI output `Message`.  
      - `subject`: Email subject from AI output `Subject`.  
      - Email type: Text only, no HTML.  
      - Attribution disabled.  
    - **Input:** Receives parameters from AI Agent.  
    - **Output:** Returns status of send operation.  
    - **Version:** 2.1  
    - **Failures:** OAuth issues, invalid email addresses, API limits.

  - **Reply**  
    - **Type:** `n8n-nodes-base.gmailTool`  
    - **Role:** Sends reply emails to specific messages.  
    - **Configuration:**  
      - `message`: Reply content from AI output `Message`.  
      - `messageId`: Message ID to reply to from AI output `Message_ID`.  
      - Email type: Text only.  
      - Attribution disabled.  
      - Operation: Reply.  
    - **Input:** Parameters from AI Agent.  
    - **Output:** Reply status.  
    - **Version:** 2.1  
    - **Failures:** Invalid message IDs, OAuth errors.

  - **Label**  
    - **Type:** `n8n-nodes-base.gmailTool`  
    - **Role:** Adds labels to emails per AI instruction.  
    - **Configuration:**  
      - `labelIds`: Label names or IDs from AI output `Label_Names_or_IDs`.  
      - `messageId`: Target email message ID from AI output `Message_ID`.  
      - Operation: Add labels.  
    - **Input:** AI Agent parameters.  
    - **Output:** Label operation result.  
    - **Version:** 2.1  
    - **Failures:** Invalid label IDs, permission issues.

  - **Delete**  
    - **Type:** `n8n-nodes-base.gmailTool`  
    - **Role:** Deletes emails as instructed.  
    - **Configuration:**  
      - `messageId`: Email message ID to delete from AI output `Message_ID`.  
      - Operation: Delete.  
    - **Input:** AI Agent parameters.  
    - **Output:** Deletion status.  
    - **Version:** 2.1  
    - **Failures:** Unauthorized deletion attempts, invalid IDs.

  - **Get Many**  
    - **Type:** `n8n-nodes-base.gmailTool`  
    - **Role:** Retrieves multiple emails matching criteria.  
    - **Configuration:**  
      - `simple`: Boolean indicating whether to simplify response from AI output `Simplify`.  
      - `returnAll`: Boolean from AI output `Return_All` to fetch all or limited emails.  
      - Filters and options left empty, controlled by AI.  
      - Operation: Get all.  
    - **Input:** AI Agent parameters.  
    - **Output:** List of emails.  
    - **Version:** 2.1  
    - **Failures:** API rate limits, malformed filters.

#### 2.4 Contact Management

- **Overview:** Retrieves email addresses corresponding to names from a Google Sheets document when only names are supplied.  
- **Nodes Involved:**  
  - `Sheet`
- **Node Details:**

  - **Sheet**  
    - **Type:** `n8n-nodes-base.googleSheetsTool`  
    - **Role:** Queries a Google Sheets spreadsheet for contact details.  
    - **Configuration:**  
      - Spreadsheet ID: `1UTOyNDNeRJj6nRuladtP61ljeZg6xXK3O1Kn3Dq7t_A` (Contact Details sheet).  
      - Sheet name: `gid=0` (Sheet1).  
      - No filters or specific ranges configured (presumed to fetch entire sheet or specific rows by AI).  
    - **Input:** Invoked by AI Agent when contact email lookup is needed.  
    - **Output:** Returns email addresses for use in Gmail operations.  
    - **Version:** 4.6  
    - **Failures:** OAuth authentication errors, invalid sheet ID or name, empty results.

#### 2.5 Memory Management

- Already covered in 2.2.

#### 2.6 Documentation and Setup Guidance

- **Overview:** Provides detailed setup instructions and helpful resources embedded as sticky notes inside the workflow canvas for user reference.  
- **Nodes Involved:**  
  - `Sticky Note`  
  - `Sticky Note3`
- **Node Details:**

  - **Sticky Note**  
    - **Type:** `n8n-nodes-base.stickyNote`  
    - **Role:** Comprehensive setup guide including OAuth credential setup for Gmail, Google Gemini API key generation, Google Sheets integration, chat trigger configuration, AI agent customization, and memory settings.  
    - **Content:**  
      - Author credit: Rakin Jakaria with YouTube link.  
      - Step-by-step instructions for all required credentials and node configurations.  
      - Pro tips for testing and API usage.  
    - **Position:** Top-left area of canvas for prominence.  
    - **Failure:** None (informational node).

  - **Sticky Note3**  
    - **Type:** `n8n-nodes-base.stickyNote`  
    - **Role:** Provides a direct link to a step-by-step YouTube tutorial video for workflow setup and usage.  
    - **Content:** Contains embedded YouTube thumbnail and link to tutorial "I Built an Auto Lead Finder AI Agent".  
    - **Position:** Top-center area.  
    - **Failure:** None.

---

### 3. Summary Table

| Node Name               | Node Type                                   | Functional Role                               | Input Node(s)               | Output Node(s)              | Sticky Note                                                                                                                        |
|-------------------------|---------------------------------------------|-----------------------------------------------|-----------------------------|-----------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| When chat message received | @n8n/n8n-nodes-langchain.chatTrigger       | Entry point webhook for chat input             | (External webhook)           | AI Agent                    | Setup guide and tutorial notes apply to the entire workflow.                                                                      |
| AI Agent                | @n8n/n8n-nodes-langchain.agent              | AI interpreter and orchestrator                 | When chat message received   | Send, Reply, Label, Delete, Get Many, Sheet, Gemini, Memory | Setup guide and tutorial notes apply to the entire workflow.                                                                      |
| Send                    | n8n-nodes-base.gmailTool                     | Send new emails                                 | AI Agent                    | (End)                       | Setup guide: Requires Gmail OAuth2 credential.                                                                                    |
| Reply                   | n8n-nodes-base.gmailTool                     | Reply to existing emails                         | AI Agent                    | (End)                       | Setup guide: Requires Gmail OAuth2 credential.                                                                                    |
| Label                   | n8n-nodes-base.gmailTool                     | Add labels to emails                             | AI Agent                    | (End)                       | Setup guide: Requires Gmail OAuth2 credential.                                                                                    |
| Delete                  | n8n-nodes-base.gmailTool                     | Delete emails                                   | AI Agent                    | (End)                       | Setup guide: Requires Gmail OAuth2 credential.                                                                                    |
| Get Many                | n8n-nodes-base.gmailTool                     | Retrieve multiple emails                         | AI Agent                    | (End)                       | Setup guide: Requires Gmail OAuth2 credential.                                                                                    |
| Sheet                   | n8n-nodes-base.googleSheetsTool              | Lookup contacts by name                          | AI Agent                    | (End)                       | Setup guide: Requires Google Sheets OAuth2 credential; Spreadsheet ID and sheet name configured.                                  |
| Gemini                  | @n8n/n8n-nodes-langchain.lmChatGoogleGemini | Language model backend for AI agent             | AI Agent                    | AI Agent                    | Setup guide: Requires Google Gemini API key credential setup.                                                                     |
| Memory                  | @n8n/n8n-nodes-langchain.memoryBufferWindow | Maintains conversation context                   | AI Agent                    | AI Agent                    | Setup guide: Adjust buffer window settings as needed.                                                                             |
| Sticky Note             | n8n-nodes-base.stickyNote                    | Workflow setup instructions and pro tips       | None                        | None                        | Contains detailed OAuth and configuration steps, author info, and best practices.                                                 |
| Sticky Note3            | n8n-nodes-base.stickyNote                    | Link to YouTube step-by-step tutorial video    | None                        | None                        | Contains YouTube tutorial link and thumbnail: [I Built an Auto Lead Finder AI Agent](https://youtu.be/Qogyc2mPa80?si=_TcQZjBdtLHy2mdz) |

---

### 4. Reproducing the Workflow from Scratch

1. **Create the Chat Trigger Node**  
   - Add node `When chat message received` of type `@n8n/n8n-nodes-langchain.chatTrigger`.  
   - Leave default options.  
   - This node will generate a webhook URL to receive chat input.

2. **Add AI Agent Node**  
   - Add node `AI Agent` of type `@n8n/n8n-nodes-langchain.agent` (version 2).  
   - Set the system message to:  
     ```
     You are Rakin’s smart Gmail assistant.

     Instructions:

     For any Gmail-related task from Rakin, use the appropriate Gmail tool (Send, Reply, Label, Delete, Get Many).

     If only a name is given (no email), fetch the email from Google Sheets.

     Auto-complete any missing details (links, answers, summaries) needed for emails or replies.

     Apply relevant labels like:

     youtube-viewers
     sales-inquiry
     meeting-request
     potential-clients
     collaboration-requests

     when appropriate.

     Stay efficient, accurate, and helpful at all times.
     ```
   - Connect input from `When chat message received` node.

3. **Add Gemini Language Model Node**  
   - Add `Gemini` node of type `@n8n/n8n-nodes-langchain.lmChatGoogleGemini`.  
   - Connect as AI language model input to `AI Agent`.  
   - Configure with Google Gemini (PaLM) API credentials.

4. **Add Memory Node**  
   - Add `Memory` node of type `@n8n/n8n-nodes-langchain.memoryBufferWindow`.  
   - Connect as AI memory input to `AI Agent`.  
   - Use default buffer window size or adjust per needs.

5. **Add Gmail Operation Nodes:**  
   - **Send:** `Send` node (`n8n-nodes-base.gmailTool`) configured to send emails.  
     - Map `sendTo`, `message`, `subject` from AI Agent outputs.  
     - EmailType: text; disable append attribution.  
   - **Reply:** `Reply` node (`n8n-nodes-base.gmailTool`) configured to reply emails.  
     - Map `message` and `messageId` from AI Agent.  
     - Operation: reply; emailType: text; disable append attribution.  
   - **Label:** `Label` node (`n8n-nodes-base.gmailTool`) to add labels.  
     - Map label IDs and message ID from AI Agent outputs.  
     - Operation: addLabels.  
   - **Delete:** `Delete` node (`n8n-nodes-base.gmailTool`) to delete emails.  
     - Map `messageId` from AI Agent outputs.  
     - Operation: delete.  
   - **Get Many:** `Get Many` node (`n8n-nodes-base.gmailTool`) to fetch emails.  
     - Map `simplify` and `returnAll` booleans from AI Agent outputs.  
     - Operation: getAll.

6. **Add Google Sheets Node**  
   - Add `Sheet` node (`n8n-nodes-base.googleSheetsTool`) to lookup contacts.  
   - Configure with your Google Sheets OAuth2 credentials.  
   - Set Document ID and Sheet Name to your contact spreadsheet (e.g., `1UTOyNDNeRJj6nRuladtP61ljeZg6xXK3O1Kn3Dq7t_A`, `gid=0`).  
   - Connect this node as a tool input to AI Agent to provide email lookup.

7. **Connect AI Agent Outputs**  
   - Connect AI Agent outputs labeled `ai_tool` to the Gmail operation nodes (`Send`, `Reply`, `Label`, `Delete`, `Get Many`, `Sheet`).  
   - Connect AI Agent output `ai_languageModel` to `Gemini`.  
   - Connect AI Agent output `ai_memory` to `Memory`.

8. **Credential Setup**  
   - Create and configure Gmail OAuth2 credential; assign to all Gmail operation nodes.  
   - Create Google Gemini API key credential for the Gemini node.  
   - Create Google Sheets OAuth2 credential for the Sheet node.

9. **Testing and Validation**  
   - Test each Gmail node individually with valid data to confirm credential and operation correctness.  
   - Test chat trigger by sending sample chat messages to the webhook URL.  
   - Monitor logs for errors or timeouts.

10. **Optional: Add Sticky Notes for Documentation**  
    - Create sticky notes with setup instructions and tutorial links for user reference.

---

### 5. General Notes & Resources

| Note Content                                                                                                                                                                                                                       | Context or Link                                                                                                          |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
| Workflow author: Rakin Jakaria. Comprehensive video tutorials available on YouTube channel: https://www.youtube.com/@rakinjakaria                                                                                               | Author credit and video tutorials                                                                                       |
| Step-by-step YouTube tutorial for similar AI agent workflow: [I Built an Auto Lead Finder AI Agent](https://youtu.be/Qogyc2mPa80?si=_TcQZjBdtLHy2mdz) with embedded thumbnail in workflow sticky note                                         | Video tutorial for setup and usage                                                                                       |
| Ensure Gmail labels (youtube-viewers, sales-inquiry, meeting-request, potential-clients, collaboration-requests) exist in Gmail before applying labels to emails for correct functioning                                        | Best practice reminder                                                                                                   |
| Monitor Google API usage quotas for Gmail API, Google Sheets API, and Google Gemini API to avoid exceeding limits and service interruptions                                                                                      | Operational advice                                                                                                       |
| The workflow uses advanced Langchain nodes requiring n8n version compatible with AI nodes (v1.0+ recommended) and proper API credentials setup                                                                                   | Version and credential requirements                                                                                      |
| When only a contact name is provided by the user, the workflow queries Google Sheets for the corresponding email to ensure accurate email addressing                                                                           | Functional detail                                                                                                        |
| The AI agent auto-completes missing details and intelligently decides which Gmail operation to perform based on user chat input                                                                                                  | Key AI capability                                                                                                        |

---

**Disclaimer:** The provided text is exclusively derived from an automated workflow created with n8n, an integration and automation tool. This processing strictly complies with current content policies and contains no illegal, offensive, or protected elements. All data handled is legal and public.