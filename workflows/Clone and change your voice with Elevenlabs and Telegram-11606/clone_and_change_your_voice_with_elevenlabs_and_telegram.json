{"id":"cNBvtT85HYqZAbx7","meta":{"instanceId":"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462","templateCredsSetupCompleted":true},"name":"Clone and change your voice with Elevenlabs and Telegram","tags":[],"nodes":[{"id":"ea1366d0-0455-4293-b943-2f608a35f83b","name":"Sticky Note8","type":"n8n-nodes-base.stickyNote","position":[800,912],"parameters":{"color":6,"width":400,"height":152,"content":"```json\n[\n  {\n    \"voice_id\": \"XXXXXX\",\n    \"requires_verification\": false\n  }\n]\n```"},"typeVersion":1},{"id":"71035dad-d194-43e7-8e8e-738fc80db24f","name":"Telegram Trigger","type":"n8n-nodes-base.telegramTrigger","position":[-848,1104],"webhookId":"1daf438f-124b-444c-81ff-5e072dfb2a82","parameters":{"updates":["message"],"additionalFields":{}},"credentials":{"telegramApi":{"id":"rQ5q95W7uKesMDx4","name":"Telegram account Fastewb"}},"typeVersion":1.2},{"id":"ed7b6129-3c3d-4ffa-9fb1-128bc11ca780","name":"Switch","type":"n8n-nodes-base.switch","position":[-208,1088],"parameters":{"rules":{"values":[{"outputKey":"Text","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"operator":{"type":"string","operation":"exists","singleValue":true},"leftValue":"={{ $json.message.text}}","rightValue":""}]},"renameOutput":true},{"outputKey":"Audio","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"7b2cb4dc-dd9d-43b2-b4db-f0de858f46cc","operator":{"type":"string","operation":"exists","singleValue":true},"leftValue":"={{ $json.message.voice.file_id }}","rightValue":""}]},"renameOutput":true},{"outputKey":"Immagine","conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"98d80a35-3004-4bad-95b8-e87fc9270083","operator":{"type":"object","operation":"exists","singleValue":true},"leftValue":"={{ $json.message.photo[0] }}","rightValue":""}]},"renameOutput":true}]},"options":{}},"executeOnce":false,"typeVersion":3.2,"alwaysOutputData":false},{"id":"c467a3f3-28fd-419e-8790-a11c0c262e25","name":"Sanitaze","type":"n8n-nodes-base.code","position":[-528,1104],"parameters":{"jsCode":"if ($input.first().json.message.from.id !== XXX) { // Replace with your Telegram user ID\n    return { unauthorized: true };\n} else {\n    // Return the original data when authorized\n    return $input.all();\n}\n"},"typeVersion":2},{"id":"a26d5749-6f4e-4ad5-87ae-27b0e9974a9f","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-624,992],"parameters":{"color":7,"width":336,"height":272,"content":"## STEP 1 - Sanitaze\nReplace XXXX with your Telegram user ID"},"typeVersion":1},{"id":"18e7c803-7a96-4b67-a694-09f2d473bed0","name":"Get audio","type":"n8n-nodes-base.telegram","position":[144,1104],"webhookId":"5f577807-d531-4b2e-8db2-4ee08fed59b4","parameters":{"fileId":"={{ $json.message.voice.file_id }}","resource":"file","additionalFields":{}},"credentials":{"telegramApi":{"id":"rQ5q95W7uKesMDx4","name":"Telegram account Fastewb"}},"typeVersion":1.2},{"id":"17615b88-22fc-4345-b865-d77c5818edfd","name":"Create Cloned Voice","type":"n8n-nodes-base.httpRequest","position":[592,928],"parameters":{"url":"https://api.elevenlabs.io/v1/voices/add","method":"POST","options":{},"sendBody":true,"contentType":"multipart-form-data","authentication":"genericCredentialType","bodyParameters":{"parameters":[{"name":"name","value":"XXX"},{"name":"files","parameterType":"formBinaryData","inputDataFieldName":"data"}]},"genericAuthType":"httpHeaderAuth"},"credentials":{"httpHeaderAuth":{"id":"cuOCiacID6OxWFUF","name":"ElevenLabs API"}},"typeVersion":4.3},{"id":"b450e059-a8dc-4164-a8a7-62bbb4663413","name":"Generate cloned audio","type":"n8n-nodes-base.httpRequest","position":[608,1312],"parameters":{"url":"https://api.elevenlabs.io/v1/speech-to-speech/XXX","method":"POST","options":{},"sendBody":true,"sendQuery":true,"contentType":"multipart-form-data","authentication":"genericCredentialType","bodyParameters":{"parameters":[{"name":"audio","parameterType":"formBinaryData","inputDataFieldName":"data"}]},"genericAuthType":"httpHeaderAuth","queryParameters":{"parameters":[{"name":"output_format","value":"mp3_44100_128"}]}},"credentials":{"httpHeaderAuth":{"id":"cuOCiacID6OxWFUF","name":"ElevenLabs API"}},"typeVersion":4.3},{"id":"255ee46e-8f38-4dfd-8866-4d4126925e9c","name":"Upload file","type":"n8n-nodes-base.googleDrive","position":[848,1312],"parameters":{"name":"=cloned_{{ $json.result.file_path.match(/[^/]+$/)[0] }}","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"options":{},"folderId":{"__rl":true,"mode":"list","value":"1J7_S0zPgUukmKWJglMepvf429vfQsidL","cachedResultUrl":"https://drive.google.com/drive/folders/1J7_S0zPgUukmKWJglMepvf429vfQsidL","cachedResultName":"Elevenlabs"}},"credentials":{"googleDriveOAuth2Api":{"id":"HEy5EuZkgPZVEa9w","name":"Google Drive account (n3w.it)"}},"typeVersion":3},{"id":"883dd24a-3098-4c1d-9336-0f888b132430","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[368,768],"parameters":{"color":7,"width":704,"height":352,"content":"## OPTION 1  - CLONE YOUR VOICE\nClone and save your voice on ElevenLabs by sending a voice message from Telegram. Get your unique Voice ID.\n\nGo to Developers, create your [ElevenLabs API Key](https://try.elevenlabs.io/ahkbf00hocnu). Set Header Auth (Name: xi-api-key, Value: YOUR_API_KEY)"},"typeVersion":1},{"id":"7cca5516-2a1b-4601-a129-efc604b6e302","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[368,1152],"parameters":{"color":7,"width":704,"height":352,"content":"## OPTION 2 - VOICE CHANGER\nChange your voice to one from your ElevenLabs library and save the audio file to Google Drive. If you want this, connect GEt audio node to this node \n\nGo to Developers, create your [ElevenLabs API Key](https://try.elevenlabs.io/ahkbf00hocnu). Set Header Auth (Name: xi-api-key, Value: YOUR_API_KEY)"},"typeVersion":1},{"id":"b2ff99d9-7c3c-45e9-bda5-11555b1f094b","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[-256,992],"parameters":{"color":7,"width":576,"height":272,"content":"## STEP 2 - Get audio file\nIF you send and audio file from Telegram, get it"},"typeVersion":1},{"id":"574338e3-cf7c-4efb-a045-d5448287b74e","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[-624,480],"parameters":{"width":944,"height":480,"content":"## Clone and change your voice with Elevenlabs and Telegram\n\n\nThis workflow creates a voice AI assistant accessible via Telegram that leverages [ElevenLabs](https://try.elevenlabs.io/ahkbf00hocnu) powerful voice synthesis technology. Users can either **clone their own voice** or **transform their voice** using pre-existing voice models, all through simple voice messages sent to a Telegram bot.\n\n### **How it works:**\n\nThe workflow is triggered by incoming Telegram messages and filters them by type. Authorized users can send voice messages that are routed to an audio-processing branch. Depending on the selected option, the audio is either sent to ElevenLabs to **clone the voice** and generate a new voice ID or used for **voice transformation** with an existing cloned voice. The converted or cloned audio is then stored in Google Drive, and the cloned voice ID is returned for later reuse.\n\n### **Setup steps:**\n\nCreate and configure a Telegram bot using BotFather, then link it to the Telegram Trigger node. Restrict access by adding your Telegram user ID in the authorization Code node. Obtain your ElevenLabs API key and set it in the HTTP Request nodes for both cloning and speech-to-speech conversion. If using Google Drive for output storage, connect OAuth2 credentials and define the upload folder. Set or replace the appropriate voice ID in node parameters, then test the workflow by sending a voice message from your authorized Telegram account.\n"},"typeVersion":1}],"active":false,"pinData":{"Telegram Trigger":[{"json":{"message":{"chat":{"id":7360449246,"type":"private","username":"n3witalia","first_name":"n3w Italia"},"date":1764939497,"from":{"id":7360449246,"is_bot":false,"username":"n3witalia","first_name":"n3w Italia","language_code":"it"},"voice":{"file_id":"AwACAgQAAxkBAAICk2ky1ul_enjcpnMTwKm5xUe-AAH3tAACYR8AAuEVkFFY0r0Q6FZTbTYE","duration":4,"file_size":86599,"mime_type":"audio/ogg","file_unique_id":"AgADYR8AAuEVkFE"},"message_id":659},"update_id":976113433}}]},"settings":{"executionOrder":"v1"},"versionId":"62a8d314-4e69-4473-9625-533ecd44794f","connections":{"Switch":{"main":[[],[{"node":"Get audio","type":"main","index":0}],[]]},"Sanitaze":{"main":[[{"node":"Switch","type":"main","index":0}]]},"Get audio":{"main":[[{"node":"Create Cloned Voice","type":"main","index":0}]]},"Telegram Trigger":{"main":[[{"node":"Sanitaze","type":"main","index":0}]]},"Generate cloned audio":{"main":[[{"node":"Upload file","type":"main","index":0}]]}}}